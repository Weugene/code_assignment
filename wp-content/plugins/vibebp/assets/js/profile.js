!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=wp.data;r.dispatch,r.select;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=wp.element,c=(l.createElement,l.useRef),s=l.useEffect,u=(l.Fragment,l.render,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=c(Date.now());s((function(){var n=setTimeout((function(){Date.now()-r.current>=t&&(e(),r.current=Date.now())}),t-(Date.now()-r.current));return function(){clearTimeout(n)}}),[t].concat(i(n)))});var m=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},p=function(e){var t,n,r=e.progress;switch(e.size){case"xs":t=10,n=1;break;case"sm":t=25,n=2.5;break;case"med":t=50,n=5;break;case"lg":t=75,n=7.5;break;case"xl":t=100,n=10;break;default:t=50,n=5}var a=t-2*n,i=2*a*Math.PI,o=i-r/100*i;return wp.element.createElement("div",{className:"react-progress-circle"},wp.element.createElement("svg",{height:2*t,width:2*t},wp.element.createElement("circle",{className:"ReactProgressCircle_circleBackground",strokeWidth:n,style:{strokeDashoffset:o},r:a,cx:t,cy:t}),wp.element.createElement("circle",{className:"ReactProgressCircle_circle",strokeWidth:n,strokeDasharray:i+" "+i,style:{strokeDashoffset:o},r:a,cx:t,cy:t})))};function d(e,t,n){e&&t.unshift(e);var r=function(e){for(var t="object"!=a(e)?JSON.parse(e):e,n="",r=0;r<t.length;r++){var i="";for(var o in t[r])""!=i&&(i+=","),i+=t[r][o];n+=i+"\r\n"}return n}(JSON.stringify(t)),i=n+".csv"||!1,o=new Blob([r],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(o,i);else{var l=document.createElement("a");if(void 0!==l.download){var c=URL.createObjectURL(o);l.setAttribute("href",c),l.setAttribute("download",i),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=e.slice(0,e.indexOf("\n")).split(t),r=e.slice(e.indexOf("\n")+1).split("\n"),a=[];return r.map((function(e,r){a.push([]);var i=e.split(t);return n.reduce((function(e,t,n){return a[r].push({key:t,value:i[n]}),e}),{})})),a}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=wp.element,O=(E.createElement,E.useState),j=E.useEffect,S=(E.Fragment,E.render,wp.data),N=S.dispatch,k=S.select,P=function(e){var t=g(O(!0),2),n=(t[0],t[1],g(O(e.field),2)),r=n[0],a=(n[1],g(O(!1),2)),i=a[0],o=a[1],l=g(O({icon:"",url:""}),2),c=l[0],s=l[1],u=g(O([]),2),m=u[0],p=u[1];j((function(){"string"==typeof e.field.value&&e.field.value.length&&p(JSON.parse(e.field.value))}),[]);var d,f=function(t){e.hasOwnProperty("registration")&&e.registration?e.update(r):fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify(v({field_id:r.id,value:JSON.stringify(t),token:k("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){N("vibebp").addNotification({text:e.message})}))};return wp.element.createElement("div",{className:"vibebp_profile_field social"},m.length?wp.element.createElement("div",{className:"social_icons_list"},m.map((function(e,t){return wp.element.createElement("div",{className:"social_icon_wrapper"},wp.element.createElement("div",{className:"social_icon"},wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.url)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=y(m);e.splice(t,1),p(e),f(e)}}))}))):"",wp.element.createElement("a",{className:i?"vicon vicon-close":"vicon vicon-plus",onClick:function(){o(!i)}}),i?wp.element.createElement("div",{className:"add_social_icon"},wp.element.createElement("div",{className:"social_icons"},window.vibebp.social_icons.map((function(e){return wp.element.createElement("div",{className:c.icon===e.icon?"social_icon selected":"social_icon",onClick:function(){s(v(v({},c),{},{icon:e.icon}))}},wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.label))}))),wp.element.createElement("div",{className:!c.url.length||(d=c.url,/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(d))?"social_icon_url":"social_icon_url error"},wp.element.createElement("input",{type:"text",onChange:function(e){s(v(v({},c),{},{url:e.target.value}))},value:c.url})),wp.element.createElement("a",{className:"button is-primary",onClick:function(){if(c.url.length){var e=y(m);e.push(c),p(e),o(!1),s({icon:"",url:""}),f(e)}}},window.vibebp.translations.set_icon)):"")};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=wp.element,J=(L.createElement,L.useState),U=L.useEffect,R=(L.Fragment,L.render,wp.data),F=R.dispatch,H=R.select,q=function(e){var t=T(J(!0),2),n=(t[0],t[1],T(J(e.field),2)),r=n[0],a=(n[1],T(J(!1),2)),i=a[0],o=a[1],l=T(J({icon:"",title:"",description:""}),2),c=l[0],s=l[1],u=T(J([]),2),p=u[0],d=u[1];U((function(){"string"==typeof e.field.value&&e.field.value.length&&m(e.field.value)&&d(JSON.parse(e.field.value))}),[]);var f=function(t){e.hasOwnProperty("registration")&&e.registration?e.update(r):fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify({field_id:r.id,value:JSON.stringify(t),token:H("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){F("vibebp").addNotification({text:e.message})}))};return wp.element.createElement("div",{className:"vibebp_profile_field repeatable"},p.length?wp.element.createElement("div",{className:"repeatable_icons_list"},p.map((function(e,t){return wp.element.createElement("div",{className:"repeatable_icon_wrapper"},wp.element.createElement("div",{className:"desc"!=r.rtype?"titled"!=r.rtype?"repeatable_title":"repeatable_icon":"repeatable_desc"},("stacked"==r.rtype||"spaced"==r.rtype)&&e.hasOwnProperty("icon")&&e.icon.length>100?wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:e.icon}}):wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,"desc"!=r.rtype&&e.hasOwnProperty("title")?wp.element.createElement("h4",null,e.title):"",wp.element.createElement("p",null,e.description))),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=C(p);e.splice(t,1),d(e),f(e)}}))}))):"",wp.element.createElement("a",{className:i?"vicon vicon-close":"vicon vicon-plus",onClick:function(){o(!i)}}),i?wp.element.createElement("div",{className:"add_repeatable_icon"},"stacked"==r.rtype||"spaced"==r.rtype?wp.element.createElement("div",{className:"repeatable_icons"},window.vibebp.repeatable_icons.map((function(e){if(!(e.length>100))return wp.element.createElement("div",{className:c.icon===e?"repeatable_icon selected":"repeatable_icon",onClick:function(){s(A(A({},c),{},{icon:e}))}},wp.element.createElement("span",{className:e}));wp.element.createElement("div",{className:c.icon===e?"repeatable_icon selected":"repeatable_icon",onClick:function(){s(A(A({},c),{},{icon:e}))}},wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:e}}))}))):"",wp.element.createElement("div",{className:"desc"!=r.rtype?"repeatable_title":"repeatable_desc"},"stacked"!=r.rtype&&"spaced"!=r.rtype||!c.icon?"":c.icon.length>100?wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:c.icon}}):wp.element.createElement("span",{className:c.icon}),wp.element.createElement("span",null,"desc"!=r.rtype?wp.element.createElement("input",{type:"text",onChange:function(e){s(A(A({},c),{},{title:e.target.value}))},value:c.title,placeholder:window.vibebp.translations.title}):"",wp.element.createElement("input",{type:"text",onChange:function(e){s(A(A({},c),{},{description:e.target.value}))},value:c.description,placeholder:window.vibebp.translations.description}))),wp.element.createElement("a",{className:"button is-primary",onClick:function(){var e=C(p);e.push(c),d(e),o(!1),f(e),s({icon:"",title:"",description:""})}},window.vibebp.translations.set_icon)):"")};function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=wp.element,Y=(X.createElement,X.useState),Q=X.useEffect,ee=(X.Fragment,X.render,wp.data),te=ee.dispatch,ne=ee.select,re=function(e){var t=G(Y(!0),2),n=t[0],r=t[1],a=G(Y(e.field),2),i=a[0],o=a[1],l=G(Y(),2),c=l[0],s=l[1],m=G(Y(),2),p=m[0],d=m[1],f=G(Y(),2),b=f[0],v=f[1],w=G(Y(),2),y=w[0],g=w[1],h=G(Y(""),2),_=h[0],E=h[1],O=G(Y([]),2),j=O[0],S=O[1],N=G(Y(!1),2),k=N[0],P=N[1];Q((function(){if(Array.isArray(e.field.value)){var t=e.field.value,n={lat:t[0],lng:t[1],address:t[2],zipcode:t[3],city:t[4],country:t[5]};o(W(W({},e.field),{},{value:n}))}}),[e.field]);u((function(){if(!n){var e=new google.maps.places.AutocompleteService;_.length&&e.getQueryPredictions({input:_},(function(e,t){if(t==google.maps.places.PlacesServiceStatus.OK){var n=$(j);e.forEach((function(e){n.push(e.description)})),S(n)}}))}}),500,[_]),Q((function(){if(c)if(window.hasOwnProperty("google")&&window.google.hasOwnProperty("maps")){var e={lat:-34.397,lng:150.644},t={zoom:16,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,imageDefaultUI:!0},n=new google.maps.Map(c,t);d(n);var a=new google.maps.Marker({map:n,position:e,animation:google.maps.Animation.DROP});v(a),r(!1),g(new google.maps.Geocoder)}else{var i=window.document.createElement("script");i.src="https://maps.googleapis.com/maps/api/js?key=".concat(window.vibebp.settings.google_maps_api_key,"&libraries=places"),i.async=!0,window.document.body.appendChild(i),i.addEventListener("load",(function(){var e={lat:-34.397,lng:150.644},t={zoom:16,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,imageDefaultUI:!0},n=new google.maps.Map(c,t);d(n);var a={url:window.vibebp.settings.map_marker,size:new google.maps.Size(51,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,30)},i=new google.maps.Marker({map:n,position:e,animation:google.maps.Animation.DROP,draggable:!0,icon:a});v(i),r(!1),g(new google.maps.Geocoder)}))}}),[c]),Q((function(){if(b){var e,t;(null===(e=window.google)||void 0===e||null===(t=e.maps)||void 0===t?void 0:t.event)&&window.google.maps.event.addListener(b,"dragend",(function(e){(new google.maps.Geocoder).geocode({location:e.latLng},(function(e,t){"OK"==t&&(console.log(e),p.setCenter(e[0].geometry.location),o(W(W({},i),{},{value:{lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng(),address:e[0].formatted_address,zipcode:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("postal_code")}))].long_name,city:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("locality")}))].long_name,country:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("country")}))].long_name}})))}))}))}return function(){var e,t;null===(e=window.google)||void 0===e||null===(t=e.maps)||void 0===t||t.event}}),[b]),Q((function(){if("object"==z(i.value)&&p&&b){console.log("--\x3e");var e=new google.maps.LatLng(i.value.lat,i.value.lng);p.setCenter(e),b.setPosition(e)}}),[i,p,b]),Q((function(){if(!n)if(i.value){var e={lat:-34.397,lng:150.644},t=i.value;if(Array.isArray(t)||"string"!=typeof t?e={lat:parseFloat(i.value.lat),lng:parseFloat(i.value.lng)}:t.split(","),t.length){var r=W({},i);6===t.length&&(r.value={lat:t[0],lng:t[1],address:t[2],zipcode:t[3],city:t[4],country:t[5]}),o(r),e={lat:parseFloat(r.value.lat),lng:parseFloat(r.value.lng)}}if(p){var a={url:window.vibebp.settings.map_marker,size:new google.maps.Size(51,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,30)},l=new google.maps.Marker({map:p,position:e,animation:google.maps.Animation.DROP,draggable:!0,icon:a});v(l)}}else A()}),[n]);var x=function(){y&&(new google.maps.Geocoder).geocode({address:_},(function(e,t){"OK"==t&&(p.setCenter(e[0].geometry.location),console.log(e[0].geometry.location),b.setPosition(e[0].geometry.location)),S([])}))},A=function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var t=W({},i);t.value=[e.coords.latitude,e.coords.longitude],o(t);var n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);console.log(n),p.setCenter(n),b.setPosition(n),y&&y.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}}).then((function(e){console.log(e)}),(function(e){console.error(e)}))})):fetch("http://ip-api.com/json",{method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=W({},i);t.value={lat:e.lat,lng:e.lng},o(t);new google.maps.LatLng(e.lat,e.lng);y&&y.geocode({location:{lat:e.lat,lng:e.lng}}).then((function(e){console.log(e)}),(function(e){console.error(e)}))}));var e={url:window.vibebp.settings.map_marker,size:new google.maps.Size(51,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,30)},t=new google.maps.Marker({map:p,position:{lat:i.value.lat,lng:i.value.lng},animation:google.maps.Animation.DROP,draggable:!0,icon:e});v(t)};return wp.element.createElement("div",{className:"vibebp_profile_field location"},wp.element.createElement("div",{className:"search_me"},wp.element.createElement("span",{className:"vicon vicon-target",onClick:A}),wp.element.createElement("input",{type:"text",value:_,onChange:function(e){E(e.target.value)}}),_.length?wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){E(""),S([])}}):"",wp.element.createElement("span",{className:_.length?"vicon vicon-search is_active":"vicon vicon-search",onClick:x})),j.length?wp.element.createElement("div",{className:"vibebp_autocomplete_results"},j.map((function(e){return wp.element.createElement("div",{className:"vibebp_autocomplete_result",onClick:function(){E(e),S([]),x()}},e)}))):"",wp.element.createElement("div",{className:"google_map_locator"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",wp.element.createElement("div",{ref:function(e){e&&!c&&s(e)},style:{height:"400px",width:"100%"}})),wp.element.createElement("div",{className:"google_map_details"},wp.element.createElement("textarea",{placeholder:window.vibebp.translations.address,onChange:function(e){o(W(W({},i),{},{value:W(W({},i.value),{},{address:e.target.value})}))},value:i.value.hasOwnProperty("address")?i.value.address:""}),wp.element.createElement("div",{className:"gmap_fields"},wp.element.createElement("input",{type:"text",onChange:function(e){o(W(W({},i),{},{value:W(W({},i.value),{},{zipcode:e.target.value})}))},placeholder:window.vibebp.translations.zipcode,value:i.value.hasOwnProperty("zipcode")?i.value.zipcode:""}),wp.element.createElement("input",{type:"text",onChange:function(e){o(W(W({},i),{},{value:W(W({},i.value),{},{city:e.target.value})}))},placeholder:window.vibebp.translations.city,value:i.value.hasOwnProperty("city")?i.value.city:""}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.country,value:i.value.hasOwnProperty("country")?i.value.country:""}),i.value.zipcode?wp.element.createElement("a",{className:k?"button is-loading":"button",onClick:function(){P(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify(W({field_id:i.id,type:"location",value:i.value,token:ne("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){P(!1),e.hasOwnProperty("message")&&te("vibebp").addNotification({text:e.message})}))}},window.vibebp.translations.save_changes):"")))};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=wp.element,pe=(me.createElement,me.render,me.useState),de=me.useEffect;me.useContext,me.Fragment,me.RawHTML;function fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))if(n){for(var r=0;r<t.length;r++)if(t[r][n]===e[n])return r}else for(var a=0;a<t.length;a++)if(t[a].name===e.name)return a;return-1}var be=function(e){var t=ce(pe({}),2),n=t[0],r=t[1],a=ce(pe(""),2),i=(a[0],a[1]),o=ce(pe([]),2),l=o[0],c=o[1],s=ce(pe([]),2),u=s[0],m=s[1],p=ce(pe(!1),2),d=p[0],f=p[1],b=ce(pe(!1),2),v=b[0],w=b[1],y=ce(pe(!1),2),g=(y[0],y[1]);de((function(){if(e.field&&e.field.hasOwnProperty("value")&&e.field.value.length&&e.field.options&&e.field.options.length){var t=[];e.field.value.map((function(n){e.field.options.map((function(e){e.value!=n&&e.name!=n||t.push(e)}))})),m(t)}e.field.options&&e.field.options.length&&Array.isArray(e.field.options)&&(f(!0),c(le(e.field.options)),f(!1)),r(e.field),g(!0)}),[e.field]);var h="search_results";return v&&(h="search_results active"),wp.element.createElement("div",{className:"selectcptfield multiselect"},wp.element.createElement("div",{className:"selectcptfield_list"},u.length?wp.element.createElement("div",{className:"selectcptfield_items"},u.map((function(t){var a=n.cpt?n.multiselect:"";return wp.element.createElement("span",{type:a,onClick:function(){var a=le(u),i=le(l);a.splice(fe(t,u,"name"),1),i.push(t),c(i),m(a);var o=ie({},n);if(a&&a.length){var s=[];a.map((function(e){e.hasOwnProperty("name")&&s.push(e.name)})),o.value=s,o.show_value=a,r(o),e.update(o,e.fieldIndex,"fieldvaluechanged")}else o.value=[],o.show_value=[],r(o),e.update(o,e.fieldIndex,"fieldvaluechanged")}},t.name)}))):""),wp.element.createElement("div",{className:"selectimitate",onClick:function(){w(!v)}},v?wp.element.createElement("i",{class:"vicon vicon-angle-up","aria-hidden":"true"}):wp.element.createElement("i",{class:"vicon vicon-angle-down","aria-hidden":"true"}),l.length?wp.element.createElement("div",{className:h},l.map((function(t,a){if(-1===fe(t,u,"name"))return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){i("");var o=le(u);if(-1===fe(t,o,"name")){o.push(t),l.splice(a,1),m(o);var c=ie({},n);if(o&&o.length){var s=[];o.map((function(e){e.hasOwnProperty("name")&&s.push(e.name)})),c.value=s,c.show_value=o,r(c),e.update(c,e.fieldIndex,"fieldvaluechanged")}}}},wp.element.createElement("span",null,t.name))}))):d?"......":""))};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _e=wp.element,Ee=(_e.createElement,_e.render,_e.useState),Oe=_e.useEffect,je=_e.Fragment,Se=(_e.useContext,wp.data),Ne=Se.dispatch,ke=Se.select,Pe=function(e){var t=ge(Ee(!1),2),n=(t[0],t[1],ge(Ee({}),2)),r=n[0],a=n[1],i=ge(Ee(!1),2),o=(i[0],i[1],ge(Ee(0),2)),l=o[0],c=(o[1],ge(Ee(""),2)),s=c[0],u=c[1];Oe((function(){s.length&&setTimeout((function(){u("")}),5e3)}),[s]),Oe((function(){e.field.hasOwnProperty("value")&&void 0!==e.field.value&&e.field.value.hasOwnProperty("url")&&a(e.field.value)}),[e.field]);var m=function(t){void 0===t&&(t=r),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify(we({field_id:e.field.id,type:e.field.type,value:t,token:ke("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){Ne("vibebp").addNotification({text:e.message})}))},p=function(){a({}),fetch("".concat(window.vibebp.api.url,"/user/delete_media?post"),{method:"post",body:JSON.stringify({token:ke("vibebp").getToken(),media:r})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&Ne("vibebp").addNotification({text:e.message})}))};return wp.element.createElement(je,null,r&&r.hasOwnProperty("url")?wp.element.createElement("div",{className:"single_media"},function(e){if(e.hasOwnProperty("url"))return wp.element.createElement("div",{className:"media_snapashot"},wp.element.createElement("a",{href:e.url,target:"_blank"},e.name),wp.element.createElement("span",{className:"vicon vicon-close",onClick:p}))}(r)):wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media",style:{border:"1px dotted var(--darkborder)",padding:"1rem"}},l?wp.element.createElement("div",{className:"vibebp_progress_wrapper"},wp.element.createElement("span",{className:"progress_wrapper"},wp.element.createElement("span",{className:"progress_bar",style:{width:l+"%"}})),wp.element.createElement("span",null,l,"%")):wp.element.createElement("span",{className:"vicon vicon-plus"})),wp.element.createElement("input",{type:"file",id:"vibe_editor_upload_media",onChange:function(t){return function(t){if(t.target.files[0]){var n=t.target.files[0],r=n.size/1024/1024,i=[];if(e.field.all_upload_types&&Array.isArray(e.field.upload_types)&&e.field.upload_types.length&&e.field.upload_types.map((function(t){e.field.all_upload_types.hasOwnProperty(t)&&e.field.all_upload_types[t].length&&e.field.all_upload_types[t].map((function(e){i.push(e)}))})),-1===i.indexOf(n.type))return u(window.vibebp.translations.file_type_not_allowed),!1;if(parseInt(e.field.upload_size)<r)return u(window.vibebp.translations.file_size_error+" "+e.field.upload_size+"MB"),!1;var o=new FormData;o.append("file",t.target.files[0]),o.append("body",JSON.stringify({token:ke("vibebp").getToken()})),fetch("".concat(window.vibebp.api.url,"/user/upload_media?upload"),{method:"post",body:o}).then((function(e){return e.json()})).then((function(e){e.status?(a(e.data),m(e.data)):e.hasOwnPropoerty("message")&&Ne("vibebp").addNotification({text:e.message})}))}}(t)},style:{display:"none"}}),wp.element.createElement("div",{className:"file_restrictions_info"},wp.element.createElement("div",{className:"allowed_file_types"},e.field.hasOwnProperty("upload_types")&&e.field.upload_types.length?wp.element.createElement(je,null,wp.element.createElement("span",null,window.vibebp.translations.allowed_file_types),wp.element.createElement("div",null,e.field.upload_types.map((function(e){return wp.element.createElement("span",null,e)})))):""),wp.element.createElement("div",{className:"allowed_file_size"},e.field.hasOwnProperty("upload_size")&&e.field.upload_size?wp.element.createElement(je,null,wp.element.createElement("span",null,window.vibebp.translations.max_size),wp.element.createElement("span",null,e.field.upload_size+" MB")):"")),s&&s.length?wp.element.createElement("div",{className:"vbp_message vbp_error"},s):""))};function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je=wp.element,Ue=(Je.createElement,Je.render,Je.useState),Re=Je.useEffect,Fe=Je.Fragment,He=(Je.useContext,wp.data),qe=He.dispatch,ze=He.select,$e=function(e){var t=De(Ue(!1),2),n=t[0],r=t[1],a=De(Ue([]),2),i=a[0],o=a[1],l=De(Ue([]),2),c=l[0],s=(l[1],De(Ue(!1),2)),m=s[0],p=s[1],d=De(Ue(!1),2),f=d[0],b=d[1],v=De(Ue(0),2),w=v[0],y=v[1],g=De(Ue("media"),2),h=g[0],_=g[1],E=De(Ue((function(){var t={posts_per_page:20,paged:1,search_terms:"",orderby:""};return e.hasOwnProperty("post_mime_type")&&void 0!==e.post_mime_type&&(t.post_mime_type=e.post_mime_type),t})),2),O=E[0],j=E[1],S=De(Ue(""),2),N=S[0],k=S[1],P=De(Ue([]),2),x=(P[0],P[1],De(Ue({name:"",url:"",type:"file"}),2)),A=x[0],I=x[1];Re((function(){return document.querySelector(".vibebp_myprofile")&&document.querySelector(".vibebp_myprofile").classList.add("popup_active"),function(){document.querySelector(".vibebp_myprofile.popup_active")&&document.querySelector(".vibebp_myprofile").classList.remove("popup_active")}}),[]),u((function(){fetch("".concat(window.vibebp.api.url,"/user/fetch_media?").concat(O.search_terms.length?"nocache":encodeURIComponent(JSON.stringify(Ce(Ce({},O),{},{search_terms:""})))),{method:"post",body:JSON.stringify(Ce(Ce({},O),{},{token:ze("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status)if(f){var t=Ae(i);e.data.map((function(e){t.push(e)})),o(t),b(!1),t.length<parseInt(data.total)?p(!0):p(!1)}else o(e.data),e.data.length<parseInt(e.total)?p(!0):p(!1)}))}),500,[O]);var C=function(){j(Ce({},O))};Re((function(){return document.addEventListener("vibebp_component_reload",C),function(){document.removeEventListener("vibebp_component_reload",C)}})),Re((function(){N.length&&setTimeout((function(){k("")}),5e3)}),[N]);var T=function(t){e.share(t)},D=function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("video",{class:"video_plyr"},wp.element.createElement("source",{src:e.url,type:"video/mp4"}));case"audio":return wp.element.createElement("audio",{class:"audio_plyr"},wp.element.createElement("source",{src:e.url,type:"audio/mp3"}));case"document":return wp.element.createElement("span",{class:"modal_document"},e.name)}};return wp.element.createElement("div",{className:"vibe_editor_modal"},wp.element.createElement("span",{onClick:function(t){e.close(!1)}}),wp.element.createElement("div",{className:"ve_modal-content"},wp.element.createElement("div",{className:"ve_modal-header"},wp.element.createElement("div",null,window.vibebp.settings.media_tabs?Object.keys(window.vibebp.settings.media_tabs).map((function(t){if("upload"!=t||!window.vibebp.settings.hasOwnProperty("upload_capability")||!window.vibebp.settings.upload_capability)return wp.element.createElement("a",{className:h==t?"active":"",onClick:function(){_(t)}},window.vibebp.settings.media_tabs[t]);var n=ze("vibebp").getUser();if(void 0!==n&&n.hasOwnProperty("caps")&&void 0!==n.caps){var r=0;if(Array.isArray(n.caps)?n.caps.findIndex((function(e,t){return e==window.vibebp.settings.upload_capability}))>-1&&(r=1):"object"===xe(n.caps)&&Object.keys(n.caps).map((function(e,t){e===window.vibebp.settings.upload_capability&&n.caps[e]&&(r=1)})),e.hasOwnProperty("allow_upload")&&e.allow_upload&&(r=1),r)return wp.element.createElement("a",{className:h==t?"active":"",onClick:function(){_(t)}},window.vibebp.settings.media_tabs[t])}})):""),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(t){e.close(!1)}})),wp.element.createElement("div",{className:"ve_modal-body"},"media"==h?wp.element.createElement(Fe,null,wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,onChange:function(e){return j(Ce(Ce({},O),{},{search_terms:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("select",{onChange:function(e){j(Ce(Ce({},O),{},{order:e.target.value}))}},Object.keys(window.vibeEditor.media_order).map((function(e){return wp.element.createElement("option",{value:e},window.vibeEditor.media_order[e])}))))),n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i&&i.length?wp.element.createElement("div",{className:"allMedia"},i.map((function(t,n){return wp.element.createElement("div",{className:"single_media"},wp.element.createElement("span",{onClick:function(n){T(t),e.hasOwnProperty("autoclose")||e.close(!1)}},D(t)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){return function(e){var t=Ae(i);t.splice(t.findIndex((function(t){return t.id==e.id})),1),o(t),fetch("".concat(window.vibebp.api.url,"/user/delete_media"),{method:"post",body:JSON.stringify({token:ze("vibebp").getToken(),media:e})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&qe("vibebp").addNotification({text:e.message})}))}(t)}}))}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_media),m?wp.element.createElement("a",{className:"link",onClick:function(){j(Ce(Ce({},O),{},{paged:O.paged+1})),b(!0)}},window.vibebp.translations.more):""):"upload"===h?wp.element.createElement(Fe,null,wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media"},window.vibebp.translations.upload_media,w?wp.element.createElement("div",{className:"vibebp_progress_wrapper"},wp.element.createElement("span",{className:"progress_wrapper"},wp.element.createElement("span",{className:"progress_bar",style:{width:w+"%"}})),wp.element.createElement("span",null,w,"%")):wp.element.createElement("span",{className:"vicon vicon-plus"})),wp.element.createElement("input",{type:"file",id:"vibe_editor_upload_media",onChange:function(t){return function(t){var n=e.post_mime_type,r=e.allowed_file_size;if(void 0===r&&(r=window.vibebp.settings.upload_limit),void 0===n||!Array.isArray(n)){var a=n;(n=[]).push(a)}if(t.target.files[0]){var l=t.target.files[0].size/1024/1024;if(n.indexOf(t.target.files[0].type)<=-1)return k(window.vibebp.translations.allowed_file_types+" "+n.join(",")),!1;if(r<l)return k(window.vibebp.translations.file_size_error+" "+r+"Mb"),!1;if(tus.isSupported&&tus.canStoreURLs&&l>4){var c="".concat(window.vibebp.api.url,"/user/upload_media_stream?upload"),s=new tus.Upload(t.target.files[0],{endpoint:c,chunkSize:2097152,retryDelays:[0,3e3],metadata:{token:ze("vibebp").getToken(),filename:t.target.files[0].name,filetype:t.target.files[0].type},onError:function(e){e.hasOwnProperty("message")&&qe("vibebp").addNotification({text:e.message})},onProgress:function(t,n){var r=(t/n*100).toFixed(2);y(r),100==r&&setTimeout((function(){var t={posts_per_page:20,paged:1,search_terms:"",orderby:""};e.hasOwnProperty("post_mime_type")&&void 0!==e.post_mime_type&&(t.post_mime_type=e.post_mime_type),j(t),y(0),_("media")}),500)},onSuccess:function(){localStorage.removeItem(s._urlStorageKey),s.url=s.url.replace("?upload",""),fetch("".concat(s.url,"/complete_stream?nocache"),{method:"post",body:JSON.stringify({token:ze("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(t.status){e.hasOwnProperty("post_mime_type")&&void 0!==e.post_mime_type&&e.post_mime_type,y(0),_("media")}t.hasOwnProperty("message")&&qe("vibebp").addNotification({text:t.message})}))}});s.findPreviousUploads().then((function(e){e.length>0&&s.resumeFromPreviousUpload(e[0]),s.start()})),tus.Upload.terminate(c).then((function(){})).catch((function(e){}))}else{var u=new FormData;u.append("file",t.target.files[0]),u.append("body",JSON.stringify({token:ze("vibebp").getToken()})),fetch("".concat(window.vibebp.api.url,"/user/upload_media"),{method:"post",body:u}).then((function(e){return e.json()})).then((function(e){if(e.status){var t=Ae(i);t.unshift(e.data),o(t),_("media")}else e.hasOwnPropoerty("message")&&qe("vibebp").addNotification({text:e.message})}))}}}(t)}}),c&&c.length?wp.element.createElement("div",{className:"uploaded"},wp.element.createElement("strong",null,window.vibebp.translations.uploaded_media),wp.element.createElement("div",{className:"uploaded_files"},c.map((function(e,t){return wp.element.createElement("div",{className:"single_media",onClick:function(t){T(e)}},D(e))})))):""),N&&N.length?wp.element.createElement("div",{className:"vbp_message vbp_error"},N):""):"embed"===h?wp.element.createElement(Fe,null,wp.element.createElement("div",{className:"embed_media"},wp.element.createElement("label",{for:"vibe_editor_embed_name"}," ",window.vibebp.translations.enter_emabed_name," "),wp.element.createElement("input",{type:"text",id:"vibe_editor_embed_name",onChange:function(e){return I(Ce(Ce({},A),{},{name:e.target.value}))}}),wp.element.createElement("label",{for:"vibe_editor_embed_url"}," ",window.vibebp.translations.enter_embed_url," "),wp.element.createElement("input",{type:"text",id:"vibe_editor_embed_url",onChange:function(e){return I(Ce(Ce({},A),{},{url:e.target.value}))}}),wp.element.createElement("select",{onChange:function(e){return I(Ce(Ce({},A),{},{type:e.target.value}))},value:A.type},e.hasOwnProperty("embed_options")?e.embed_options.map((function(e){return wp.element.createElement("option",{value:e},e.charAt(0).toUpperCase()+e.slice(1))})):Object.keys(window.vibeEditor.embed_types).map((function(t){if(e.hasOwnProperty("post_mime_type")&&void 0!==e.post_mime_type)if(Array.isArray(e.post_mime_type)){if(e.post_mime_type.indexOf(t)<0)return}else if(e.post_mime_type.split(",").indexOf(t)<0)return;return wp.element.createElement("option",{value:t},window.vibeEditor.embed_types[t])}))),Object.values(A).findIndex((function(e){return""==e||null==e}))>-1?"":wp.element.createElement("button",{className:"button is-primary",onClick:function(){T(A),e.close(!1)}},window.vibebp.translations.embed))):wp.element.createElement("div",{className:h}))))};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=wp.element,Xe=(Ke.createElement,Ke.render,Ke.useState),Ye=Ke.useEffect,Qe=Ke.Fragment,et=(Ke.useContext,Ke.useRef),tt=wp.data,nt=tt.dispatch,rt=tt.select,at=function(e){var t=et(null),n=Ge(Xe(!1),2),r=(n[0],n[1],Ge(Xe({}),2)),a=r[0],i=r[1],o=Ge(Xe(!1),2),l=(o[0],o[1],Ge(Xe(0),2)),c=(l[0],l[1],Ge(Xe(""),2)),s=c[0],u=c[1],m=Ge(Xe(!1),2),p=m[0],d=m[1],f=Ge(Xe([]),2),b=f[0],v=f[1],w=Ge(Xe(null),2),y=w[0],g=w[1];Ye((function(){s.length&&setTimeout((function(){u("")}),5e3)}),[s]),Ye((function(){e.field.hasOwnProperty("value")&&void 0!==e.field.value&&e.field.value.hasOwnProperty("url")&&i(e.field.value);var t=[];e.field.all_upload_types&&Array.isArray(e.field.upload_types)&&e.field.upload_types.length&&e.field.upload_types.map((function(n){e.field.all_upload_types.hasOwnProperty(n)&&e.field.all_upload_types[n].length&&e.field.all_upload_types[n].map((function(e){t.push(e)}))})),t.push("video"),v(t)}),[e.field]),Ye((function(){if(a&&a.hasOwnProperty("type")&&t.current){if("video"==a.type){var e=new Plyr(t.current);g(e)}if("youtube"==a.type){var n=new Plyr(t.current);g(n)}if("vimeo"==a.type){var r=new Plyr(t.current);g(r)}}}),[a]);var h=function(t){void 0===t&&(t=a),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify(We({field_id:e.field.id,type:e.field.type,value:t,token:rt("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){nt("vibebp").addNotification({text:e.message})}))},_=function(e){var t=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&|?]+)/);return!(!t||!t.length)&&t[1]};return wp.element.createElement("div",{className:"video_field"},a&&a.hasOwnProperty("url")?wp.element.createElement("div",null,wp.element.createElement("div",{className:"single_media"},wp.element.createElement("div",null,wp.element.createElement("span",{className:"remove vicon vicon-close",onClick:function(){y&&(y.destroy(),g(null)),h(null),i({})}}),wp.element.createElement("div",null,"  ",wp.element.createElement("div",null," ",function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{ref:t,class:"video_plyr"},wp.element.createElement("source",{src:e.url,type:"video/mp4"})));case"youtube":var n=_(a.url);return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("div",{ref:t,"data-plyr-provider":"youtube","data-plyr-embed-id":n}));case"vimeo":var r=e.url.match(/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/);return wp.element.createElement("div",{className:"video_wrapper"}," ",wp.element.createElement("div",{ref:t,"data-plyr-provider":"vimeo","data-plyr-embed-id":r[4]}));case"audio":return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("audio",{class:"audio_plyr",controls:!0},wp.element.createElement("source",{src:e.url,type:"audio/mp3"})));default:if(void 0!==e.url&&e.type)return e.url.split(".pdf").length>1?wp.element.createElement("div",{className:"embed_block_wrapper"},wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,type:"application/pdf",src:e.url}),wp.element.createElement("div",{className:"embed_block"})):wp.element.createElement("div",{className:"embed_block_wrapper"},wp.element.createElement("a",{href:e.url},wp.element.createElement("span",{className:"vicon vicon-clip"})))}}(a)))," "))):wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media_wrap",style:{border:"1px dotted var(--darkborder)",padding:"1rem"},onClick:function(){d(!0)}},wp.element.createElement("span",{className:"vicon vicon-plus"})),wp.element.createElement("div",{className:"file_restrictions_info"},wp.element.createElement("div",{className:"allowed_file_types"},e.field.hasOwnProperty("upload_types")&&e.field.upload_types.length?wp.element.createElement(Qe,null,wp.element.createElement("span",null,window.vibebp.translations.allowed_file_types),wp.element.createElement("div",null,e.field.upload_types.map((function(e){return wp.element.createElement("span",null,e)})))):""),wp.element.createElement("div",{className:"allowed_file_size"},e.field.hasOwnProperty("upload_size")&&e.field.upload_size?wp.element.createElement(Qe,null,wp.element.createElement("span",null,window.vibebp.translations.max_size),wp.element.createElement("span",null,e.field.upload_size+" MB")):"")),s&&s.length?wp.element.createElement("div",{className:"vbp_message vbp_error"},s):"",p?wp.element.createElement($e,{post_mime_type:b,allowed_file_size:e.field.upload_size,close:function(){d(!1)},share:function(e){if(e.hasOwnProperty("type")&&["youtube","vimeo"].includes(e.type))if("youtube"==e.type){if(!_(e.url))return u(window.vibebp.translations.invalid_url),!1}else if("vimeo"==e.type){if(!e.url.match(/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/))return u(window.vibebp.translations.invalid_url),!1}i(e),h(e)},embed_options:["video","youtube","vimeo"]}):""))};function it(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ut(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){if(e){if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(e,t):void 0}}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pt=wp.element,dt=(pt.createElement,pt.render,pt.useState),ft=pt.useEffect,bt=pt.Fragment,vt=(pt.useContext,pt.useRef),wt=wp.data,yt=wt.dispatch,gt=wt.select,ht=function(e){var t=vt(null),n=st(dt(!1),2),r=(n[0],n[1],st(dt([]),2)),a=r[0],i=r[1],o=st(dt(!1),2),l=(o[0],o[1],st(dt(0),2)),c=(l[0],l[1],st(dt(""),2)),s=c[0],u=c[1],p=st(dt(!1),2),d=p[0],f=p[1],b=st(dt([]),2),v=b[0],w=b[1],y=st(dt(null),2),g=y[0],h=y[1];ft((function(){s.length&&setTimeout((function(){u("")}),5e3)}),[s]),ft((function(){e.field.hasOwnProperty("value")&&void 0!==e.field.value&&e.field.value.length&&(m(e.field.value)?i(JSON.parse(e.field.value)):i(e.field.value));var t=[];e.field.all_upload_types&&Array.isArray(e.field.upload_types)&&e.field.upload_types.length&&e.field.upload_types.map((function(n){e.field.all_upload_types.hasOwnProperty(n)&&e.field.all_upload_types[n].length&&e.field.all_upload_types[n].map((function(e){t.push(e)}))})),t.push("image"),w(t)}),[e.field]);var _=function(t){if(void 0===t&&(t=a),e.hasOwnProperty("registration")&&e.registration)e.update(field);else{g&&g.abort();var n={},r=new AbortController;g&&(n={signal:r.signal}),h(r),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),lt(lt({method:"post"},n),{},{body:JSON.stringify(lt({field_id:e.field.id,type:e.field.type,value:t,token:gt("vibebp").getToken()},e))})).then((function(e){return e.json()})).then((function(e){h(null),f(!1),yt("vibebp").addNotification({text:e.message})}))}};return wp.element.createElement("div",{className:"gallery_field"},wp.element.createElement("div",{className:"upload_media"},a&&a.length?wp.element.createElement("div",{className:"media_gallery"},a.map((function(e,n){return wp.element.createElement("div",null,wp.element.createElement("div",{className:"single_media"},wp.element.createElement("div",null,wp.element.createElement("span",{className:"remove vicon vicon-close",onClick:function(){var e=it(a);e.splice(n,1),_(e),i(e)}}),wp.element.createElement("div",null,"  ",wp.element.createElement("div",null," ",function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{ref:t,class:"video_plyr"},wp.element.createElement("source",{src:e.url,type:"video/mp4"})));default:if(void 0!==e.url&&e.type)return e.url.split(".pdf").length>1?wp.element.createElement("div",{className:"embed_block_wrapper"},wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,type:"application/pdf",src:e.url}),wp.element.createElement("div",{className:"embed_block"})):wp.element.createElement("div",{className:"embed_block_wrapper"},wp.element.createElement("a",{href:e.url},wp.element.createElement("span",{className:"vicon vicon-clip"})))}}(e)))," ")))}))):"",wp.element.createElement("label",{for:"vibe_editor_upload_media_wrap",onClick:function(){f(!0)}},wp.element.createElement("span",{className:"vicon vicon-plus"})),wp.element.createElement("div",{className:"file_restrictions_info"},wp.element.createElement("div",{className:"allowed_file_types"},e.field.hasOwnProperty("upload_types")&&e.field.upload_types.length?wp.element.createElement(bt,null,wp.element.createElement("strong",null,window.vibebp.translations.allowed_file_types),wp.element.createElement("div",null,e.field.upload_types.map((function(e){return wp.element.createElement("span",null,e)})))):""),wp.element.createElement("div",{className:"allowed_file_size"},e.field.hasOwnProperty("upload_size")&&e.field.upload_size?wp.element.createElement(bt,null,wp.element.createElement("strong",null,window.vibebp.translations.max_size),wp.element.createElement("span",null,e.field.upload_size+" MB")):"")),s&&s.length?wp.element.createElement("div",{className:"vbp_message vbp_error"},s):"",d?wp.element.createElement($e,{post_mime_type:v,autoclose:"1",allowed_file_size:e.field.upload_size,close:function(){f(!1)},share:function(e){if(e.hasOwnProperty("type")&&e.hasOwnProperty("url")){var t=it(a);t.push(e),i(t),_(t)}},embed_options:["video","youtube","vimeo"]}):""))};function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ot=wp.element,jt=(Ot.createElement,Ot.useState),St=Ot.useEffect,Nt=(Ot.Fragment,Ot.render,Ot.useRef,wp.data),kt=(Nt.dispatch,Nt.select,function(e){var t=_t(jt(e.value),2),n=t[0],r=t[1],a=_t(jt({}),2),i=a[0],o=a[1];return St((function(){var t=100,r=0;e.hasOwnProperty("max")&&(t=e.max),e.hasOwnProperty("min")&&(r=e.min);var a=Math.round(100*n/(t-r));o({background:"linear-gradient(to right, var(--primary), var(--primary) "+a+"%, var(--light) "+a+"%, var(--light) 100%)"})}),[]),wp.element.createElement("div",{class:"range"},wp.element.createElement("div",{class:"form-group range__slider"},wp.element.createElement("input",{type:"range",style:i,step:e.hasOwnProperty("step")?e.step:"",min:e.hasOwnProperty("min")?e.min:0,max:e.hasOwnProperty("max")?e.max:100,value:n,onChange:function(t){r(t.target.value);var n=100,a=0;e.hasOwnProperty("max")&&(n=e.max),e.hasOwnProperty("min")&&(a=e.min);var i=Math.round(100*t.target.value/(n-a));console.log(i),o({background:"linear-gradient(to right, var(--primary), var(--primary) "+i+"%, var(--light) "+i+"%, var(--light) 100%)"}),e.change(t.target.value)}})),wp.element.createElement("div",{class:"form-group range__value"},e.hasOwnProperty("valueLabel")?wp.element.createElement("label",null,e.valueLabel):"",wp.element.createElement("span",null,n)))});function Pt(e){return function(e){if(Array.isArray(e))return Dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mt=wp.element,Lt=(Mt.createElement,Mt.render,Mt.Fragment,Mt.useState),Jt=Mt.useEffect,Ut=wp.data,Rt=Ut.dispatch,Ft=Ut.select;function Ht(e){var t=Ct(Lt(e.field),2),n=t[0],r=t[1],a=Ct(Lt(),2),i=a[0],o=a[1],l=Ct(Lt(!1),2),c=l[0],s=l[1],m=Ct(Lt(null),2),p=m[0],d=m[1];Jt((function(){s(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/options?field_id=").concat(n.id).concat(e.registration?"&client_id="+window.vibebp.settings.client_id:""),{method:"post",body:JSON.stringify(At({field_id:n.id,type:n.type,token:Ft("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){s(!1),e.status&&o(e.values)})).catch((function(e){s(!1),console.log({error:e})}))}),[]);u((function(){n.value&&i&&function(){if(e.hasOwnProperty("registration")&&e.registration)e.update(n);else{p&&p.abort();var t=new AbortController,r=p?{signal:t.signal}:{};d(t),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),At(At({method:"post"},r),{},{body:JSON.stringify(At({field_id:n.id,type:n.type,value:n.value,token:Ft("vibebp").getToken()},e))})).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&Rt("vibebp").addNotification({text:e.message})})).catch((function(e){console.log({error:e})}))}}()}),500,[n.value]);return wp.element.createElement("div",{className:"frontend_profile_field"},c?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",wp.element.createElement("div",{className:"_profile_field_body"},i?wp.element.createElement("div",{className:"vibebpProfile_table_wrapper"},wp.element.createElement("table",{className:"vibebpProfile_table"},i.hasOwnProperty("columns")&&i.columns&&i.columns.length&&i.hasOwnProperty("rows")&&i.rows&&i.rows.length?function(){for(var e=[],t=function(t){e.push(wp.element.createElement("tr",null,function(){for(var e=[],a=0;a<=i.columns.length;a++)if(0===a)if(0===t)e.push(wp.element.createElement("th",null));else{var o=i.rows[t-1];e.push(wp.element.createElement("th",{className:"removable_item"},wp.element.createElement("span",null,o.name)))}else if(0===t){var l=i.columns[a-1];e.push(wp.element.createElement("th",{className:"removable_item"},wp.element.createElement("span",null,l.name)))}else!function(){var o={row:i.rows[t-1].id,column:i.columns[a-1].id},l=At(At({},o),{},{type:"text",value:""});if(i.values){var c=i.values.findIndex((function(e){return e.row===o.row&&e.column===o.column}));c>-1&&i.values[c].row&&i.values[c].column&&(l=i.values[c])}var s=[];if(n.value&&Array.isArray(n.value)&&n.value.length){var u=n.value.find((function(e){return e.row===o.row&&e.column===o.column}));u&&(s=u.value)}e.push(wp.element.createElement("td",null,wp.element.createElement("div",null,wp.element.createElement(qt,{field:At(At({},l),{},{value:s}),change:function(e){r((function(t){var n=At({},t);n.hasOwnProperty("value")&&Array.isArray(n.value)?n.value=Pt(t.value):n.value=[];var r=At(At({},o),{},{value:e}),a=n.value.findIndex((function(e){return e.row===o.row&&e.column===o.column}));return a>-1?n.value.splice(a,1,At({},r)):n.value.push(At({},r)),n}))}}))))}();return e}()))},a=0;a<=i.rows.length;a++)t(a);return e}():"")):""))}function qt(e){var t=Ct(Lt({}),2),n=t[0],r=t[1],a=Ct(Lt(!0),2),i=a[0],o=(a[1],function(t){return e.change(t)});return Jt((function(){r(e.field&&e.field.row&&e.field.column?At({},e.field):At(At({},e.ids),{},{type:"text",value:""}))}),[e.field]),wp.element.createElement("div",{className:"profile_field_fields_element"},i?wp.element.createElement("div",{className:"field_settings"},"text"===n.type||"number"===n.type?wp.element.createElement("input",{type:"string"==typeof n.value||"number"==typeof n.value?n.value:"",value:n.value,onChange:function(e){return o(e.target.value)}}):"option"===n.type?wp.element.createElement("div",null,n.options&&n.options.length?wp.element.createElement("select",{onChange:function(e){return o(e.target.value)},value:n.value},n.options.map((function(e){return wp.element.createElement("option",{field:e.field},e.lable)}))):""):"range"===n.type||"points"===n.type?wp.element.createElement(kt,{value:n.value,min:"0",max:"100",change:function(e){return o(e)}}):"checkbox"===n.type?wp.element.createElement("div",null,n.options&&n.options.length?n.options.map((function(e,t){var a=At({},n);return a.value&&Array.isArray(a.value)||(a.value=[]),wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",id:"custom-checkbox-".concat(t),value:t,checked:a.value.indexOf(t)>-1,onChange:function(){var e=At({},n);e.value&&Array.isArray(e.value)||(e.value=[]);var a=Pt(e.value);a.indexOf(t)>-1?a.splice(a.indexOf(t),1):a.push(t),r(At(At({},e),{},{value:a})),o(a)}}),wp.element.createElement("label",{htmlFor:"custom-checkbox-".concat(t)},e.lable))})):""):""):"")}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gt=wp.element,Zt=(Gt.createElement,Gt.render,Gt.useState),Kt=Gt.useEffect,Xt=(Gt.Fragment,Gt.useContext,Gt.useRef,wp.data),Yt=(Xt.dispatch,Xt.select,[{name:"Afghanistan",dial_code:"93",code:"AF"},{name:"Aland Islands",dial_code:"358",code:"AX"},{name:"Albania",dial_code:"355",code:"AL"},{name:"Algeria",dial_code:"213",code:"DZ"},{name:"AmericanSamoa",dial_code:"1684",code:"AS"},{name:"Andorra",dial_code:"376",code:"AD"},{name:"Angola",dial_code:"244",code:"AO"},{name:"Anguilla",dial_code:"1264",code:"AI"},{name:"Antarctica",dial_code:"672",code:"AQ"},{name:"Antigua and Barbuda",dial_code:"1268",code:"AG"},{name:"Argentina",dial_code:"54",code:"AR"},{name:"Armenia",dial_code:"374",code:"AM"},{name:"Aruba",dial_code:"297",code:"AW"},{name:"Australia",dial_code:"61",code:"AU"},{name:"Austria",dial_code:"43",code:"AT"},{name:"Azerbaijan",dial_code:"994",code:"AZ"},{name:"Bahamas",dial_code:"1242",code:"BS"},{name:"Bahrain",dial_code:"973",code:"BH"},{name:"Bangladesh",dial_code:"880",code:"BD"},{name:"Barbados",dial_code:"1246",code:"BB"},{name:"Belarus",dial_code:"375",code:"BY"},{name:"Belgium",dial_code:"32",code:"BE"},{name:"Belize",dial_code:"501",code:"BZ"},{name:"Benin",dial_code:"229",code:"BJ"},{name:"Bermuda",dial_code:"1441",code:"BM"},{name:"Bhutan",dial_code:"975",code:"BT"},{name:"Bolivia, Plurinational State of",dial_code:"591",code:"BO"},{name:"Bosnia and Herzegovina",dial_code:"387",code:"BA"},{name:"Botswana",dial_code:"267",code:"BW"},{name:"Brazil",dial_code:"55",code:"BR"},{name:"British Indian Ocean Territory",dial_code:"246",code:"IO"},{name:"Brunei Darussalam",dial_code:"673",code:"BN"},{name:"Bulgaria",dial_code:"359",code:"BG"},{name:"Burkina Faso",dial_code:"226",code:"BF"},{name:"Burundi",dial_code:"257",code:"BI"},{name:"Cambodia",dial_code:"855",code:"KH"},{name:"Cameroon",dial_code:"237",code:"CM"},{name:"Canada",dial_code:"1",code:"CA"},{name:"Cape Verde",dial_code:"238",code:"CV"},{name:"Cayman Islands",dial_code:" 345",code:"KY"},{name:"Central African Republic",dial_code:"236",code:"CF"},{name:"Chad",dial_code:"235",code:"TD"},{name:"Chile",dial_code:"56",code:"CL"},{name:"China",dial_code:"86",code:"CN"},{name:"Christmas Island",dial_code:"61",code:"CX"},{name:"Cocos (Keeling) Islands",dial_code:"61",code:"CC"},{name:"Colombia",dial_code:"57",code:"CO"},{name:"Comoros",dial_code:"269",code:"KM"},{name:"Congo",dial_code:"242",code:"CG"},{name:"Congo, The Democratic Republic of the Congo",dial_code:"243",code:"CD"},{name:"Cook Islands",dial_code:"682",code:"CK"},{name:"Costa Rica",dial_code:"506",code:"CR"},{name:"Cote d'Ivoire",dial_code:"225",code:"CI"},{name:"Croatia",dial_code:"385",code:"HR"},{name:"Cuba",dial_code:"53",code:"CU"},{name:"Cyprus",dial_code:"357",code:"CY"},{name:"Czech Republic",dial_code:"420",code:"CZ"},{name:"Denmark",dial_code:"45",code:"DK"},{name:"Djibouti",dial_code:"253",code:"DJ"},{name:"Dominica",dial_code:"1767",code:"DM"},{name:"Dominican Republic",dial_code:"1849",code:"DO"},{name:"Ecuador",dial_code:"593",code:"EC"},{name:"Egypt",dial_code:"20",code:"EG"},{name:"El Salvador",dial_code:"503",code:"SV"},{name:"Equatorial Guinea",dial_code:"240",code:"GQ"},{name:"Eritrea",dial_code:"291",code:"ER"},{name:"Estonia",dial_code:"372",code:"EE"},{name:"Ethiopia",dial_code:"251",code:"ET"},{name:"Falkland Islands (Malvinas)",dial_code:"500",code:"FK"},{name:"Faroe Islands",dial_code:"298",code:"FO"},{name:"Fiji",dial_code:"679",code:"FJ"},{name:"Finland",dial_code:"358",code:"FI"},{name:"France",dial_code:"33",code:"FR"},{name:"French Guiana",dial_code:"594",code:"GF"},{name:"French Polynesia",dial_code:"689",code:"PF"},{name:"Gabon",dial_code:"241",code:"GA"},{name:"Gambia",dial_code:"220",code:"GM"},{name:"Georgia",dial_code:"995",code:"GE"},{name:"Germany",dial_code:"49",code:"DE"},{name:"Ghana",dial_code:"233",code:"GH"},{name:"Gibraltar",dial_code:"350",code:"GI"},{name:"Greece",dial_code:"30",code:"GR"},{name:"Greenland",dial_code:"299",code:"GL"},{name:"Grenada",dial_code:"1473",code:"GD"},{name:"Guadeloupe",dial_code:"590",code:"GP"},{name:"Guam",dial_code:"1671",code:"GU"},{name:"Guatemala",dial_code:"502",code:"GT"},{name:"Guernsey",dial_code:"44",code:"GG"},{name:"Guinea",dial_code:"224",code:"GN"},{name:"Guinea-Bissau",dial_code:"245",code:"GW"},{name:"Guyana",dial_code:"595",code:"GY"},{name:"Haiti",dial_code:"509",code:"HT"},{name:"Holy See (Vatican City State)",dial_code:"379",code:"VA"},{name:"Honduras",dial_code:"504",code:"HN"},{name:"Hong Kong",dial_code:"852",code:"HK"},{name:"Hungary",dial_code:"36",code:"HU"},{name:"Iceland",dial_code:"354",code:"IS"},{name:"India",dial_code:"91",code:"IN"},{name:"Indonesia",dial_code:"62",code:"ID"},{name:"Iran, Islamic Republic of Persian Gulf",dial_code:"98",code:"IR"},{name:"Iraq",dial_code:"964",code:"IQ"},{name:"Ireland",dial_code:"353",code:"IE"},{name:"Isle of Man",dial_code:"44",code:"IM"},{name:"Israel",dial_code:"972",code:"IL"},{name:"Italy",dial_code:"39",code:"IT"},{name:"Jamaica",dial_code:"1876",code:"JM"},{name:"Japan",dial_code:"81",code:"JP"},{name:"Jersey",dial_code:"44",code:"JE"},{name:"Jordan",dial_code:"962",code:"JO"},{name:"Kazakhstan",dial_code:"77",code:"KZ"},{name:"Kenya",dial_code:"254",code:"KE"},{name:"Kiribati",dial_code:"686",code:"KI"},{name:"Korea, Democratic People's Republic of Korea",dial_code:"850",code:"KP"},{name:"Korea, Republic of South Korea",dial_code:"82",code:"KR"},{name:"Kuwait",dial_code:"965",code:"KW"},{name:"Kyrgyzstan",dial_code:"996",code:"KG"},{name:"Laos",dial_code:"856",code:"LA"},{name:"Latvia",dial_code:"371",code:"LV"},{name:"Lebanon",dial_code:"961",code:"LB"},{name:"Lesotho",dial_code:"266",code:"LS"},{name:"Liberia",dial_code:"231",code:"LR"},{name:"Libyan Arab Jamahiriya",dial_code:"218",code:"LY"},{name:"Liechtenstein",dial_code:"423",code:"LI"},{name:"Lithuania",dial_code:"370",code:"LT"},{name:"Luxembourg",dial_code:"352",code:"LU"},{name:"Macao",dial_code:"853",code:"MO"},{name:"Macedonia",dial_code:"389",code:"MK"},{name:"Madagascar",dial_code:"261",code:"MG"},{name:"Malawi",dial_code:"265",code:"MW"},{name:"Malaysia",dial_code:"60",code:"MY"},{name:"Maldives",dial_code:"960",code:"MV"},{name:"Mali",dial_code:"223",code:"ML"},{name:"Malta",dial_code:"356",code:"MT"},{name:"Marshall Islands",dial_code:"692",code:"MH"},{name:"Martinique",dial_code:"596",code:"MQ"},{name:"Mauritania",dial_code:"222",code:"MR"},{name:"Mauritius",dial_code:"230",code:"MU"},{name:"Mayotte",dial_code:"262",code:"YT"},{name:"Mexico",dial_code:"52",code:"MX"},{name:"Micronesia, Federated States of Micronesia",dial_code:"691",code:"FM"},{name:"Moldova",dial_code:"373",code:"MD"},{name:"Monaco",dial_code:"377",code:"MC"},{name:"Mongolia",dial_code:"976",code:"MN"},{name:"Montenegro",dial_code:"382",code:"ME"},{name:"Montserrat",dial_code:"1664",code:"MS"},{name:"Morocco",dial_code:"212",code:"MA"},{name:"Mozambique",dial_code:"258",code:"MZ"},{name:"Myanmar",dial_code:"95",code:"MM"},{name:"Namibia",dial_code:"264",code:"NA"},{name:"Nauru",dial_code:"674",code:"NR"},{name:"Nepal",dial_code:"977",code:"NP"},{name:"Netherlands",dial_code:"31",code:"NL"},{name:"Netherlands Antilles",dial_code:"599",code:"AN"},{name:"New Caledonia",dial_code:"687",code:"NC"},{name:"New Zealand",dial_code:"64",code:"NZ"},{name:"Nicaragua",dial_code:"505",code:"NI"},{name:"Niger",dial_code:"227",code:"NE"},{name:"Nigeria",dial_code:"234",code:"NG"},{name:"Niue",dial_code:"683",code:"NU"},{name:"Norfolk Island",dial_code:"672",code:"NF"},{name:"Northern Mariana Islands",dial_code:"1670",code:"MP"},{name:"Norway",dial_code:"47",code:"NO"},{name:"Oman",dial_code:"968",code:"OM"},{name:"Pakistan",dial_code:"92",code:"PK"},{name:"Palau",dial_code:"680",code:"PW"},{name:"Palestinian Territory, Occupied",dial_code:"970",code:"PS"},{name:"Panama",dial_code:"507",code:"PA"},{name:"Papua New Guinea",dial_code:"675",code:"PG"},{name:"Paraguay",dial_code:"595",code:"PY"},{name:"Peru",dial_code:"51",code:"PE"},{name:"Philippines",dial_code:"63",code:"PH"},{name:"Pitcairn",dial_code:"872",code:"PN"},{name:"Poland",dial_code:"48",code:"PL"},{name:"Portugal",dial_code:"351",code:"PT"},{name:"Puerto Rico",dial_code:"1939",code:"PR"},{name:"Qatar",dial_code:"974",code:"QA"},{name:"Romania",dial_code:"40",code:"RO"},{name:"Russia",dial_code:"7",code:"RU"},{name:"Rwanda",dial_code:"250",code:"RW"},{name:"Reunion",dial_code:"262",code:"RE"},{name:"Saint Barthelemy",dial_code:"590",code:"BL"},{name:"Saint Helena, Ascension and Tristan Da Cunha",dial_code:"290",code:"SH"},{name:"Saint Kitts and Nevis",dial_code:"1869",code:"KN"},{name:"Saint Lucia",dial_code:"1758",code:"LC"},{name:"Saint Martin",dial_code:"590",code:"MF"},{name:"Saint Pierre and Miquelon",dial_code:"508",code:"PM"},{name:"Saint Vincent and the Grenadines",dial_code:"1784",code:"VC"},{name:"Samoa",dial_code:"685",code:"WS"},{name:"San Marino",dial_code:"378",code:"SM"},{name:"Sao Tome and Principe",dial_code:"239",code:"ST"},{name:"Saudi Arabia",dial_code:"966",code:"SA"},{name:"Senegal",dial_code:"221",code:"SN"},{name:"Serbia",dial_code:"381",code:"RS"},{name:"Seychelles",dial_code:"248",code:"SC"},{name:"Sierra Leone",dial_code:"232",code:"SL"},{name:"Singapore",dial_code:"65",code:"SG"},{name:"Slovakia",dial_code:"421",code:"SK"},{name:"Slovenia",dial_code:"386",code:"SI"},{name:"Solomon Islands",dial_code:"677",code:"SB"},{name:"Somalia",dial_code:"252",code:"SO"},{name:"South Africa",dial_code:"27",code:"ZA"},{name:"South Sudan",dial_code:"211",code:"SS"},{name:"South Georgia and the South Sandwich Islands",dial_code:"500",code:"GS"},{name:"Spain",dial_code:"34",code:"ES"},{name:"Sri Lanka",dial_code:"94",code:"LK"},{name:"Sudan",dial_code:"249",code:"SD"},{name:"Suriname",dial_code:"597",code:"SR"},{name:"Svalbard and Jan Mayen",dial_code:"47",code:"SJ"},{name:"Swaziland",dial_code:"268",code:"SZ"},{name:"Sweden",dial_code:"46",code:"SE"},{name:"Switzerland",dial_code:"41",code:"CH"},{name:"Syrian Arab Republic",dial_code:"963",code:"SY"},{name:"Taiwan",dial_code:"886",code:"TW"},{name:"Tajikistan",dial_code:"992",code:"TJ"},{name:"Tanzania, United Republic of Tanzania",dial_code:"255",code:"TZ"},{name:"Thailand",dial_code:"66",code:"TH"},{name:"Timor-Leste",dial_code:"670",code:"TL"},{name:"Togo",dial_code:"228",code:"TG"},{name:"Tokelau",dial_code:"690",code:"TK"},{name:"Tonga",dial_code:"676",code:"TO"},{name:"Trinidad and Tobago",dial_code:"1868",code:"TT"},{name:"Tunisia",dial_code:"216",code:"TN"},{name:"Turkey",dial_code:"90",code:"TR"},{name:"Turkmenistan",dial_code:"993",code:"TM"},{name:"Turks and Caicos Islands",dial_code:"1649",code:"TC"},{name:"Tuvalu",dial_code:"688",code:"TV"},{name:"Uganda",dial_code:"256",code:"UG"},{name:"Ukraine",dial_code:"380",code:"UA"},{name:"United Arab Emirates",dial_code:"971",code:"AE"},{name:"United Kingdom",dial_code:"44",code:"GB"},{name:"United States",dial_code:"1",code:"US"},{name:"Uruguay",dial_code:"598",code:"UY"},{name:"Uzbekistan",dial_code:"998",code:"UZ"},{name:"Vanuatu",dial_code:"678",code:"VU"},{name:"Venezuela, Bolivarian Republic of Venezuela",dial_code:"58",code:"VE"},{name:"Vietnam",dial_code:"84",code:"VN"},{name:"Virgin Islands, British",dial_code:"1284",code:"VG"},{name:"Virgin Islands, U.S.",dial_code:"1340",code:"VI"},{name:"Wallis and Futuna",dial_code:"681",code:"WF"},{name:"Yemen",dial_code:"967",code:"YE"},{name:"Zambia",dial_code:"260",code:"ZM"},{name:"Zimbabwe",dial_code:"263",code:"ZW"}]);Yt=Yt.sort((function(e,t){return parseInt(t.dial_code)>parseInt(e.dial_code)}));var Qt=function(e){var t=Wt(Zt(e.field),2),n=t[0],r=t[1];Kt((function(){r(e.field)}),[e.field]);return wp.element.createElement("span",null,function(e){if(!e)return e;var t=e.replace(/[^\d]/g,""),n=t.length;return n<4?""+t:n<7?"".concat(""," (").concat(t.slice(0,3),") ").concat(t.slice(3)):"".concat(""," (").concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,10))}(n.value),wp.element.createElement("input",{type:"number",value:n.value,onChange:function(e){r($t($t({},n),{},{value:e.target.value}))},onBlur:function(t){return e.update($t($t({},n),{},{value:t.target.value}))}}))};function en(){return(en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tn(e){return function(e){if(Array.isArray(e))return sn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||cn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){on(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||cn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){if(e){if("string"==typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sn(e,t):void 0}}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var un=wp.element,mn=(un.createElement,un.useState),pn=un.useEffect,dn=un.Fragment,fn=(un.render,un.useRef),bn=wp.data,vn=bn.dispatch,wn=bn.select,yn=!1,gn=function(e){var t=ln(mn(!1),2),n=t[0],r=t[1],a=ln(mn(!1),2),i=a[0],o=a[1],l=ln(mn({}),2),c=l[0],s=l[1],m=ln(mn(null),2),p=m[0],d=m[1],f=fn(null);pn((function(){}),[]),u((function(){var t;"checkbox"!=e.field.type&&"selectbox"!=e.field.type&&"radio"!=e.field.type&&"multiselect"!=e.field.type&&"multiselectbox"!=e.field.type||e.field.hasOwnProperty("options")&&e.field.options.length||((null===(t=c.options)||void 0===t?void 0:t.length)||fetch("".concat(window.vibebp.api.url,"/xprofile/field/options?field_id=").concat(e.field.id,"&client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"post",body:JSON.stringify(an({field_id:e.field.id,type:e.field.type,token:wn("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(t){t.status?(s(an(an({},e.field),{},{options:t.values})),e.update&&e.update(an(an({},e.field),{},{options:t.values}))):s(an(an({},e.field),{},{options:[]}))})));var n=new CustomEvent("field_loaded",{detail:{field:e.field}});document.dispatchEvent(n),s(e.field)}),500,[e.field]),pn((function(){return function(){f&&f.hasOwnProperty("current")&&f.current&&"undefined"!=typeof flatpickr&&f.current.flatpickr().destroy()}}),[e.field.id]);pn((function(){if(f&&f.hasOwnProperty("current")&&f.current&&"undefined"!=typeof flatpickr){var e={altInput:!0,dateFormat:"Y-m-d",defaultDate:c.hasOwnProperty("value")&&c.value.length?c.value:[],onChange:b};flatpickr(f.current,e)}}),[c]),pn((function(){if(e.hasOwnProperty("registration")&&e.registration)e.update(c);else if(n&&"checkbox"==c.type){yn&&yn.abort();var t={},a=new AbortController;yn&&(t={signal:a.signal}),yn=a,o(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),an(an({method:"post"},t),{},{body:JSON.stringify(an({field_id:c.id,type:c.type,value:c.value,token:wn("vibebp").getToken()},e))})).then((function(e){return e.json()})).then((function(t){o(!1),r(!1),document.dispatchEvent(new CustomEvent("xprofile_field_saved",{detail:{field_id:c.id}})),e.hasOwnProperty("update")&&e.update(c),t.hasOwnProperty("message")&&vn("vibebp").addNotification({icon:t.status?"vicon vicon-check-box":"vicon vicon-alert",text:t.message})}))}}),[c.value,n]),u((function(){if(e.hasOwnProperty("registration")&&e.registration)e.update(c);else if(n&&"checkbox"!=c.type){yn&&yn.abort();var t={},a=new AbortController;yn&&(t={signal:a.signal}),yn=a,o(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),an(an({method:"post"},t),{},{body:JSON.stringify(an({field_id:c.id,type:c.type,value:c.value,token:wn("vibebp").getToken()},e))})).then((function(e){return e.json()})).then((function(t){o(!1),r(!1),document.dispatchEvent(new CustomEvent("xprofile_field_saved",{detail:{field_id:c.id}})),e.hasOwnProperty("update")&&e.update(c),t.hasOwnProperty("message")&&vn("vibebp").addNotification({icon:t.status?"vicon vicon-check-box":"vicon vicon-alert",text:t.message})}))}}),100,[n]);var b=function(e){var t=an({},c);if(e&&e.length){var n=e[0].getDate();(n=n.toString()).length<2&&(n="0"+n);var a=e[0].getMonth()+1;(a=a.toString()).length<2&&(a="0"+a);var i=e[0].getFullYear()+"-"+a+"-"+n;t.value=i}else t.value="";s(t),r(!0)};return wp.element.createElement("div",{className:i?"vibebp_form_field control is-loading":"vibebp_form_field control"},"checkbox_acceptance"!==c.type?wp.element.createElement("label",null,wp.element.createElement("span",null,wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:c.name}}),c.description&&c.description.length?wp.element.createElement(dn,null,wp.element.createElement("span",{className:"vicon vicon-help-alt"}),wp.element.createElement("div",{className:"field_description",dangerouslySetInnerHTML:{__html:c.description}})):""),window.vibebp.components.hasOwnProperty("xprofile")&&window.vibebp.components.xprofile.hasOwnProperty("visibility")?wp.element.createElement("span",null,window.vibebp.components.xprofile.visibility[c.visibility]):""):"",c.hasOwnProperty("type")?"textbox"===c.type?wp.element.createElement("input",{type:"text",value:c.value,onChange:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(an(an({},c),{},{value:t.target.value}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){nn(i,r,a,o,l,"next",e)}function l(e){nn(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),onBlur:function(){r(!0)}}):"number"===c.type?wp.element.createElement("input",{type:"number",value:c.value,onChange:function(e){s(an(an({},c),{},{value:e.target.value})),r(!0)}}):"telephone"===c.type?wp.element.createElement(Qt,{field:c,update:function(e){s(e),r(!0)}}):"url"===c.type?wp.element.createElement("input",{type:"text",value:c.value,onChange:function(e){s(an(an({},c),{},{value:e.target.value})),r(!0)}}):"range"===c.type?wp.element.createElement("input",{type:"range",value:c.value,min:"0",max:"100",onChange:function(e){s(an(an({},c),{},{value:e.target.value})),r(!0)}}):"points"===c.type?wp.element.createElement("input",{type:"range",value:c.value,min:"0",max:"5",onChange:function(e){s(an(an({},c),{},{value:e.target.value})),r(!0)}}):"textarea"===c.type?wp.element.createElement("textarea",{onChange:function(e){s(an(an({},c),{},{value:e.target.value}))},onBlur:function(){r(!0)}},c.value):"selectbox"===c.type?wp.element.createElement("select",{onChange:function(e){s(an(an({},c),{},{value:e.target.value})),r(!0)},value:c.value},c.hasOwnProperty("options")?c.options.map((function(e,t){return wp.element.createElement("option",{value:e.name},e.name)})):""):"radio"===c.type?wp.element.createElement("div",{className:"vibebp_field_group"},c.hasOwnProperty("options")?c.options.map((function(e,t){return wp.element.createElement("div",{className:"radio"},wp.element.createElement("input",{id:e.id,type:"radio",value:e.name,checked:c.value===e.name,onChange:function(e){n||(s(an(an({},c),{},{value:e.target.value})),r(!0))}}),wp.element.createElement("label",{for:e.id},e.name))})):""):"checkbox"===c.type?wp.element.createElement("div",{className:"vibebp_field_group"},c.hasOwnProperty("options")?c.options.map((function(e,t){return wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",id:e.id,value:e.name,checked:c.value&&c.value.indexOf(e.name)>-1,onChange:function(t){if(Array.isArray(c.value)||(c.value=[]),c.value&&-1===c.value.indexOf(e.name)){var n=tn(c.value);n.push(e.name),s(an(an({},c),{},{value:n}))}else{var a=tn(c.value);a.splice(c.value.indexOf(e.name),1),s(an(an({},c),{},{value:a}))}r(!0)}}),wp.element.createElement("label",{for:e.id},e.name))})):""):"multiselectbox"===c.type?wp.element.createElement(be,en({update:function(e,t,n){s(an(an({},c),{},{value:e.value})),r(!0)},field:c},e)):"datebox"===c.type?wp.element.createElement("input",{type:"date",ref:f}):"country"===c.type?wp.element.createElement("select",{onChange:function(e){s(an(an({},c),{},{value:e.target.value})),r(!0)},value:c.value},window.vibebp.components.hasOwnProperty("xprofile")&&Object.keys(window.vibebp.components.xprofile.countries).length?Object.keys(window.vibebp.components.xprofile.countries).map((function(e,t){return wp.element.createElement("option",{value:e},window.vibebp.components.xprofile.countries[e])})):""):"color"===c.type?wp.element.createElement(dn,null,"undefined"==typeof Picker?wp.element.createElement("input",{type:"color",value:c.value,onChange:function(t){e.update(an(an({},c),{},{value:t.target.value})),r(!0)}}):wp.element.createElement("span",{className:"vibebp_color_field",style:{background:c.value},ref:function(t){if(!p){var n=new Picker(t);n.onChange=function(n){t.style.background=n.rgbaString,console.log("change detected"),e.hasOwnProperty("update")&&e.update(an(an({},c),{},{value:n.rgbaString})),s(an(an({},c),{},{value:n.rgbaString})),r(!0)},d(n)}}})):"location"===c.type?wp.element.createElement(re,en({field:c},e)):"social"===c.type?wp.element.createElement(P,en({field:c},e)):"repeatable"===c.type?wp.element.createElement(q,en({field:c},e)):"upload"===c.type?wp.element.createElement(Pe,en({field:c},e)):"video"===c.type?wp.element.createElement(at,en({field:c},e)):"gallery"===c.type?wp.element.createElement(ht,en({field:c},e)):"table"===c.type?wp.element.createElement(Ht,en({field:c},e)):"checkbox_acceptance"===c.type?wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",id:c.id,value:c.id,onChange:function(e){c.value&&c.value===c.id?s(an(an({},c),{},{value:null})):s(an(an({},c),{},{value:e.target.value})),r(!0)}}),wp.element.createElement("label",{for:c.id},wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:c.name}}))):"":"")};function hn(e){return function(e){if(Array.isArray(e))return On(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||En(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||En(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){if(e){if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jn=wp.element,Sn=(jn.createElement,jn.useState),Nn=jn.useEffect,kn=jn.Fragment,Pn=(jn.render,wp.data),xn=(Pn.dispatch,Pn.select),An=function(e){var t=_n(Sn(!1),2),n=t[0],r=t[1],a=_n(Sn(!1),2),i=a[0],o=a[1],l=_n(Sn([]),2),c=l[0],s=l[1],u=_n(Sn({complete:0,total:0,total_field_count:1}),2),m=u[0],d=u[1],f=_n(Sn(100),2),b=f[0],v=f[1];xn("vibebp").getUser();Nn((function(){fetch("".concat(window.vibebp.api.url,"/getProfileCompleteness?nocache"),{method:"post",body:JSON.stringify({token:xn("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&(v(e.completeness),e.fields&&e.fields.length&&(s(e.fields),d({complete:0,total:e.fields.length,total_field_count:e.total_field_count}),o(e.fields[0].id)))}))}),[]);return wp.element.createElement(kn,null,b<100?wp.element.createElement("div",{className:n?"active completeProgress":"completeProgress",onClick:function(){return r(!0)}},wp.element.createElement("label",null,window.vibebp.translations.complete_profile),wp.element.createElement(p,{progress:b,size:"xs"}),b," %"):"",n?wp.element.createElement("div",{className:"profile_completeness_wrapper"},wp.element.createElement("span",{onClick:function(){return r(!1)}}),wp.element.createElement("div",{className:"profile_completeness"},wp.element.createElement("div",{className:"profile_completeness_heading"},wp.element.createElement("h2",null,window.vibebp.translations.complete_your_profile," ",wp.element.createElement("span",null,m.complete+"/"+m.total)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){return r(!1)}})),wp.element.createElement("div",{className:"profile_completeness_content"},c.map((function(e,t){if(e.id==i)return wp.element.createElement("div",{className:"profile_field"},wp.element.createElement(gn,{field:e,update:function(e){return function(e,t){var n=hn(c);n[t]=e,s(n);var r=b+Math.round(100/m.total_field_count,2);r>100&&(r=100),v(r),d({complete:parseInt(m.complete)+1,total:m.total})}(e,t)}}))}))),wp.element.createElement("div",{className:"xprofile_pagination"},i&&c.findIndex((function(e){return e.id==i}))>0?wp.element.createElement("span",{className:"prev_next",onClick:function(){return o(c[c.findIndex((function(e){return e.id==i}))-1].id)}},wp.element.createElement("span",{className:"vicon vicon-arrow-left"})):wp.element.createElement("span",null),i&&c.findIndex((function(e){return e.id==i}))<c.length-1?wp.element.createElement("span",{className:"prev_next",onClick:function(){return o(c[c.findIndex((function(e){return e.id==i}))+1].id)}},wp.element.createElement("span",{className:"vicon vicon-arrow-right"})):wp.element.createElement("span",null)))):"")},In=(0,wp.element.createContext)({});function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(n),!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jn=wp.element,Un=(Jn.createElement,Jn.useState),Rn=Jn.useEffect,Fn=Jn.Fragment,Hn=(Jn.render,wp.data),qn=Hn.dispatch,zn=Hn.select,$n=function(e){var t=Mn(Un({}),2),n=t[0],r=t[1];return Rn((function(){var t="",n="";switch(e.type){case"friends":n="user",t=e.id.item_id;break;case"forum":n="forum",t=e.id.item_id;break;case"group":n="group",t=e.id.item_id;break;case"activity":n="user",t=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":n="user",t=e.id.user_id;break;default:n=e.type,t=e.id.item_id}n||(n="user");var a=zn("vibebp").getData(n+"_"+t);a?r(a):localforage.getItem(n+"_"+t).then((function(a){null!==a?(r(JSON.parse(a)),qn("vibebp").setData(n+"_"+t,JSON.parse(a))):fetch("".concat(window.vibebp.api.url,"/avatar?id=").concat(n+"_"+t,"&client_id=").concat(window.vibebp.settings.client_id),{method:"post",body:JSON.stringify({type:e.type,ids:e.id,token:zn("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("avatar")&&(qn("vibebp").setData(n+"_"+t,e),localforage.setItem(n+"_"+t,JSON.stringify(e)),r(e))}))}))}),[e.id.item_id,e.id.user_id]),n.hasOwnProperty("avatar")||n.hasOwnProperty("name")?"member"==e.type?wp.element.createElement("span",{className:"vibebp_member"},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}),wp.element.createElement("span",null,n.name)):"group"==e.type?wp.element.createElement("span",{className:"vibebp_group"},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}),wp.element.createElement("span",null,n.name)):"user_tip"==e.type?wp.element.createElement("span",{className:"vibebp_member tip",title:n.name},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name})):"name"==e.type||"forum"==e.type?wp.element.createElement("span",null,n.name):wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}):""},Bn=function(e){var t=Mn(Un(!0),2),n=t[0],r=t[1],a=Mn(Un(null),2),i=a[0],o=a[1];return Rn((function(){r(!0);var t=[];i&&i.abort();var n={},a=new AbortController;i&&(n={signal:a.signal}),o(a),e.hasOwnProperty("avatars")&&(t=e.avatars);var l="user";if(e.hasOwnProperty("type")&&(l=e.type),e.hasOwnProperty("user_ids")){var c=e.user_ids;Array.isArray(e.user_ids)||(c=Object.values(e.user_ids)),c.map((function(e){Array.isArray(e)?e.map((function(e){-1==t.findIndex((function(t){return t.id.user_id==e}))&&t.push({type:l,id:{user_id:e}})})):-1==t.findIndex((function(t){return t.id.user_id==e}))&&t.push({type:l,id:{user_id:e}})}))}var s=[],u=[];t.map((function(e,t){var n="",r="";switch(e.type){case"friends":r="user",n=e.id.item_id;break;case"forum":r="forum",n=e.id.item_id;break;case"group":r="group",n=e.id.item_id;break;case"activity":r="user",n=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":r="user",n=e.id.user_id;break;default:r=e.type,n=e.id.item_id}var a=zn("vibebp").getData(r+"_"+n);a&&void 0!==a||u.push(localforage.getItem(r+"_"+n).then((function(e){e?qn("vibebp").setData(r+"_"+n,JSON.parse(e)):s.push({type:r,key:n})})))})),u.length?Promise.all(u).then((function(){s.length?fetch("".concat(window.vibebp.api.url,"/avatars?ids=").concat(JSON.stringify(s),"&client_id=").concat(window.vibebp.settings.client_id),Tn(Tn({},n),{},{method:"post",body:JSON.stringify({ids:s,type:l,token:zn("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){var t=[];e.status&&e.values.map((function(e){qn("vibebp").setData(e.type+"_"+e.key,e.value),t.push(localforage.setItem(e.type+"_"+e.key,JSON.stringify(e.value)))})),t.length?Promise.all(t).then((function(){r(!1)})):r(!1)})):r(!1)})):r(!1)}),[e.user_ids,e.type]),wp.element.createElement(Fn,null,n?"":e.children)};function Wn(e){return function(e){if(Array.isArray(e))return Zn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Gn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Gn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,t){if(e){if("string"==typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zn(e,t):void 0}}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kn=wp.element,Xn=(Kn.createElement,Kn.useState),Yn=Kn.useEffect,Qn=Kn.Fragment,er=(Kn.render,Kn.useContext),tr=wp.data,nr=tr.dispatch,rr=tr.select,ar=function(e){var t=er(In),n=Vn(Xn([]),2),r=n[0],a=n[1],i=Vn(Xn(""),2),o=i[0],l=i[1],c=Vn(Xn(""),2),s=(c[0],c[1],Vn(Xn(rr("vibebp").getToken()),2)),u=s[0],m=s[1],p=Vn(Xn(!0),2),d=p[0],f=p[1],b=Vn(Xn(!1),2),v=b[0],w=b[1],y=Vn(Xn(!1),2),g=y[0],h=y[1],_=Vn(Xn([]),2),E=_[0],O=_[1],j=Vn(Xn({}),2),S=j[0];j[1];Yn((function(){d||-1!=document.querySelector("body").classList.contains("dark_vibebp")?(localStorage.setItem("is_dark",0),document.querySelector("body").classList.remove("dark_vibebp")):(localStorage.setItem("is_dark",1),document.querySelector("body").classList.add("dark_vibebp"))}),[d]),Yn((function(){var e=localStorage.getItem("is_dark");f(e)}),[]),Yn((function(){window.vibebp.expanded_menu&&window.innerWidth>768&&w(!0),window.addEventListener("resize",(function(){window.innerWidth>768&&w(!0)})),window.vibebp.dark_mode&&(f(!1),t.update("dark",!0));var e=setTimeout((function(){O(rr("vibebp").getData("loggedinMenu"))}),500);return function(){clearTimeout(e)}}),[]),Yn((function(){window.vibebp.expanded_menu&&window.innerWidth>768&&w(!0)}),[v]),Yn((function(){document.addEventListener("userLoaded",(function(){u||m(rr("vibebp").getToken())})),u&&(fetch("".concat(window.vibebp.api.url,"/profilemenu"),{method:"post",body:JSON.stringify({token:u})}).then((function(e){return e.json()})).then((function(e){e.status&&(-1==window.location.href.indexOf("component=")&&(e.menu[0].classes.push("is_active"),l(e.menu[0].css_id)),a(e.menu),nr("vibebp").setMenu(e.bpmenu))})),document.addEventListener("component_loaded",(function(e){l(e.detail.component)})))}),[u]);var N=function(){fetch("".concat(window.vibebp.api.url,"/profilemenu?force"),{method:"post",body:JSON.stringify({token:u})}).then((function(e){return e.json()})).then((function(e){e.status&&(window.vibebp.components.default_component&&e.menu.map((function(t,n){t.css_id===window.vibebp.components.default_component&&e.menu[n].classes.push("is_active")})),a(e.menu),nr("vibebp").setMenu(e.bpmenu))}))};Yn((function(){var e=window.location.href.split("#");if(e.length>1){var t=e[1].split("&"),n=[];t.map((function(e,t){"component"===(n=e.split("="))[0]&&"settings"==n[1]&&document.addEventListener("vibebp_component_reload",N)}))}return function(){document.removeEventListener("vibebp_component_reload",N)}}),[]),Yn((function(){if(r.length){if(!o){var e=r[0].css_id;"xprofile"===e&&(e="profile"),l(e)}if(-1!==window.location.href.indexOf("#")){var t=window.location.href.split("#");if(t.length>1){var n=t[1].split("&"),a=[];n.map((function(e,t){"component"===(a=e.split("="))[0]&&(rr("vibebp").getComponent()||(r.map((function(e,t){e.css_id==a[1]&&P(t)})),nr("vibebp").setComponent(a[1])))}))}}}}),[r]);var k=function(e){e.hasOwnProperty("css_id")?(nr("vibebp").setComponent(e.css_id),nr("vibebp").setAction(!1),nr("vibebp").setId(!1)):nr("vibebp").setComponent(e.type+"__"+e.object+"__"+e.object_id)};Yn((function(){o&&(nr("vibebp").setComponent(o),localforage.createInstance({name:"vibebp_last_requests"}).clear())}),[o]);var P=function(e){var t=Wn(r);t.map((function(e){e.classes.indexOf("is_active")>-1&&e.classes.splice(e.classes.indexOf("is_active"),1)})),t[e].classes.push("is_active"),a(t)},x=function(){rr("vibebp").logout(),w(!1),document.querySelector("body").classList.add("vibebp_logout");var e=new CustomEvent("userLoaded",{detail:{userLoaded:!0}});document.dispatchEvent(e)},A="profile_menu";v&&"slick"!==window.vibebp.settings.customizer.theme&&"simple"!==window.vibebp.settings.customizer.theme&&(A+=" active"),g&&(A+=" show_loggedin_menu");var I=function(e){return window.vibebp.settings.customizer.theme==e};return wp.element.createElement("div",{className:A,onMouseEnter:function(){window.vibebp.expanded_menu||"slick"==window.vibebp.settings.customizer.theme||w(!0)},onMouseLeave:function(){window.vibebp.expanded_menu||"slick"==window.vibebp.settings.customizer.theme||w(!1)}},window.vibebp.settings.customizer.profile_menu_promo&&window.vibebp.settings.customizer.profile_menu_promo.length?wp.element.createElement("div",{className:"site_logo"},wp.element.createElement("img",{src:window.vibebp.settings.customizer.profile_menu_promo,style:S})):"",wp.element.createElement("div",{className:"menu_items"},Array.isArray(r)&&r.length?r.map((function(e,t){if(e.menu_item_parent=parseInt(e.menu_item_parent),!e.menu_item_parent){"xprofile"===e.css_id&&(e.css_id="profile");var n=r.filter((function(t){return t.menu_item_parent===e.ID}));n.length&&-1===e.classes.indexOf("hasChildren")&&e.classes.push("hasChildren");return/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e.icon)&&(e.icon=atob(e.icon)),wp.element.createElement("div",{id:e.css_id,className:e.classes.join(" ")},wp.element.createElement("span",{className:"menu_item_"+e.css_id},e.classes.indexOf("external_link")>-1?wp.element.createElement("span",{onClick:function(){window.location.href=e.url}},wp.element.createElement("span",{className:"vicon vicon-new-window"}),wp.element.createElement("span",null,e.title)):wp.element.createElement(Qn,null,wp.element.createElement("span",{onClick:function(){k(e),w(!1),P(t)}},/svg/.test(e.icon)?wp.element.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:e.icon}}):wp.element.createElement("span",{className:"icon "+e.icon}),wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.title}})),n.length?wp.element.createElement("span",{class:"vicon vicon-angle-right",onClick:function(){var e=Wn(r);-1==e[t].classes.indexOf("open")?e[t].classes.push("open"):e[t].classes.splice(e[t].classes.indexOf("open"),1),a(e)}}):"")),n.length?wp.element.createElement("div",{className:"sub_nav_items"},n.map((function(e){return wp.element.createElement("div",{onClick:function(){k(e),w(!1),P(t)},className:e.classes.join(" ")},/svg/.test(e.icon)?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}):wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.title))}))):"")}})):""),I("slick")||I("simple")?"":wp.element.createElement("span",{className:v?"vicon vicon-angle-double-right reversed":"vicon vicon-angle-double-right",onClick:function(){return w(!v)}}),wp.element.createElement("div",{className:"menu_bottom"},I("slick")?"":wp.element.createElement(Qn,null,d?wp.element.createElement("div",{className:"menu_item",onClick:function(){f(!1),t.update("dark",!0),w(!v)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.dark_mode}}),wp.element.createElement("span",null,window.vibebp.translations.dark_mode)):wp.element.createElement("div",{className:"menu_item",onClick:function(){f(!0),t.update("dark",!1)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.light_mode}}),wp.element.createElement("span",null,window.vibebp.translations.light_mode))),I("slick")?wp.element.createElement("div",{className:"menu_item",onClick:function(){k({css_id:"settings"}),w(!1),P("settings")}},wp.element.createElement("span",null,wp.element.createElement("span",{className:"icon"},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",enableBackground:"new 0 0 64 64",version:"1.1",viewBox:"0 0 64 64",xmlSpace:"preserve"}," ",wp.element.createElement("path",{d:"M32.1 19.7c-6.8 0-12.3 5.5-12.3 12.3 0 6.8 5.5 12.3 12.3 12.3 6.8 0 12.3-5.5 12.3-12.3-.1-6.7-5.6-12.3-12.3-12.3zm0 21.1c-4.8 0-8.8-3.9-8.8-8.8s3.9-8.8 8.8-8.8 8.8 3.9 8.8 8.8c-.1 4.9-4 8.8-8.8 8.8z"})," ",wp.element.createElement("path",{d:"M61.5 38.9l-6.2-3.4c.2-1.3.3-2.5.3-3.7 0-1.4-.1-2.6-.3-3.8l6.3-3.5c1.1-.6 1.5-1.9 1-3.1l-6-10.1c-.6-1-1.9-1.4-3.1-1L47 13.9c-.4-.3-.8-.7-1.2-1-1.1-1-2.2-1.9-3.7-2.6-.3-.1-.5-.5-.5-.8V5.6c0-2.4-2-4.4-4.4-4.4H26.8c-2.4 0-4.4 2-4.4 4.4v4c0 .3-.2.6-.5.8-1.5.7-2.6 1.6-3.8 2.7-.3.3-.7.6-1.1.9l-5.8-3.3c-1.9-1-3.2-.3-3.8.7l-5.7 9.8c-.3.6-.4 1.3-.2 1.9.2.6.6 1.2 1.2 1.5l6.2 3.5c-.2 1.1-.3 2.3-.3 3.7 0 1.3.1 2.5.2 3.7L2.4 39c-1.1.6-1.5 1.9-1 3.1l5.9 10.1c.6 1 1.9 1.4 3.1 1l6.5-3.6c.4.3.8.6 1.1.9 1.2 1 2.2 1.9 3.8 2.6.3.1.5.5.5.8v4.4c0 2.4 2 4.4 4.4 4.4h10.5c2.4 0 4.4-2 4.4-4.4v-4.6c0-.3.2-.6.5-.8 1.5-.7 2.5-1.6 3.7-2.6.4-.3.7-.6 1.1-1l5.8 3.3c1.9 1 3.2.3 3.7-.6l5.8-9.8c.3-.6.4-1.2.3-1.9 0-.6-.5-1.1-1-1.4zm-7.4 10.5l-5.5-3.1c-1.2-.7-2.7-.5-3.7.3-.5.4-.9.8-1.3 1.1-1.1.9-1.8 1.6-2.9 2.1-1.5.7-2.5 2.3-2.5 3.9v4.6c0 .5-.4.9-.9.9H26.8c-.5 0-.9-.4-.9-.9v-4.4c0-1.7-1-3.2-2.5-3.9-1.1-.5-2-1.2-3-2.1-.4-.3-.8-.7-1.3-1.1-.6-.5-1.4-.8-2.1-.8-.6 0-1.1.1-1.6.4l-5.5 3.1-4.7-8 5.3-3c1.3-.7 1.9-2.1 1.8-3.5-.1-1-.2-2.1-.2-3.2 0-1.2.1-2.2.2-3.1.3-1.5-.4-3-1.7-3.7l-5.3-2.9 4.7-8 5.5 3.1c1.2.7 2.7.5 3.7-.3.4-.4.8-.7 1.2-1 1.1-.9 1.9-1.6 3-2.2 1.5-.7 2.5-2.3 2.5-3.9v-4c0-.5.4-.9.9-.9h10.5c.5 0 .9.4.9.9v3.9c0 1.7 1 3.2 2.5 3.9 1.1.5 1.9 1.2 2.9 2.1.4.4.9.7 1.4 1.1 1 .8 2.5 1 3.7.3l5.5-3.1 4.7 8-5.3 2.9c-1.3.7-2 2.2-1.7 3.7.2.9.2 2 .2 3.1 0 1-.1 2.1-.3 3.2-.3 1.5.5 3 1.8 3.7l5.2 2.8-4.7 8z"})," "))),wp.element.createElement("span",null,window.vibebp.translations.settings)):"",I("slick")?wp.element.createElement("div",{className:"menu_item"},wp.element.createElement("span",{className:"vibebp_current_user",onClick:function(){return h(!g)}},v?wp.element.createElement(Bn,{user_ids:[rr("vibebp").getUser().id],type:"member"},wp.element.createElement($n,{type:"member",id:{user_id:rr("vibebp").getUser().id}})):wp.element.createElement($n,{type:"user",id:{user_id:rr("vibebp").getUser().id}})),g?wp.element.createElement("div",{className:"vibebp_member_menu"},wp.element.createElement("div",{className:"vibebp_member_card_wrapper"},wp.element.createElement($n,{type:"user",id:{user_id:rr("vibebp").getUser().id}}),wp.element.createElement("div",{className:"member_menu_buttons"},wp.element.createElement(Bn,{user_ids:[rr("vibebp").getUser().id],type:"name"},wp.element.createElement($n,{type:"name",id:{user_id:rr("vibebp").getUser().id}})),wp.element.createElement(An,null))),wp.element.createElement("div",{className:"vibebp_loggedin_menu_wrapper"},wp.element.createElement("div",{className:"vibebp_loggedin_usermenu_content"},E.length?E.map((function(e){return wp.element.createElement("span",{className:e.classes.join(" "),onClick:function(){return function(e){h(!1),e.classes.indexOf("bp-menu")>-1?(l(e.css_id),nr("vibebp").setComponent(e.css_id)):window.location.href=e.url}(e)},dangerouslySetInnerHTML:{__html:e.title}})})):"")),wp.element.createElement("button",{className:"button is-primary",onClick:x},wp.element.createElement("i",{className:"icon",dangerouslySetInnerHTML:{__html:window.vibebp.icons.logout}}),wp.element.createElement("span",null,window.vibebp.translations.logout))):""):wp.element.createElement("div",{className:"menu_item",onClick:x},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.logout}}),wp.element.createElement("span",null,window.vibebp.translations.logout))))};function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){lr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cr(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mr=wp.element,pr=(mr.createElement,mr.useState),dr=mr.useEffect,fr=mr.Fragment,br=(mr.render,mr.useContext,wp.data),vr=(br.dispatch,br.select),wr=function(e){var t=sr(pr(!1),2),n=t[0],r=t[1],a=sr(pr(""),2),i=a[0],o=a[1],l=sr(pr([]),2),c=l[0],s=l[1],u=sr(pr({}),2),m=u[0],p=u[1],d=sr(pr(""),2),f=d[0],b=d[1];dr((function(){o(e.move)}),[e.move]);var v=function(e){return new Promise((function(t){return setTimeout((function(){t()}),e)}))};return dr((function(){var t;e.widget.hasOwnProperty("id_base")&&(e.widget.id_base||e.widget.hasOwnProperty("style"))?(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.widget.hasOwnProperty("style")&&void 0!==e.widget.style&&e.widget.style&&e.widget.style.hasOwnProperty("width_class")&&void 0!==e.widget.style.width_class&&e.widget.style.width_class||e.update("defaultWidth",or(or({},e.widget),{},{link:e.widget.link}),e.all_widgets),t.next=3,v(200);case 3:b(e.widget.id_base),s(or({},e.widget)),n=new CustomEvent(e.widget.id_base,{detail:{widget:e.widget}}),document.dispatchEvent(n),e.setloading(!1);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){cr(i,r,a,o,l,"next",e)}function l(e){cr(i,r,a,o,l,"throw",e)}o(void 0)}))})():e.widget.link&&(r(!0),e.setloading(!0),fetch("".concat(e.widget.link),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:vr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(r(!1),t.status)if(window.vibebp.components.dashboard.widgets.indexOf(t.widget.id_base)>-1){b(t.widget.id_base),s(or(or({},t.widget),{},{link:e.widget.link})),e.widget.hasOwnProperty("style")&&void 0!==e.widget.style&&e.widget.style&&e.widget.style.hasOwnProperty("width_class")&&void 0!==e.widget.style.width_class&&e.widget.style.width_class||e.update("defaultWidth",or(or({},t.widget),{},{link:e.widget.link}),e.all_widgets);var n=new CustomEvent(t.widget.id_base,{detail:{widget:t.widget}});document.dispatchEvent(n),e.setloading(!1)}else t.widget.hasOwnProperty("html")&&s(t.widget)})))}),[e.widget.link]),dr((function(){p(e.widget)}),[e.widget]),wp.element.createElement("div",{className:"dashboard_widget dash_"+f},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(fr,null,wp.element.createElement("div",{className:"dashboard_widget_header"},wp.element.createElement("span",{className:i?"vicon vicon-pin-alt":"vicon vicon-pin2",onClick:function(){return e.update("move",c,e.all_widgets)}}),wp.element.createElement("span",null,i?wp.element.createElement(fr,null,m.hasOwnProperty("style")&&m.style.column>1?wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){return e.update("column_minus",c,e.all_widgets)}}):"",wp.element.createElement("span",{className:"vicon vicon-arrow-right",onClick:function(){return e.update("column",c,e.all_widgets)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){return e.update("remove",c,e.all_widgets)}})):"")),c.hasOwnProperty("html")?wp.element.createElement("div",{className:c.id_base+" "+c.id,dangerouslySetInnerHTML:{__html:c.html}}):f?wp.element.createElement("div",{className:f+" "+c.id}):""))};function yr(e){return function(e){if(Array.isArray(e))return jr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Or(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){_r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Or(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e,t){if(e){if("string"==typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(e,t):void 0}}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sr=wp.element,Nr=(Sr.createElement,Sr.useState),kr=Sr.useEffect,Pr=(Sr.useContext,Sr.Fragment),xr=(Sr.render,wp.data),Ar=xr.dispatch,Ir=xr.select,Cr=function(e){var t=Er(Nr([]),2),n=t[0],r=t[1],a=Er(Nr(!1),2),i=a[0],o=a[1],l=Er(Nr(!1),2),c=l[0],s=l[1],u=Er(Nr(!0),2),m=(u[0],u[1]),p=Er(Nr([]),2),d=p[0],f=p[1],b=Er(Nr(null),2),v=b[0],w=(b[1],Er(Nr([]),2)),y=(w[0],w[1],Er(Nr(e.isCustomized),2)),g=y[0],h=y[1],_=Er(Nr([]),2),E=_[0];_[1];kr((function(){r(e.widgets)}),[e.widgets]),kr((function(){var t=[];E&&E.length&&(E.map((function(e){var r=n.findIndex((function(t){return t.key==e.item.getAttribute("data-widget-key")||t==e.item.getAttribute("data-widget-key")}));r>-1&&t.push(n[r])})),e.update(t),r(t))}),[E]);return wp.element.createElement(Pr,null,n&&n.length?wp.element.createElement(Pr,null,g&&i?wp.element.createElement("div",{className:"",style:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},wp.element.createElement("a",{className:c?"button is-primary is-loading":"button is-primary",onClick:function(){s(!0),fetch("".concat(window.vibebp.api.url,"/save_sidebar?post"),{method:"post",body:JSON.stringify({widgets:null,sidebar_id:window.vibebp.components.dashboard.sidebar,token:Ir("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(t.status){Ar("vibebp").addNotification({text:t.message}),h(!1),e.reset(),v&&v.shiftLayout();var n="".concat(window.vibebp.api.url,"/sidebar/").concat(window.vibebp.components.dashboard.sidebar);localforage.removeItem(n)}s(!1)}))}},window.vibebp.translations.reset_to_default)):"",wp.element.createElement("div",{className:i?"dashboard dragactive":"dashboard"},n.map((function(t,a){var l={link:""};return"string"==typeof t?l.link=t:t&&(t.hasOwnProperty("style")||t.hasOwnProperty("id_base"))&&(l=t),wp.element.createElement("div",{className:t.hasOwnProperty("style")&&t.style.hasOwnProperty("width_class")&&void 0!==t.style.width_class&&t.style.width_class&&t.style.width_class.length?"dashboard_widget_wrapper "+t.style.width_class:"dashboard_widget_wrapper col-md-4",ref:function(e){if(e&&!d[a]){var t=yr(d);t[a]=e,f(t)}},"data-widget-id":void 0===t.id?t:t.id,"data-widget-key":void 0===t.key?t:t.key,key:a,style:{}},wp.element.createElement(wr,{widget:l,move:i,update:function(t,n,l){!function(t,n,a,l){if("move"==t&&o(!i),"remove"==t&&(l.splice(n,1),e.add({link:a.link,name:a.name,style:{row:1,column:1}})),"column"==t){if(!a.hasOwnProperty("options"))return;if("string"==typeof l[n]){var c=window.vibebp.settings.widget_classes.findIndex((function(e){return e===(a.options.hasOwnProperty("width")?a.options.width:"col-md-6")}));-1==c&&(c=1),l[n]=hr(hr({},a),{},{link:l[n]}),l[n].style={row:1,column:1},l[n].style.column++,c>=0&&void 0!==window.vibebp.settings.widget_classes[c+1]&&(l[n].style.width_class=window.vibebp.settings.widget_classes[c+1])}else{var s=window.vibebp.settings.widget_classes.findIndex((function(e){return e===l[n].style.width_class}));l[n].style.column++,s>=0&&void 0!==window.vibebp.settings.widget_classes[s+1]&&(l[n].style.width_class=window.vibebp.settings.widget_classes[s+1])}}if("column_minus"==t){var u=window.vibebp.settings.widget_classes.findIndex((function(e){return e===l[n].style.width_class}));u>=0&&(l[n].style.width_class=window.vibebp.settings.widget_classes[u-1]),l[n].style.column--}if("row"==t&&("string"==typeof l[n]?(l[n]=hr(hr({},a),{},{link:l[n]}),l[n].style={row:1,column:1},l[n].style.row++):l[n].style.row++,v.shiftLayout()),"row_minus"==t&&l[n].style.row--,"defaultWidth"==t){if(!a.hasOwnProperty("options"))return;var m=hr(hr({},a),{},{id:a.id_base,name:a.name,description:a.description,link:a.link,style:{row:5,column:1,width_class:a.options.hasOwnProperty("width")?a.options.width:"col-md-6"}});a.options.hasOwnProperty("width")&&a.options.width&&(a.options.width.indexOf("col-md-6")>-1&&(m.style={row:10,column:2}),a.options.width.indexOf("col-md-8")>-1&&(m.style.column=3,m.style.row=10),a.options.width.indexOf("col-md-12")>-1&&(m.style.column=4,m.style.row=10),m.style.width_class=a.options.width),l.splice(n,1,m),r(yr(l)),e.update(yr(l),!0)}"defaultWidth"!==t&&"move"!==t&&(h(!0),l.length&&(r(yr(l)),e.update(yr(l))))}(t,a,n,l)},all_widgets:n,setloading:function(e){m(e)}}))})))):"")};function Tr(e){return function(e){if(Array.isArray(e))return Lr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Mr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Mr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,t){if(e){if("string"==typeof e)return Lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(e,t):void 0}}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}"undefined"!=typeof Packery&&(Packery.prototype.unbindDraggabillyEvents=function(e){e.off("dragStart",this.handleDraggabilly.dragStart),e.off("dragMove",this.handleDraggabilly.dragMove),e.off("dragEnd",this.handleDraggabilly.dragEnd)});var Jr=wp.element,Ur=(Jr.createElement,Jr.useState),Rr=Jr.useEffect,Fr=(Jr.useContext,Jr.Fragment),Hr=(Jr.render,wp.data),qr=Hr.dispatch,zr=Hr.select,$r=function(e){var t=Dr(Ur(!1),2),n=t[0],r=t[1],a=Dr(Ur([]),2),i=a[0],o=a[1],l=Dr(Ur(""),2),c=l[0],s=l[1],u=Dr(Ur(!1),2),m=u[0],p=u[1],d=Dr(Ur([]),2),f=d[0],b=d[1],v=Dr(Ur(!1),2),w=v[0],y=v[1];Rr((function(){document.querySelector("body").classList.value.indexOf("withsidebar")>-1&&document.querySelector("body").classList.remove("withsidebar");var e=!0,t=window.location.href.split("#");if(t.length>1){var n=t[1].split("&"),r=[];n.map((function(t,n){"component"===(r=t.split("="))[0]&&"dashboard"!=r[1]&&(e=!1)}))}return e&&g(),document.addEventListener("vibebp_component_reload",g),function(){document.removeEventListener("vibebp_component_reload",g)}}),[]);var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(!0);var t="".concat(window.vibebp.api.url,"/sidebar/").concat(window.vibebp.components.dashboard.sidebar);!0===e&&(t+="?force"),fetch(t,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:zr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&(o(e.widgets),e.unusedwidgets&&b(e.unusedwidgets),e.hasOwnProperty("customized")&&y(!0)),r(!1)}))};return wp.element.createElement(Fr,null,wp.element.createElement("div",{className:"dashboard-wrapper"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i&&i.length?wp.element.createElement(Fr,null,wp.element.createElement(Cr,{widgets:i,add:function(e){var t=Tr(f);t.push(e),b(t)},update:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?o(e):fetch("".concat(window.vibebp.api.url,"/save_sidebar?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({widgets:e,sidebar_id:window.vibebp.components.dashboard.sidebar,token:zr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(e.status){qr("vibebp").addNotification({text:e.message});var t="".concat(window.vibebp.api.url,"/sidebar/").concat(window.vibebp.components.dashboard.sidebar);localforage.removeItem(t)}}))},reset:function(){g(!0)},isCustomized:w}),f.length?wp.element.createElement("span",{className:"widget_move_spot"},m?wp.element.createElement("span",null,wp.element.createElement("select",{onChange:function(e){var t=Tr(i),n=Tr(f);t.push(e.target.value),o(t),n.splice(n.findIndex((function(t){return t.link==e.target.value})),1),b(n),s(""),p(!1)},value:c},wp.element.createElement("option",null,window.vibebp.translations.select_widget),f.map((function(e){return wp.element.createElement("option",{value:e.link},e.name)}))),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){p(!1)}})):wp.element.createElement("span",{className:"vicon vicon-plus",onClick:function(){p(!0)}})):""):wp.element.createElement("div",{className:"vibebp_message"},window.vibebp.translations.empty_dashboard)))};function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){Vr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kr=wp.element,Xr=(Kr.createElement,Kr.useState),Yr=Kr.useEffect,Qr=Kr.useRef,ea=Kr.Fragment,ta=(Kr.render,wp.data),na=(ta.dispatch,ta.select,Math.round(100*Math.random())),ra=function(e){var t=Qr(null),n=React.createRef(),r=Gr(Xr(!0),2),a=r[0],i=r[1],o=Gr(Xr(!1),2),l=o[0],c=o[1],s=Gr(Xr(!1),2),u=s[0],m=s[1],p=Gr(Xr(""),2),d=p[0],f=p[1],b=Gr(Xr(""),2),v=b[0],w=b[1],y=Gr(Xr(""),2),g=(y[0],y[1]),h=Gr(Xr(""),2),_=h[0],E=h[1],O=Gr(Xr({x:0,y:0,width:0,height:0,type:"image"}),2),j=O[0],S=O[1],N=Gr(Xr(window.vibebp.translations.select_image),2),k=N[0],P=N[1];Yr((function(){e.hasOwnProperty("crop")&&e.crop&&c(!0)}),[]),Yr((function(){e.file&&(f(window.URL.createObjectURL(e.file)),i(!1),E([e.file]))}),[e.file]),Yr((function(){if(u&&l){var t=n.current;new Croppr(t,{aspectRatio:1,returnMode:"raw",maxSize:[460,460,"px"],minSize:[150,150,"px"],onCropEnd:function(t){var n=Wr({},j);n.x=t.x,n.y=t.y,n.height=t.height,n.width=t.width,S(n);var r={x:t.x,y:t.y,width:t.width,height:t.height};e.update(_,r)}})}}),[u]);return wp.element.createElement("div",{className:"uploader"},a?wp.element.createElement("label",{for:"fileupload_"+na,className:"upload_file"},k,"image"==e.type?wp.element.createElement("input",{id:"fileupload_"+na,"data-type":e.type,ref:t,type:"file",accept:"image/*",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(f(window.URL.createObjectURL(t.current.files[0])),i(!1),E(t.current.files),e.update(t.current.files,Wr(Wr({},j),{},{key:"image"}))):(P(window.vibebp.translations.image_size_error),setTimeout((function(){P(window.vibebp.translations.select_image)}),3500))}}):"video"==e.type?wp.element.createElement("input",{id:"fileupload_"+na,"data-type":e.type,ref:t,type:"file",accept:"video/*",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(w(window.URL.createObjectURL(t.current.files[0])),i(!1),E(t.current.files),e.update(t.current.files,Wr(Wr({},j),{},{key:"video"}))):(P(window.vibebp.translations.image_size_error),setTimeout((function(){P(window.vibebp.translations.select_image)}),3500))}}):wp.element.createElement("input",{id:"fileupload_"+na,"data-type":e.type,ref:t,type:"file",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(g(window.URL.createObjectURL(t.current.files[0])),i(!1),E(t.current.files),e.update(t.current.files,Wr(Wr({},j),{},{key:"attachment"}))):(P(window.vibebp.translations.image_size_error),setTimeout((function(){P(window.vibebp.translations.select_image)}),3500))}})):wp.element.createElement("div",{className:"uploaded_src"},"image"==e.type?wp.element.createElement(ea,null,l?wp.element.createElement(ea,null,wp.element.createElement("div",{className:"uploaded_image"},wp.element.createElement("img",{src:d})),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){m(!u)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){c(!1),i(!0),setImgRef(""),f(""),S({x:0,y:0,width:0,height:0})}})),u?wp.element.createElement("div",{className:"cropimage",id:"cropper"},wp.element.createElement("img",{src:d,ref:n})):""):wp.element.createElement("img",{src:d})):"video"==e.type?wp.element.createElement(ea,null,wp.element.createElement("video",{className:"content_to_html_video",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:v,type:"video/mp4"}))):wp.element.createElement(ea,null,wp.element.createElement("i",{className:"vicon vicon-clip"}))))},aa=function(e){var t=e.children,n=e.onClose;return e.open?ReactDOM.createPortal(wp.element.createElement("div",{className:"vibe_editor_modal react_portal_modal"},wp.element.createElement("span",{onClick:n}),wp.element.createElement("div",{className:"ve_modal-content"},wp.element.createElement("div",{className:"ve_modal-header"},wp.element.createElement("div",null),wp.element.createElement("span",{className:"vicon vicon-close",onClick:n})),wp.element.createElement("div",{className:"ve_modal-body"},t))),document.body):null};function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ca(e){return function(e){if(Array.isArray(e))return ma(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ua(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ua(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){if(e){if("string"==typeof e)return ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ma(e,t):void 0}}function ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pa=wp.element,da=(pa.createElement,pa.useState),fa=(pa.useEffect,pa.Fragment,pa.render,wp.data),ba=(fa.dispatch,fa.select,function(e){var t=sa(da(!1),2),n=t[0],r=t[1],a=sa(da(!1),2),i=a[0],o=a[1],l=sa(da({s:"",page:1}),2),c=l[0],s=l[1],m=sa(da([]),2),p=m[0],d=m[1],f=sa(da(0),2),b=f[0],v=f[1];return u((function(){console.log(c),r(!0);var e="".concat(window.vibebp.settings.giphy.endpoints.trending,"?api_key=").concat(window.vibebp.settings.giphy.api_key,"&limit=10&offset=").concat(p.length);c.s.length>2&&(e="".concat(window.vibebp.settings.giphy.endpoints.search,"?api_key=").concat(window.vibebp.settings.giphy.api_key,"&q=").concat(c.s,"&limit=10&offset=").concat(10*(c.page-1))),fetch(e,{method:"get"}).then((function(e){return e.json()})).then((function(e){if(e.data&&e.data.length){r(!1);var t=[];i?t=[].concat(ca(p),ca(e.data)):(d([]),t=e.data),d(t),v(e.pagination.total_count),o(!1)}}))}),500,[c]),wp.element.createElement("div",{className:"gif_wrap"},wp.element.createElement("div",{className:"input_field_wrapper"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_gif,onChange:function(e){s(oa(oa({},c),{},{s:e.target.value,page:1}))}}),wp.element.createElement("span",{className:"vicon vicon-search"})),wp.element.createElement("div",{className:"gif_wrapper"},p.length?p.map((function(t,n){return wp.element.createElement("img",{src:t.images.preview_gif.url,alt:t.title,title:t.title,onClick:function(){e.update("add",t)}})})):""),!n&&b>p.length?wp.element.createElement("a",{className:"link",onClick:function(){o(!0),s(oa(oa({},c),{},{page:c.page+1}))}},window.vibebp.translations.load_more):wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)))});function va(e){return function(e){if(Array.isArray(e))return Ea(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){ga(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||_a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(e,t){if(e){if("string"==typeof e)return Ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ea(e,t):void 0}}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oa=wp.element,ja=(Oa.createElement,Oa.useState),Sa=Oa.useEffect,Na=Oa.Fragment,ka=(Oa.render,wp.data),Pa=ka.dispatch,xa=ka.select,Aa=function(e){var t=ha(ja(!1),2),n=t[0],r=t[1],a=ha(ja([]),2),i=a[0],o=a[1],l=ha(ja([]),2),c=l[0],s=l[1],u=ha(ja(""),2),m=u[0],p=u[1],d=ha(ja([]),2),f=d[0],b=d[1],v=ha(ja({content:"",component:"activity",component_id:"",parent_id:"",meta:[]}),2),w=v[0],y=v[1],g=ha(ja(!1),2),h=g[0],_=g[1];Sa((function(){if(e.hasOwnProperty("activity_id")&&y({content:"",component:"activity_comment",component_id:e.comment_id,parent_id:e.activity_id,meta:[]}),e.hasOwnProperty("component")&&"personal"!=e.component){var t=ya(ya({},w),{},{component:e.component,component_id:e.id});e.hasOwnProperty("secondary_item_id")&&(t.secondary_item_id=e.secondary_item_id),y(t)}e.hasOwnProperty("component")&&"personal"==e.component&&y(ya(ya({},w),{},{type:null})),e.hasOwnProperty("component")&&"public"==e.component&&y(ya(ya({},w),{},{type:e.component}))}),[e.component]),Sa((function(){w.component.length&&"activity"!==w.component&&"activity_comment"!==w.component&&fetch("".concat(window.vibebp.api.url,"/").concat(w.component,"/user/").concat(xa("vibebp").getUser().id,"/get_items"),{method:"post",body:JSON.stringify({token:xa("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e[w.component])&&o(e[w.component])}))}),[w.component]);var E=function(e){var t=va(c);t.push(e),s(t)};return wp.element.createElement("div",{className:"portal activity_post"},wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("textarea",{placeholder:e.hasOwnProperty("is_child")?window.vibebp.translations.add_comment:window.vibebp.translations.whats_new,onChange:function(e){var t=ya({},w);t.content=e.target.value,y(t)},value:w.content})),wp.element.createElement("div",{className:"portal_footer"},e.hasOwnProperty("activity_id")||"personal"!==e.component||e.hasOwnProperty("component")&&"public"==e.component?"":wp.element.createElement("div",{className:"footer_main"},wp.element.createElement("select",{value:w.component,onChange:function(e){var t=ya({},w);t.component=e.target.value,y(t)}},Object.keys(window.vibebp.components.activity.post.components).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.activity.post.components[e])}))),i.length?wp.element.createElement("select",{value:w.component_id,onChange:function(e){var t=ya({},w);t.component_id=e.target.value,y(t)}},wp.element.createElement("option",null,window.vibebp.translations.select_component),i.map((function(e){return wp.element.createElement("option",{value:e.id},e.label)}))):""),wp.element.createElement("div",{className:"footer_links"},f.length?wp.element.createElement("div",{className:"media_wrap"},f.map((function(e,t){return wp.element.createElement("div",{className:"media_file"},wp.element.createElement("span",{className:"viocn vicon-close",onClick:function(){var e=va(f);e.splice(t,1),b(e)}}),function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url});case"video":return wp.element.createElement("video",{src:e.url})}}(e))}))):"",c.length?c.map((function(e,t){return wp.element.createElement(Na,null,"image"==e?wp.element.createElement("a",{className:"vicon vicon-image upload_type"}):"video"==e?wp.element.createElement("a",{className:"vicon vicon-video-camera upload_type"}):wp.element.createElement("a",{className:"vicon vicon-clip upload_type"}),wp.element.createElement(ra,{file:m[t],type:e,update:function(n,r){var a=va(m);a[t]=new File([n[0]],n[0].name),p(a),y(ya(ya({},w),{},{meta:[].concat(va(w.meta),[{key:e,value:t}])}))}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){var e=va(m);e.splice(t,1),p(e);var n=ya({},w),r=n.meta.findIndex((function(e){return e.value===t}));console.log(r),n.meta.splice(r,1),y(n);var a=va(c);a.splice(t,1),s(a)}}))})):"",wp.element.createElement(Na,null,wp.element.createElement("a",{className:"vicon vicon-clip",onClick:function(){E("attachment")}}),wp.element.createElement("a",{className:"vicon vicon-video-camera",onClick:function(){E("video")}}),wp.element.createElement("a",{className:"vicon vicon-image",onClick:function(){E("image")}}),window.vibebp.settings.giphy.api_key&&window.vibebp.settings.giphy.api_key.length?wp.element.createElement("a",{className:"",onClick:function(){_(!h)}},wp.element.createElement("svg",{width:"15px",height:"15px",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M2.5 10.5H2V11H2.5V10.5ZM4.5 10.5V11H5V10.5H4.5ZM13.5 3.5H14V3.29289L13.8536 3.14645L13.5 3.5ZM10.5 0.5L10.8536 0.146447L10.7071 0H10.5V0.5ZM2 6V10.5H3V6H2ZM2.5 11H4.5V10H2.5V11ZM5 10.5V8.5H4V10.5H5ZM3 7H5V6H3V7ZM2 5V1.5H1V5H2ZM13 3.5V5H14V3.5H13ZM2.5 1H10.5V0H2.5V1ZM10.1464 0.853553L13.1464 3.85355L13.8536 3.14645L10.8536 0.146447L10.1464 0.853553ZM2 1.5C2 1.22386 2.22386 1 2.5 1V0C1.67157 0 1 0.671573 1 1.5H2ZM1 12V13.5H2V12H1ZM2.5 15H12.5V14H2.5V15ZM14 13.5V12H13V13.5H14ZM12.5 15C13.3284 15 14 14.3284 14 13.5H13C13 13.7761 12.7761 14 12.5 14V15ZM1 13.5C1 14.3284 1.67157 15 2.5 15V14C2.22386 14 2 13.7761 2 13.5H1ZM6 7H9V6H6V7ZM6 11H9V10H6V11ZM7 6.5V10.5H8V6.5H7ZM10.5 7H13V6H10.5V7ZM10 6V11H11V6H10ZM10.5 9H12V8H10.5V9Z",fill:"var(--text)"}))):""),wp.element.createElement("a",{className:n?"button is-primary is-loading":"button is-primary",onClick:function(){if(w.content.length){var t=new FormData,n=ya({},w);e.hasOwnProperty("media")&&void 0!==e.media&&e.media.hasOwnProperty("url")?(n.meta_key=e.media.url,n.component="activity_comment",n.parent_id=e.media.activity.id):xa("vibebp").getData("wallUserId")&&(n.wallUserId=xa("vibebp").getData("wallUserId")),w.hasOwnProperty("type")&&"public"===w.type&&!n.wallUserId&&(n.wallUserId=xa("vibebp").getUser().id),t.append("body",JSON.stringify({args:n,medias:f,token:xa("vibebp").getToken()})),m.length&&m.map((function(e,n){t.append("files_"+n,e)})),r(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/add?upload"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){t.status&&(console.log(w),e.update(t.activity,"add"),y(ga({component:"activity",component_id:"",parent_id:"",meta:[],content:""},"meta",[])),p([]),r(!1),Pa("vibebp").addNotification({text:t.activity.action}))}))}}},e.hasOwnProperty("is_child")?window.vibebp.translations.post:window.vibebp.translations.post_update),e.hasOwnProperty("activity_id")?wp.element.createElement("a",{className:"link",onClick:function(){e.update("","cancel")}},window.vibebp.translations.cancel):"")),wp.element.createElement(aa,{open:h,onClose:function(){return _(!1)}},wp.element.createElement(ba,{update:function(e,t){if("add"==e){var n=t.images.original.url,r=va(f);r.push({type:"image",url:n}),b(r),_(!1)}}})))};function Ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ta=wp.element,Da=(Ta.createElement,Ta.useState),Ma=Ta.useEffect,La=(Ta.Fragment,Ta.render,function(e){var t=Ia(Da(""),2),n=(t[0],t[1],Ia(Da({s:0,m:0,h:0,d:0,w:0,mn:0,y:0}),2)),r=n[0],a=n[1];Ma((function(){i()}),[e.time]);var i=function(){var t={s:0,m:0,h:0,d:0,mn:0,y:0},n=Math.floor(((new Date).getTime()-function(e){var t=Date.parse(e);return isNaN(t)?"string"==typeof e?Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," ")):e:t}(e.time)+6e4*(new Date).getTimezoneOffset())/1e3);n>31536e3&&(t.y=Math.floor(n/31536e3),n-=86400*t.y*365),n>2592e3&&(t.mn=Math.floor(n/2592e3),n-=86400*t.mn*30),n>604800&&(t.w=Math.floor(n/604800),n-=86400*t.w*7),n>86400&&(t.d=Math.floor(n/86400),n-=86400*t.d),n>3600&&(t.h=Math.floor(n/3600),n-=3600*t.h),n>60&&(t.m=Math.floor(n/60),n-=60*t.m),t.s=n,a(t)};return wp.element.createElement("div",{className:"datetime"},r.y||r.mn||r.w||r.d||r.h||r.m?"":window.vibebp.translations.justnow,r.y?wp.element.createElement("span",{className:"years"},r.y," ",r.y>1?window.vibebp.translations.years:window.vibebp.translations.year):"",r.mn?wp.element.createElement("span",{className:"months"},r.mn," ",r.mn>1?window.vibebp.translations.months:window.vibebp.translations.month):"",r.w?wp.element.createElement("span",{className:"weeks"},r.w," ",r.w>1?window.vibebp.translations.weeks:window.vibebp.translations.week):"",r.d?wp.element.createElement("span",{className:"days"},r.d," ",r.d>1?window.vibebp.translations.days:window.vibebp.translations.day):"",r.h?wp.element.createElement("span",{className:"hours"},r.h," ",r.h>1?window.vibebp.translations.hours:window.vibebp.translations.hour):"",r.m?wp.element.createElement("span",{className:"minutes"},r.m," ",r.m>1?window.vibebp.translations.minutes:window.vibebp.translations.minute):"")}),Ja=function(e){var t=Ia(Da(e.timestamp),2),n=(t[0],t[1]),r=Ia(Da(0),2),a=r[0],i=r[1];Ma((function(){n(e.timestamp),i(Math.floor(Date.now()/1e3)-parseInt(e.timestamp))}),[e.timestamp]);return wp.element.createElement("span",{className:"friendly_time"},function(){var e,t,n,r=0,i=0,o=0,l=[{label:"year",multi:"years",value:94608e4},{label:"month",multi:"months",value:2592e3},{label:"week",multi:"weeks",value:604800},{label:"day",multi:"days",value:86400},{label:"hour",multi:"hours",value:3600},{multi:"minutes",value:60},{label:"second",multi:"seconds",value:1}];if(a<=0)return"expired";for(var c=0;c<l.length;c++)if(i=c,(t=l[c]).value<a){r=Math.floor(a/t.value);break}return e=r+" "+(r>=1?t.multi:t.label),t.value>1&&(n=l[i+1],(o=Math.floor(a%t.value/n.value))&&(e+=", "+o+" "+(o>1?n.multi:n.label))),e}())};function Ua(e){return function(e){if(Array.isArray(e))return Ha(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Fa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Fa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(e,t){if(e){if("string"==typeof e)return Ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ha(e,t):void 0}}function Ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qa=wp.element,za=(qa.createElement,qa.useState),$a=qa.useEffect,Ba=(qa.Fragment,qa.render,wp.data),Wa=(Ba.dispatch,Ba.select,function(e){var t=Ra(za({}),2),n=t[0],r=t[1],a=Ra(za([]),2),i=a[0],o=a[1],l=Ra(za([]),2),c=l[0],s=l[1];$a((function(){r(e.reactions),s("all")}),[e.reactions]),$a((function(){"all"==c?u():o(n[c])}),[c]);var u=function(){var t=[];Object.keys(e.reactions).map((function(n){t=[].concat(Ua(t),Ua(e.reactions[n]))})),o(t)};return n&&Object.keys(n).length?wp.element.createElement("div",{className:"rec-overviews"},wp.element.createElement("div",{className:"tabs"},wp.element.createElement("div",{className:"tab "+("all"===c?"active":""),onClick:function(){s("all")}},window.vibebp.translations.all),Object.keys(n).map((function(e){return wp.element.createElement("div",{className:"tab "+(c===e?"active":""),onClick:function(){s(e)}},wp.element.createElement("img",{src:window.vibebp.settings.reactions[e].icon}),wp.element.createElement("span",null,n[e].length))}))),i&&i.length?wp.element.createElement("div",{className:"users"},wp.element.createElement(Bn,{user_ids:i},i.map((function(e){return wp.element.createElement($n,{type:"member",id:{user_id:e}})})))):""):""});function Va(e){return function(e){if(Array.isArray(e))return Qa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ya(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(n),!0).forEach((function(t){Ka(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Ya(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ya(e,t){if(e){if("string"==typeof e)return Qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qa(e,t):void 0}}function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ei=wp.element,ti=(ei.createElement,ei.useState),ni=ei.useEffect,ri=(ei.Fragment,ei.render,wp.data),ai=ri.dispatch,ii=ri.select,oi=function(e){var t=Xa(ti([]),2),n=t[0],r=t[1],a=Xa(ti({search:"",page:1}),2),i=a[0],o=a[1],l=Xa(ti(!1),2),c=l[0],s=l[1],m=Xa(ti(!0),2),p=m[0],d=m[1],f=Xa(ti(null),2),b=f[0],v=f[1],w=Xa(ti(!1),2),y=w[0],g=w[1];ni((function(){e.hasOwnProperty("media")&&o(Za(Za({},i),{},{meta_key:e.media.url}))}),[e.type]);var h=function(){o(Za(Za({},i),{},{page:1}))};ni((function(){return document.addEventListener("vibebp_component_reload",h),function(){document.removeEventListener("vibebp_component_reload",h)}})),u((function(){if(Object.keys(i).length){var e=Za({},i);e.token=ii("vibebp").getToken(),b&&b.abort();var t={},a=new AbortController;b&&(t={signal:a.signal}),v(a),d(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.search.length?"nocache":encodeURIComponent(JSON.stringify(Za(Za({},i),{},{search:""}))),"&force"),Za(Za({method:"post"},t),{},{headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(e)})).then((function(e){return e.json()})).then((function(e){if(d(!1),e.status){var t=[];y?(t=Va(n),e.data.activities.map((function(e){t.push(e)})),g(!1)):t=e.data.activities,r(t),s(e.data.has_more_items)}else e.hasOwnProperty("message")&&ai("vibebp").addNotification({text:e.message})}))}}),500,[i]);var _,E,O=function(e,t){var a=Va(n),o="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(encodeURIComponent(JSON.stringify(Za(Za({},i),{},{search:""}))));if("remove"===t||"remove-favorite"==t&&"activity-favs"==i.filter){var l=Va(n),c=l.findIndex((function(t){return t.id===e.id}));if(-1!==c&&(console.log(c),l.splice(c,1),r(l),!i.search.length)){"".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(encodeURIComponent(JSON.stringify(Za(Za({},i),{},{search:""}))));localforage.getItem(o).then((function(e){var t=JSON.parse(e);t.data.activities=l,localforage.setItem(o,JSON.stringify(t))}))}}"update"==t&&(a[a.findIndex((function(t){return t.id==e.id}))]=e,i.search.length||localforage.getItem(o).then((function(e){var t=JSON.parse(e);t.data.activities=a,localforage.setItem(o,JSON.stringify(t))})))},j=Va(n);return i.hasOwnProperty("search")&&i.search.length&&(j=n.filter((function(e){return e.action.indexOf(i.search)>-1||e.content.indexOf(i.search)>-1}))),i.hasOwnProperty("sorter")&&i.sorter.length&&(j=n.filter((function(e){return e.type==i.sorter>-1}))),wp.element.createElement("div",{className:"media_popup"},wp.element.createElement("div",{className:"left_side"},(_=e.media.type,E=e.media.url,"image"==_?wp.element.createElement("img",{src:E,className:"activity_meta image"}):"video"==_?wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{className:"activity_meta video",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:E,type:"video/mp4"}))):"audio"==_?wp.element.createElement("audio",{className:"activity_meta audio",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:E,type:"audio/mp3"})):"attachment"==_?wp.element.createElement("a",{href:E,target:"_blank",className:"vicon vicon-clip activity_meta"}):void 0)),wp.element.createElement("div",{className:"right_side"},wp.element.createElement("div",{className:"vibebp_main"},e.canpost?wp.element.createElement(Aa,{component:e.type,id:e.id,update:function(e,t){var a=Va(n),o="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(encodeURIComponent(JSON.stringify(Za(Za({},i),{},{search:""}))));"add"===t&&(a.unshift(e),r(a),i.search.length||localforage.getItem(o).then((function(e){var t=JSON.parse(e);t.data.activities=a,localforage.setItem(o,JSON.stringify(t))}))),"update"==t&&(a[a.findIndex((function(t){return t.id==e.id}))]=e,i.search.length||localforage.getItem(o).then((function(e){var t=JSON.parse(e);t.data.activities=a,localforage.setItem(o,JSON.stringify(t))})))},is_child:!0,media:e.media}):"",wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_body"},p&&!j.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",j.length?wp.element.createElement("div",{className:"activity_list"},j.map((function(t){return wp.element.createElement(Ci,{activity:t,rootActivityId:t.id,update:O,media:e.media})}))):p?"":wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found),p&&j.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",c?wp.element.createElement("a",{className:"link",onClick:function(){var e=Za({},i);e.page=i.page+1,g(!0),o(e)}},window.vibebp.translations.more):"")))))};function li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ci(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ci(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var si=wp.element,ui=(si.createElement,si.useState),mi=si.useEffect,pi=si.Fragment,di=(si.render,wp.data),fi=di.dispatch,bi=di.select,vi=function(e){var t=li(ui(!1),2),n=t[0],r=t[1];mi((function(){}),[e.activity]);var a=function(t){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/report?post"),{method:"post",body:JSON.stringify({activity:e.activity,token:bi("vibebp").getToken(),type:t})}).then((function(e){return e.json()})).then((function(t){t.status&&(e.update(e.activity),fi("vibebp").addNotification({text:t.message}))}))};return n?wp.element.createElement(pi,null,wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){r(!1)}}),wp.element.createElement("div",{className:"reporting_wrap"},wp.element.createElement("h3",null,window.vibebp.translations.report_post),wp.element.createElement("div",{className:"spam",onClick:function(){a("spam")}},wp.element.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.its_spam),wp.element.createElement("div",{className:"inapproporiate",onClick:function(){a("inappropriate")}},wp.element.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.its_inappropriate))):wp.element.createElement("div",{className:"reporting_wrap"},wp.element.createElement("h3",null,window.vibebp.translations.post_actions),wp.element.createElement("div",{className:"hide_post",onClick:function(){a("hide")}},wp.element.createElement("span",{className:"vicon vicon-close"}),window.vibebp.translations.hide_post),wp.element.createElement("div",{className:"report_post",onClick:function(){r(!0)}},wp.element.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.report_post))};function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){hi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _i(e){return function(e){if(Array.isArray(e))return ji(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Oi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Oi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oi(e,t){if(e){if("string"==typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ji(e,t):void 0}}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Si=wp.element,Ni=(Si.createElement,Si.useState),ki=Si.useEffect,Pi=Si.Fragment,xi=(Si.render,wp.data),Ai=xi.dispatch,Ii=xi.select,Ci=function e(t){var n=Ei(Ni({}),2),r=n[0],a=n[1],i=Ei(Ni(!1),2),o=i[0],l=i[1],c=Ei(Ni(!1),2),s=c[0],u=c[1],m=Ei(Ni([]),2),p=m[0],d=m[1],f=Ei(Ni(!1),2),b=f[0],v=f[1],w=Ei(Ni(!1),2),y=w[0],g=w[1],h=Ei(Ni(!1),2),_=h[0],E=h[1];ki((function(){a(t.activity),localforage.getItem("favorite_activities_"+Ii("vibebp").getUser().id).then((function(e){e&&(e=JSON.parse(e),u(e))})),localforage.getItem("liked_activities_"+Ii("vibebp").getUser().id).then((function(e){e&&(e=JSON.parse(e),d(e))}))}),[t.activity]);var O=function(e,n){var i=gi({},r);if("add"===n&&(i.children?i.children[Object.keys(i.children).length]=e:("object"===wi(i.children)&&null!==i.children||(i.children={}),i.children[0]=e),l(!1),a(i)),"remove"===n){var o=Object.keys(i.children).findIndex((function(t){return i.children[t].id===e.id}));-1!==o&&(delete i.children[o],a(i))}if("update"===n){var c=Object.keys(i.children).findIndex((function(t){return i.children[t].id===e.id}));-1!==c&&(i.children[c]=e,a(i),t.update(i,"update"))}"cancel"===n&&l(!1)},j="activity_item "+r.type+" "+r.component;return r.hasOwnProperty("content")&&r.content.length&&(j+=" with_activity_content"),wp.element.createElement("div",{className:j,"data-activity-id":r.id},wp.element.createElement("div",{className:"activity_avatar"},wp.element.createElement("img",{src:r.avatar})),wp.element.createElement("div",{className:"activity_body"},wp.element.createElement("div",{className:"activity_header"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:r.action}}),wp.element.createElement("span",{className:"vicon vicon-more",onClick:function(){E(!0)}})),r.hasOwnProperty("content")&&r.content.length?wp.element.createElement("div",{className:"activity_content"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:r.content}}),wp.element.createElement("div",{className:"activity_attachments"},r.hasOwnProperty("meta")&&Object.keys(r.meta).length?Object.keys(r.meta).map((function(e){return wp.element.createElement(Pi,null,r.meta[e].map((function(t){if(t&&t.length>3)return wp.element.createElement("div",{className:"media_file",onClick:function(){v({type:e,url:t,activity:r})}},function(e,t){return"image"==e?wp.element.createElement("img",{src:t,className:"activity_meta image"}):"video"==e?wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{className:"activity_meta video",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:t,type:"video/mp4"}))):"audio"==e?wp.element.createElement("audio",{className:"activity_meta audio",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:t,type:"audio/mp3"})):"attachment"==e?wp.element.createElement("a",{href:t,target:"_blank",className:"vicon vicon-clip activity_meta"}):void 0}(e,t))})))})):"")):"",wp.element.createElement(La,{time:r.date_recorded}),t.hasOwnProperty("noedit")?"":wp.element.createElement(Pi,null,window.vibebp.settings.enable_reactions&&r.hasOwnProperty("reactions")&&r.reactions&&Object.keys(r.reactions).length?wp.element.createElement("div",{className:"reactions-overview",onClick:function(){g(r.reactions)}},function(e){var t=0,n=[];return Object.keys(e.reactions).map((function(r){t+=e.reactions[r].length,n.push(wp.element.createElement("img",{src:window.vibebp.settings.reactions[r].icon}))})),n.push(wp.element.createElement("span",{className:"count"},t)),n}(r)):"",Ii("vibebp").getData("activityPostPermissions")?wp.element.createElement("div",{className:"activity_actions"},window.vibebp.settings.enable_reactions?wp.element.createElement("div",{className:"reactions-container"},wp.element.createElement("div",{className:"my-reaction"},r.my_reaction&&r.my_reaction.length?wp.element.createElement("img",{src:window.vibebp.settings.reactions[r.my_reaction].icon}):wp.element.createElement("strong",{className:"vicon vicon-thumb-up"})),wp.element.createElement("div",{className:"reactions"},window.vibebp.settings.reactions&&Object.keys(window.vibebp.settings.reactions).length?Object.keys(window.vibebp.settings.reactions).map((function(e,t){return wp.element.createElement("div",{className:"reaction",onClick:function(){!function(e,t){var n=gi({},r);if(!Ii("vibebp").getToken()||!Ii("vibebp").getToken().length)return document.dispatchEvent(new Event("vibebp_show_login_popup")),!1;var i=0;n.hasOwnProperty("reactions")||(n.reactions={}),n.reactions.hasOwnProperty(e)||(n.reactions[e]=[]),n.hasOwnProperty("my_reaction")&&n.my_reaction?(i=n.my_reaction,n.my_reaction===e?(delete n.my_reaction,n.reactions[e].splice(n.reactions[e].findIndex((function(e){return e===Ii("vibebp").getUser().id})),1)):(n.my_reaction=e,n.reactions[e].push(Ii("vibebp").getUser().id)),n.reactions[i].splice(n.reactions[i].findIndex((function(e){return e===Ii("vibebp").getUser().id})),1),n.reactions[i].length<1&&delete n.reactions[i]):(n.my_reaction=e,n.reactions[e].push(Ii("vibebp").getUser().id)),a(n),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/reaction?post"),{method:"post",body:JSON.stringify({activity:n,old:i,token:Ii("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&Ai("vibebp").addNotification({text:e.message})}))}(e)}},wp.element.createElement("img",{src:window.vibebp.settings.reactions[e].icon}),wp.element.createElement("span",{className:"label"},window.vibebp.settings.reactions[e].label))})):"")):window.vibebp.settings.likes?wp.element.createElement("a",{className:-1===p.indexOf(r.id)?"vicon vicon-thumb-up":"vicon vicon-thumb-up filled",onClick:function(){var e=[],n=-1;p&&(e=_i(p),n=p.indexOf(r.id));var a="add-like";-1===n?e.push(r.id):(a="remove-like",t.update(r,"remove-like"),e.splice(n,1)),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/").concat(a,"?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({activity_id:r.id,token:Ii("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("message")&&Ai("vibebp").addNotification({text:t.message}),localforage.setItem("liked_activities_"+Ii("vibebp").getUser().id,JSON.stringify(e))})),d(e)}}):"",wp.element.createElement("a",{className:r.hasOwnProperty("children")&&r.children?"vicon vicon-comment-alt":"vicon vicon-comment",onClick:function(){l(!o)}}),wp.element.createElement("a",{className:s&&-1!==s.indexOf(r.id)?"vicon vicon-star filled":"vicon vicon-star",onClick:function(){if(!Ii("vibebp").getToken()||!Ii("vibebp").getToken().length)return document.dispatchEvent(new Event("vibebp_show_login_popup")),!1;var e=[],n=-1;s&&(e=_i(s),n=s.indexOf(r.id));var a="add-favorite";-1===n?e.push(r.id):(a="remove-favorite",t.update(r,"remove-favorite"),e.splice(n,1)),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/").concat(a),{method:"post",body:JSON.stringify({activity_id:r.id,token:Ii("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("message")&&Ai("vibebp").addNotification({text:t.message}),localforage.setItem("favorite_activities_"+Ii("vibebp").getUser().id,JSON.stringify(e)),u(e)}))}}),r.hasOwnProperty("user_id")&&parseInt(r.user_id)===parseInt(Ii("vibebp").getUser().id)?wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/remove?post"),{method:"post",body:JSON.stringify({activity_id:r.id,parent_id:t.rootActivityId,token:Ii("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&Ai("vibebp").addNotification({text:e.message}),t.update(r,"remove")}))}}):""):"",o?wp.element.createElement(Aa,{activity_id:t.rootActivityId,update:O,comment_id:r.id,media:t.media,is_child:!0}):""),r.hasOwnProperty("children")&&r.children?wp.element.createElement("div",{class:"activity_list"},Object.keys(r.children).map((function(n){return wp.element.createElement(e,{activity:r.children[n],rootActivityId:t.rootActivityId,update:O,media:t.media})}))):""),wp.element.createElement(aa,{open:b,onClose:function(){return v(!1)}},wp.element.createElement(oi,{media:b,type:r.type,canpost:Ii("vibebp").getData("activityPostPermissions")})),wp.element.createElement(aa,{open:y,onClose:function(){return g(!1)}},wp.element.createElement(Wa,{reactions:y})),wp.element.createElement(aa,{open:_,onClose:function(){return E(!1)}},wp.element.createElement(vi,{activity:r,update:function(e){console.log(e),t.update(e,"remove"),E(!1)}})))};function Ti(e){return function(e){if(Array.isArray(e))return Ri(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ui(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Li(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ji(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Ui(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ui(e,t){if(e){if("string"==typeof e)return Ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ri(e,t):void 0}}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fi=wp.element,Hi=(Fi.createElement,Fi.useState),qi=Fi.useEffect,zi=(Fi.Fragment,Fi.render,wp.data),$i=zi.dispatch,Bi=zi.select,Wi=function(e){var t=Ji(Hi([]),2),n=t[0],r=t[1],a=Ji(Hi({}),2),i=a[0],o=a[1],l=Ji(Hi(!1),2),c=l[0],s=l[1],m=Ji(Hi(!0),2),p=m[0],d=m[1],f=Ji(Hi(null),2),b=f[0],v=f[1],w=Ji(Hi(!1),2),y=w[0],g=w[1],h=Ji(Hi([]),2),_=h[0],E=h[1],O=Ji(Hi(!1),2),j=O[0],S=O[1];qi((function(){var t={search:"",sorter:"",page:1};"personal"===e.type&&(t.filter="just-me"),"public"===e.type&&(t.filter="public"),e.hasOwnProperty("user_id")&&(t.user_id=e.user_id),e.hasOwnProperty("id")&&(t.id=e.id),"groups"===e.type&&(t.filter="groups"),"course"===e.type&&(t.filter="course"),e.hasOwnProperty("filter")&&(t.filter=e.filter),e.hasOwnProperty("secondary_item_id")&&(t.secondary_item_id=e.secondary_item_id),o(t);var n=[];"public"===e.type?n.push({class:["menu-child"],css_id:"activity-likes",name:window.vibebp.translations.liked,parent:"activity"}):(n=Bi("vibebp").getMenu().filter((function(e){return"activity"===e.parent_slug})),window.vibebp.settings.followers&&n.push({class:["menu-child"],css_id:"activity-following",name:window.vibebp.translations.following,parent:"activity"}),window.vibebp.settings.likes&&n.push({class:["menu-child"],css_id:"activity-likes",name:window.vibebp.translations.liked,parent:"activity"}),window.vibebp.settings.enable_reactions&&(n.push({class:["menu-child"],css_id:"public",name:window.vibebp.translations.wall,parent:"activity"}),n.push({class:["menu-child"],css_id:"reported",name:window.vibebp.translations.reported,parent:"activity"})),n.map((function(e,t){if(-1===n.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))){n[t].class.push("current-menu-item");var r=new CustomEvent("action_loaded",{detail:{component:window.vibebp.api.endpoints.activity,action:n[t].class}});document.dispatchEvent(r)}})));var r=Bi("vibebp").getUser();r&&r.hasOwnProperty("caps")&&r.caps.hasOwnProperty("manage_options")&&n.push({class:["menu-child"],css_id:"all_activity",name:window.vibebp.translations.site_activity,parent:"activity"}),n.map((function(e,t){e.hasOwnProperty("caps")&&(r.caps.hasOwnProperty(e.caps)||n.splice(t,1))})),E(n),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar"),P()}),[e.type]);var N=function(){o(Mi(Mi({},i),{},{page:1}))};qi((function(){return document.addEventListener("vibebp_component_reload",N),function(){document.removeEventListener("vibebp_component_reload",N)}})),u((function(){if(Object.keys(i).length){var t=Mi({},i);t.token=Bi("vibebp").getToken(),e.hasOwnProperty("token")&&e.token.length&&(t.token=e.token),b&&b.abort();var a={},o=new AbortController;b&&(a={signal:o.signal}),v(o),d(!0);var l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Mi(Mi({},i),{},{search:""}))),"&force");"public"===e.type&&e.hasOwnProperty("user_id")&&(l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.public_activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Mi(Mi({},i),{},{search:""}))),"&force&client_id=").concat(window.vibebp.settings.client_id)),fetch(l,Mi(Mi({method:"post"},a),{},{headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(t)})).then((function(e){return e.json()})).then((function(e){if(d(!1),e.status){var t=[];if(y)t=Ti(n),e.data.activities.map((function(e){t.push(e)})),g(!1);else{if("activity-favs"===i.filter){var a=[];localforage.getItem("favorite_activities_"+Bi("vibebp").getUser().id).then((function(t){t&&((t=JSON.parse(t))&&t.length&&(a=Ti(t)),e.data.activities.map((function(e){-1===a.indexOf(e.id)&&a.push(e.id)})),localforage.setItem("favorite_activities_"+Bi("vibebp").getUser().id,JSON.stringify(a)))}))}if("activity-likes"===i.filter){var o=[];localforage.getItem("liked_activities_"+Bi("vibebp").getUser().id).then((function(t){t&&((t=JSON.parse(t))&&t.length&&(o=Ti(t)),e.data.activities.map((function(e){-1===o.indexOf(e.id)&&o.push(e.id)})),localforage.setItem("liked_activities_"+Bi("vibebp").getUser().id,JSON.stringify(o)))}))}t=e.data.activities}r(t),s(e.data.has_more_items)}else e.hasOwnProperty("message")&&$i("vibebp").addNotification({text:e.message})}))}}),500,[i]);var k=function(t,a){var o=Ti(n),l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Mi(Mi({},i),{},{search:""}))),"&force");if("public"===e.type&&e.hasOwnProperty("user_id")&&(l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.public_activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Mi(Mi({},i),{},{search:""}))),"&force&client_id=").concat(window.vibebp.settings.client_id)),"remove"===a||"remove-favorite"==a&&"activity-favs"==i.filter){var c=Ti(n),s=c.findIndex((function(e){return e.id===t.id}));if(-1!==s&&(console.log(s),c.splice(s,1),r(c),!i.search.length)){"".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(encodeURIComponent(JSON.stringify(Mi(Mi({},i),{},{search:""}))));localforage.getItem(l).then((function(e){var t=JSON.parse(e);t.data.activities=c,localforage.setItem(l,JSON.stringify(t))}))}}"update"==a&&(o[o.findIndex((function(e){return e.id==t.id}))]=t,i.search.length||localforage.getItem(l).then((function(e){var t=JSON.parse(e);t.data.activities=o,localforage.setItem(l,JSON.stringify(t))})))},P=function(){var t=!1;$i("vibebp").setData("wallUserId",0),$i("vibebp").setData("activityPostPermissions",!1),Bi("vibebp").getToken()&&Bi("vibebp").getToken().length?e.hasOwnProperty("user_id")&&e.user_id?(S(!1),fetch("".concat(window.vibebp.api.url,"/wall/whocanpost/check?force"),{method:"post",body:JSON.stringify({token:Bi("vibebp").getToken(),user_id:e.user_id})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("value")&&$i("vibebp").setData("activityPostPermissions",e.value),S(!0)})),$i("vibebp").setData("wallUserId",e.user_id)):(t=!0,$i("vibebp").setData("activityPostPermissions",t),S(!0)):(t=!1,$i("vibebp").setData("activityPostPermissions",t),S(!0))},x=Ti(n);return i.hasOwnProperty("search")&&i.search.length&&(x=n.filter((function(e){return e.action.indexOf(i.search)>-1||e.content.indexOf(i.search)>-1}))),i.hasOwnProperty("sorter")&&i.sorter.length&&(x=n.filter((function(e){return e.type==i.sorter>-1}))),wp.element.createElement("div",{className:"vibebp_sidebars"},"personal"===e.type?wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,"public"===e.type?window.vibebp.components.wall:window.vibebp.components.activity.label),_.map((function(e,t){return wp.element.createElement("a",{className:e.class.join(" "),onClick:function(n){var r=Mi({},i);r.filter=e.css_id,r.page=1,o(r);var a=Ti(_),l=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[l].class.splice(a[l].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),E(a)}},e.name)})))):"","public"!==e.type||e.hasOwnProperty("user_id")?"":wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,"public"===e.type?window.vibebp.components.wall.label:window.vibebp.components.activity.label),_.map((function(e,t){return wp.element.createElement("a",{className:e.class.join(" "),onClick:function(n){var r=Mi({},i);r.filter=e.css_id,r.page=1,o(r);var a=Ti(_),l=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));l>-1&&a[l].class.splice(a[l].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),E(a)}},e.name)})))),j?wp.element.createElement("div",{className:"vibebp_main"},Bi("vibebp").getData("activityPostPermissions")?wp.element.createElement(Aa,{component:e.type,id:e.id,secondary_item_id:e.secondary_item_id,update:function(t,a){var o=Ti(n),l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Mi(Mi({},i),{},{search:""}))),"&force");"public"===e.type&&e.hasOwnProperty("user_id")&&(l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.public_activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Mi(Mi({},i),{},{search:""}))),"&force&client_id=").concat(window.vibebp.settings.client_id)),"add"===a&&(o.unshift(t),r(o),i.search.length||localforage.getItem(l).then((function(e){var t=JSON.parse(e);t&&(t.data.activities=o,localforage.setItem(l,JSON.stringify(t)))}))),"update"==a&&(o[o.findIndex((function(e){return e.id==t.id}))]=t,i.search.length||localforage.getItem(l).then((function(e){var t=JSON.parse(e);t.data.activities=o,localforage.setItem(l,JSON.stringify(t))})))}}):"",wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:function(e){var t=Mi({},i);t.search=e.target.value,t.page=1,o(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){return t=e.target.value,void o(Mi(Mi({},i),{},{sorter:t}));var t}},Object.keys(window.vibebp.components.activity.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.activity.sorters[e])}))))),wp.element.createElement("div",{className:"portal_body"},p&&!x.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",x.length?wp.element.createElement("div",{className:"activity_list"},x.map((function(e){return wp.element.createElement(Ci,{activity:e,rootActivityId:e.id,update:k})}))):p?"":wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found),p&&x.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",c?wp.element.createElement("a",{className:"link",onClick:function(){var e=Mi({},i);e.page=i.page+1,g(!0),o(e)}},window.vibebp.translations.more):""))):"")};function Vi(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Gi(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Vi(i,r,a,o,l,"next",e)}function l(e){Vi(i,r,a,o,l,"throw",e)}o(void 0)}))}}function Zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ki(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xi=wp.element,Yi=(Xi.createElement,Xi.useState),Qi=Xi.useEffect,eo=(Xi.Fragment,Xi.render,wp.data),to=eo.dispatch,no=eo.select,ro=window.vibebp.settings.google_play_payment_method,ao=function(e){var t=Zi(Yi(""),2),n=(t[0],t[1],Zi(Yi([]),2)),r=n[0],a=n[1],i=Zi(Yi(0),2),o=i[0],l=i[1],c=Zi(Yi(!1),2),s=c[0],u=c[1];function m(){return(m=Gi(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),e.prev=1,!window.getDigitalGoodsService){e.next=14;break}return e.next=5,window.getDigitalGoodsService(ro);case 5:return service=e.sent,e.next=8,service.getDetails(t);case 8:details=e.sent,console.log("ko ran",details),a(details),u(!1),e.next=16;break;case 14:console.log("window doesn't have getDigitalGoodsService."),u(!1);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),u(!1);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}function p(){return(p=Gi(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.getDigitalGoodsService){e.next=10;break}return e.next=4,window.getDigitalGoodsService(ro);case 4:return n=e.sent,e.next=7,n.consume(t);case 7:console.log("Purchase acknowledged."),e.next=11;break;case 10:console.log("window doesn't have getDigitalGoodsService.");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}Qi((function(){window.vibebp.settings.google_play_products&&Object.keys(window.vibebp.settings.google_play_products).length&&function(e){m.apply(this,arguments)}(Object.keys(window.vibebp.settings.google_play_products)),fetch("".concat(window.vibebp.api.url,"/wallet/?force"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:no("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("amount")&&l(e.amount)}))}),[]);var d=function(e,t){e&&e.details.hasOwnProperty("purchaseToken")&&fetch("".concat(window.vibebp.api.url,"/wallet/update?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:no("vibebp").getToken(),response:e,sku:t,status:"credit",store:"google"})}).then((function(e){return e.json()})).then((function(t){t.status&&(t.hasOwnProperty("points")&&l(t.points),function(e){p.apply(this,arguments)}(e.details.purchaseToken)),t.hasOwnProperty("message")&&to("vibebp").addNotification({text:t.message,icon:"vicon vicon-save"})}))};return wp.element.createElement("div",{className:"balance_wrap"},wp.element.createElement("div",{className:"balance"},wp.element.createElement("span",null,o),wp.element.createElement("span",null,window.vibebp.translations.credits)),wp.element.createElement("div",{className:"products"},s?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):r.length?r.map((function(e){return wp.element.createElement("div",{className:"product",onClick:function(){!function(e){if(window.PaymentRequest){var t=new PaymentRequest([{supportedMethods:ro,data:{sku:e}}],{total:{label:"Total",amount:{currency:"GBP",value:"0"}}});t.canMakePayment&&t.canMakePayment().then((function(e){console.log(e?"Can make payment":"Cannot make payment")})).catch((function(e){console.log(e.message)})),t.hasEnrolledInstrument&&t.hasEnrolledInstrument().then((function(r){r?console.log("Has enrolled instrument"):console.log("No enrolled instrument"),t.show().then((function(t){n(t,e)})).catch((function(e){console.log(e),console.log("Maybe you've already purchased the item.")}))})).catch((function(r){console.log(r.message),t.show().then((function(t){n(t,e)})).catch((function(e){console.log(JSON.stringify(e,void 0,2)),console.log(e)}))}))}else console.log("No PaymentRequest object.");function n(e,t){window.setTimeout((function(){e.complete("success").then((function(){console.log("Payment done: ".concat(JSON.stringify(e,void 0,2))),d(e,t)})).catch((function(t){console.log(t.message),console.log(JSON.stringify(e,void 0,2))}))}),500)}}(e.itemId)}},wp.element.createElement("img",{src:window.vibebp.settings.coin_image}),wp.element.createElement("h3",null,e.title),wp.element.createElement("p",null,e.description),wp.element.createElement("span",null,Number.parseFloat(e.price.value).toFixed(2)," ",e.price.currency))})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_products)))};function io(e){return function(e){if(Array.isArray(e))return mo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||uo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(n),!0).forEach((function(t){co(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function so(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||uo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(e,t){if(e){if("string"==typeof e)return mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mo(e,t):void 0}}function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var po=wp.element,fo=(po.createElement,po.useState),bo=po.useEffect,vo=(po.Fragment,po.render,wp.data),wo=(vo.dispatch,vo.select),yo=function(e){var t=so(fo([]),2),n=t[0],r=t[1],a=so(fo({per_page:20,paged:1}),2),i=a[0],o=a[1],l=so(fo(0),2),c=l[0],s=l[1],u=so(fo(0),2),m=u[0],p=u[1];return bo((function(){p(!0),fetch("".concat(window.vibebp.api.url,"/wallet/transactions?force"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(lo({token:wo("vibebp").getToken()},i))}).then((function(e){return e.json()})).then((function(e){if(e.status){e.total&&s(e.total);var t=[];e.data.length&&(t=[].concat(io(n),io(e.data))),r(t),p(!1)}}))}),[i]),wp.element.createElement("div",{className:"transactions_wrap"},m&&!n.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",n.length?n.map((function(e){return wp.element.createElement("div",{className:"transaction "+e.action},wp.element.createElement("div",{className:"amount"},e.amount),wp.element.createElement("div",{className:"details"},e.content,wp.element.createElement("div",{className:"time"},wp.element.createElement(La,{time:e.date_recorded}))))})):m?"":wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_transactions_found),m?n.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"":c>n.length?wp.element.createElement("a",{className:"link",onClick:function(){o(lo(lo({},i),{},{paged:i.paged+1}))}},window.vibebp.translations.load_more):"")};function go(e){return function(e){if(Array.isArray(e))return Eo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||_o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){if(e){if("string"==typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(e,t):void 0}}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oo=wp.element,jo=(Oo.createElement,Oo.useState),So=Oo.useEffect,No=(Oo.Fragment,Oo.render,wp.data),ko=(No.dispatch,No.select),Po=function(e){var t=ho(jo([]),2),n=t[0],r=t[1],a=ho(jo(""),2),i=a[0],o=a[1];return So((function(){var e=ko("vibebp").getMenu().filter((function(e){return"wallet"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&(e[n].class.push("current-menu-item"),o(e[n].css_id))})),r(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.wallet.label),n.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){o(e.css_id);var i=go(n),l=i.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));i[l].class.splice(i[l].class.indexOf("current-menu-item"),1),i[t].class.push("current-menu-item"),r(i)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"balance"===i?wp.element.createElement(ao,null):wp.element.createElement(yo,null)))};function xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach((function(t){Io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return To(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return To(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Do=wp.element,Mo=(Do.createElement,Do.useState),Lo=Do.useEffect,Jo=(Do.Fragment,Do.render,wp.data),Uo=(Jo.dispatch,Jo.select),Ro=function(e){var t=Co(Mo(!1),2),n=t[0],r=t[1],a=Co(Mo(""),2),i=a[0],o=a[1];Lo((function(){l()}),[]);var l=function(){r(!0);var t={token:Uo("vibebp").getToken()};e.hasOwnProperty("id")&&(t.id=e.id),r(!0),fetch("".concat(window.vibebp.api.url,"/profile/").concat(e.hasOwnProperty("user_id")?"?"+e.hasOwnProperty("user_id"):""),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(Ao({token:Uo("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){r(!1),o(e)}))};return Lo((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}})),wp.element.createElement("div",{className:"user_profile"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:i}}))};function Fo(){return(Fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ho(Object(n),!0).forEach((function(t){zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wo=wp.element,Vo=(Wo.createElement,Wo.useState),Go=Wo.useEffect,Zo=Wo.Fragment,Ko=(Wo.render,wp.data),Xo=(Ko.dispatch,Ko.select),Yo=function(e){var t=$o(Vo(!1),2),n=t[0],r=t[1],a=$o(Vo({avatar:{},groups:[],fields:[],cover:{}}),2),i=a[0],o=a[1];Go((function(){-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),Go((function(){console.log(e.user_id,"USER ID"),l()}),[e.user_id]);var l=function(){r(!0),console.log("reseding api"),fetch("".concat(window.vibebp.api.url,"/xprofile/allfields").concat(e.hasOwnProperty("user_id")?"?"+e.user_id+"&force":""),{method:"post",body:JSON.stringify(qo({token:Xo("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status){var t=qo({},i);t.groups=e.groups,t.fields=e.fields,o(t)}}))};Go((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}}),[]);return wp.element.createElement("div",{className:"edit_profile"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(Zo,null,i.groups.length?i.groups.map((function(t){if(i.fields.filter((function(e){return e.group_id==t.id})).length)return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,t.name)),wp.element.createElement("div",{className:"portal_body"},i.fields.filter((function(e){return e.group_id==t.id})).length?wp.element.createElement("ul",{className:"vibebp_form"},i.fields.filter((function(e){return e.group_id==t.id})).map((function(t,n){return wp.element.createElement(gn,Fo({field:t},e,{update:function(t){return function(t){var n=qo({},i),r=n.fields.findIndex((function(e){return e.id===t.id}));r>-1&&(n.fields[r]=qo({},t),e.update&&e.update(n))}(t)}}))}))):""))})):""))};function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(n),!0).forEach((function(t){tl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var al=wp.element,il=(al.createElement,al.useState),ol=al.useEffect,ll=al.useRef,cl=al.Fragment,sl=(al.render,wp.data),ul=(sl.dispatch,sl.select),ml=Math.round(100*Math.random()),pl=function(e){var t=ll(null),n=ll(null),r=ll(null),a=nl(il(!0),2),i=a[0],o=a[1],l=nl(il(!1),2),c=l[0],s=l[1],u=nl(il(""),2),m=u[0],p=u[1],d=nl(il(""),2),f=(d[0],d[1],nl(il(""),2)),b=(f[0],f[1],nl(il(!1),2)),v=b[0],w=b[1],y=nl(il(""),2),g=(y[0],y[1],nl(il({x:0,y:0,width:0,height:0,type:"image"}),2)),h=g[0],_=g[1],E=nl(il(window.vibebp.translations.select_image),2),O=E[0],j=E[1];ol((function(){if(c){var e=n.current;new Croppr(e,{aspectRatio:1,returnMode:"raw",maxSize:[460,460,"px"],minSize:[150,150,"px"],onCropEnd:function(e){var t=el({},h);t.x=e.x,t.y=e.y,t.height=e.height,t.width=e.width,_(t);e.x,e.y,e.width,e.height}})}}),[c]);return wp.element.createElement("div",{className:"uploader",ref:r},i?wp.element.createElement("label",{for:"fileupload_"+ml,className:"upload_file"},O,wp.element.createElement("input",{id:"fileupload_"+ml,"data-type":e.type,ref:t,type:"file",accept:"image/*",onChange:function(a){if(t.current.files[0].size<window.vibebp.settings.upload_limit){var i={token:ul("vibebp").getToken()};e.hasOwnProperty("user_id")&&(i=el(el({},i),{},{user_id:e.user_id})),r.current&&(i.ui_available_width=r.current.offsetWidth),j(window.vibebp.translations.uploading);var l=new FormData;l.append("body",JSON.stringify(i)),l.append("file",t.current.files[0]),fetch("".concat(window.vibebp.api.url,"/profile/avatar/upload?force"),{method:"post",body:l}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("original_file")?(o(!1),p(e.original_file),s(!0),setTimeout((function(){n.current.scrollIntoView()}),200)):ul("vibebp").addNotification({text:e.message}),j(window.vibebp.translations.select_image)}))}else j(window.vibebp.translations.image_size_error),setTimeout((function(){j(window.vibebp.translations.select_image)}),3500)}})):wp.element.createElement("div",{className:"uploaded_src"},wp.element.createElement(cl,null,wp.element.createElement(cl,null,wp.element.createElement("div",{className:"uploaded_image"},wp.element.createElement("img",{src:m})),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){s(!c)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){setisCrop(!1),o(!0),p(""),_({x:0,y:0,width:0,height:0})}})),c?wp.element.createElement("div",{className:"cropimage",id:"cropper"},wp.element.createElement("img",{src:m,ref:n})):"",wp.element.createElement("a",{className:"crop"==v?"button is-primary is-loading":"button is-primary",onClick:function(){var t={cropdata:h,token:ul("vibebp").getToken(),original_file:m};e.hasOwnProperty("user_id")&&(t=el(el({},t),{},{user_id:e.user_id}));var n=new FormData;n.append("body",JSON.stringify(t)),w("crop"),fetch("".concat(window.vibebp.api.url,"/profile/avatar/crop?force"),{method:"post",body:n}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("avatar")?e.update(t):ul("vibebp").addNotification({text:t.message}),w(!1)}))}},window.vibebp.translations.upload)))))};function dl(){return(dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(n),!0).forEach((function(t){vl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gl=wp.element,hl=(gl.createElement,gl.useState),_l=gl.useEffect,El=(gl.Fragment,gl.render,wp.data),Ol=El.dispatch,jl=El.select,Sl=function(e){var t=wl(hl(!1),2),n=t[0],r=t[1],a=wl(hl(""),2),i=a[0],o=a[1],l=wl(hl(""),2),c=l[0],s=(l[1],wl(hl({}),2)),u=s[0],m=(s[1],wl(hl(!1),2)),p=m[0],d=m[1],f=wl(hl(!1),2),b=f[0],v=f[1],w=jl("vibebp").getUser().id;e.user_id&&(w=e.user_id),_l((function(){localforage.getItem("user_"+w).then((function(e){null!==e?(e=JSON.parse(e),o(e.avatar)):fetch("".concat(window.vibebp.api.url,"/avatar?ids=").concat(w),{method:"post",body:JSON.stringify({type:"user",ids:w,token:jl("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e&&(localforage.setItem("user_"+w,JSON.stringify(e)),o(e.avatar))}))}))}),[]);var y=function(){fetch("".concat(window.vibebp.api.url,"/avatar").concat(e.hasOwnProperty("user_id")?"?"+e.hasOwnProperty("user_id"):""),{method:"post",body:JSON.stringify({type:"user",ids:w,token:jl("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e&&(localforage.setItem("user_"+w,JSON.stringify(e)),o(e.avatar))}))};_l((function(){return document.addEventListener("vibebp_component_reload",y),function(){document.removeEventListener("vibebp_component_reload",y)}}));return wp.element.createElement("div",{className:"profile_avatar_wrapper"},wp.element.createElement("div",{className:"profile_avatar"},n?wp.element.createElement(pl,dl({type:"image",crop:"1"},e,{update:function(t){o(t.avatar);var n=jl("vibebp").getUser(),a=!1;if(e.hasOwnProperty("user_id")?n.id==e.user_id&&(a=!0):a=!0,a){n.avatar=t.avatar,localforage.setItem("bp_user",JSON.stringify(n));var i=n.username;n.hasOwnProperty("displayname")&&n.displayname.length&&(i=n.displayname),localforage.setItem("user_"+n.id,JSON.stringify({avatar:t.avatar,name:i})),jl("vibebp").setUser(n)}r(!1)}})):wp.element.createElement("img",{src:i})),wp.element.createElement("div",{className:"profile_avatar_actions buttons"},wp.element.createElement("a",{className:n?"button is-danger":"button is-info",onClick:function(){r(!n)}},n?window.vibebp.translations.cancel:window.vibebp.translations.change_image),b?wp.element.createElement("a",{className:p?"button is-loading is-primary":"button is-primary",onClick:function(){d(!0);var t={cropdata:u,token:jl("vibebp").getToken()};e.hasOwnProperty("user_id")&&(t=bl(bl({},t),{},{user_id:e.user_id}));var n=new FormData;n.append("body",JSON.stringify(t)),n.append("file",c),fetch("".concat(window.vibebp.api.url,"/profile/avatar?upload"),{method:"post",body:n}).then((function(e){return e.json()})).then((function(e){if(d(!1),e.status&&(v(!1),e.hasOwnProperty("message")&&Ol("vibebp").addNotification({text:e.message}),e.hasOwnProperty("avatar"))){o(e.avatar);var t=jl("vibebp").getUser();t.avatar=e.avatar,localforage.setItem("bp_user",JSON.stringify(t));var n=t.username;t.hasOwnProperty("displayname")&&t.displayname.length&&(n=t.displayname),localforage.setItem("user_"+t.id,JSON.stringify({avatar:e.avatar,name:n})),jl("vibebp").setUser(t)}}))}},window.vibebp.translations.update_image):""))};function Nl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pl=wp.element,xl=(Pl.createElement,Pl.useState),Al=Pl.useEffect,Il=(Pl.Fragment,Pl.render,wp.data),Cl=Il.dispatch,Tl=Il.select,Dl=function(e){var t=Nl(xl(!1),2),n=t[0],r=t[1],a=Nl(xl(""),2),i=a[0],o=a[1],l=Nl(xl(""),2),c=l[0],s=l[1],u=Nl(xl({}),2),m=(u[0],u[1],Nl(xl(!1),2)),p=m[0],d=m[1],f=Nl(xl(!1),2),b=f[0],v=f[1],w=Tl("vibebp").getUser();Al((function(){localforage.getItem("user_cover"+w.id).then((function(e){null!==e?o(e):fetch("".concat(window.vibebp.api.url,"/cover?ids=").concat(w.id,"&force"),{method:"post",body:JSON.stringify({type:"user",ids:w.id,token:Tl("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&e.value.hasOwnProperty("cover")&&e.value.cover&&(o(e.value.cover),localforage.setItem("user_cover"+w.id,JSON.stringify(e.value)))}))}))}),[]);var y=function(){fetch("".concat(window.vibebp.api.url,"/cover"),{method:"post",body:JSON.stringify({type:"user",ids:w.id,token:Tl("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&e.value.hasOwnProperty("cover")&&e.value.cover&&(o(e.value.cover),localforage.setItem("user_cover"+w.id,JSON.stringify(e.value)))}))};Al((function(){return document.addEventListener("vibebp_component_reload",y),function(){document.removeEventListener("vibebp_component_reload",y)}}));return wp.element.createElement("div",{className:"profile_avatar_wrapper"},wp.element.createElement("div",{className:"profile_cover"},n?wp.element.createElement(ra,{type:"image",update:function(e){v(!0),s(e[0])}}):wp.element.createElement("img",{src:i})),wp.element.createElement("div",{className:"profile_avatar_actions buttons"},wp.element.createElement("a",{className:n?"button is-danger":"button is-info",onClick:function(){r(!n)}},n?window.vibebp.translations.cancel:window.vibebp.translations.change_image),b?wp.element.createElement("a",{className:p?"button is-loading is-primary":"button is-primary",onClick:function(){d(!0);var e={token:Tl("vibebp").getToken()},t=new FormData;t.append("body",JSON.stringify(e)),t.append("file",c),fetch("".concat(window.vibebp.api.url,"/component/cover?upload"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){if(d(!1),e.success&&(v(!1),r(!1),e.hasOwnProperty("error")&&Cl("vibebp").addNotification({text:e.error}),e.hasOwnProperty("data"))){var t=Tl("vibebp").getUser();t.cover=e.data.url,localforage.setItem("bp_user",JSON.stringify(t)),Tl("vibebp").setUser(t),localforage.setItem("user_cover"+t.id,e.data.url),o(e.data.url)}}))}},window.vibebp.translations.update_image):""))};function Ml(e){return function(e){if(Array.isArray(e))return Hl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Fl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){Ul(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Fl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(e,t){if(e){if("string"==typeof e)return Hl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hl(e,t):void 0}}function Hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ql=wp.element,zl=(ql.createElement,ql.useState),$l=ql.useEffect,Bl=(ql.Fragment,ql.render,wp.data),Wl=Bl.dispatch,Vl=Bl.select,Gl=function(e){var t=Rl(zl(!1),2),n=t[0],r=(t[1],Rl(zl(window.vibebp.components.profile.default_component),2)),a=r[0],i=r[1],o=Rl(zl([]),2),l=o[0],c=o[1],s=Rl(zl(""),2),u=s[0],m=s[1];return $l((function(){var e=Vl("vibebp").getAction(),t=Vl("vibebp").getMenu().filter((function(e){return"profile"===e.parent}));t.map((function(n,r){e?t.findIndex((function(t){return t.css_id==e}))>-1&&(i(t[t.findIndex((function(t){return t.css_id==e}))].css_id),t[t.findIndex((function(t){return t.css_id==e}))].class.push("current-menu-item")):-1==t[0].class.indexOf("current-menu-item")&&t[0].class.push("current-menu-item")})),c(t),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[Vl("vibebp").getMenu()]),$l((function(){"edit"==a&&"change-avatar"==a&&"change-cover-image"==a&&"public"==a&&"view"==a||fetch("".concat(window.vibebp.api.url,"/profile/subNav"),{method:"post",body:JSON.stringify(Jl({activeTab:a,token:Vl("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){e.status&&m(e.html),e.hasOwnProperty("message")&&Wl("vibebp").addNotification({text:e.message})}))}),[a]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.profile.label),l.map((function(e,t){return wp.element.createElement("a",{className:e.class.join(" "),onClick:function(e){var n=Ml(l),r=n.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));n[r].class.splice(n[r].class.indexOf("current-menu-item"),1),n[t].class.push("current-menu-item"),c(n),i(n[t].css_id),Wl("vibebp").setAction(n[t].css_id)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"edit"===a?wp.element.createElement(Yo,null):"change-avatar"===a?wp.element.createElement(Sl,null):"change-cover-image"===a?wp.element.createElement(Dl,null):"public"===a||"view"===a?wp.element.createElement(Ro,null):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:u}})))};function Zl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xl=wp.element,Yl=(Xl.createElement,Xl.useState),Ql=Xl.useEffect,ec=(Xl.Fragment,Xl.render,function(e){var t=Zl(Yl(""),2),n=t[0],r=t[1];return Ql((function(){e.notification&&void 0!==e.notification.content&&e.notification.content&&e.notification.content.hasOwnProperty("text")?r(e.notification.content.text):r(e.notification.content)}),[e.notification.content]),wp.element.createElement("div",{className:"notification",dangerouslySetInnerHTML:{__html:n}})});function tc(e){return function(e){if(Array.isArray(e))return lc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||oc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(n),!0).forEach((function(t){ac(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ic(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||oc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oc(e,t){if(e){if("string"==typeof e)return lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lc(e,t):void 0}}function lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cc=wp.element,sc=(cc.createElement,cc.useState),uc=cc.useEffect,mc=(cc.Fragment,cc.render,wp.data),pc=(mc.dispatch,mc.select),dc=function(e){var t=ic(sc([]),2),n=t[0],r=t[1],a=ic(sc([]),2),i=a[0],o=a[1],l=ic(sc(!1),2),c=l[0],s=l[1],m=ic(sc({filter:"unread",sorter:"",page:1,search:""}),2),p=m[0],d=m[1],f=ic(sc(!1),2),b=f[0],v=f[1],w=ic(sc([]),2),y=w[0],g=w[1],h=ic(sc(!0),2),_=h[0],E=h[1],O=ic(sc(""),2),j=O[0],S=O[1],N=ic(sc(!1),2),k=N[0],P=N[1],x=ic(sc(!1),2),A=x[0],I=x[1],C=ic(sc(null),2),T=C[0],D=C[1];uc((function(){console.log(pc("vibebp").getMenu());var e=pc("vibebp").getMenu().filter((function(e){return"notifications"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),u((function(){var e=rc({},p);e.token=pc("vibebp").getToken(),T&&T.abort();var t={},a=new AbortController;T&&(t={signal:a.signal}),D(a),E(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"?").concat(p.search.length?"nocache":encodeURIComponent(JSON.stringify(rc(rc({},p),{},{search:""})))),rc(rc({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},t),{},{body:JSON.stringify(e)})).then((function(e){return e.json()})).then((function(e){if(E(!1),e.status)if(A){var t=tc(n);e.data.notifications.map((function(e){t.push(e)})),r(t),I(!1),t.length<e.data.total?P(!0):P(!1)}else r(e.data.notifications),e.data.notifications.length<e.data.total?P(!0):P(!1);else r([])}))}),500,[p]);var M=function(){d(rc(rc({},p),{},{page:1}))};uc((function(){return document.addEventListener("vibebp_component_reload",M),function(){document.removeEventListener("vibebp_component_reload",M)}}));var L=function(e,t){s(!1);var a=tc(n);"read"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread?post"),{method:"post",body:JSON.stringify({is_new:0,id:e,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"unread"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread?post"),{method:"post",body:JSON.stringify({is_new:1,id:e,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"delete"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/delete-notification?post"),{method:"post",body:JSON.stringify({id:e,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),a.splice(a.findIndex((function(t){return t.id===e})),1),r(a)};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.notifications.label),i.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:n,onClick:function(n){var r=rc({},p);r.filter=e.css_id,"notifications-my-notifications"===e.css_id&&(r.filter="unread"),r.page=1,d(r);var a=tc(i),l=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[l].class.splice(a[l].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),v(!1),g([]),S(""),o(a)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement("div",{className:"vibebp_main_head"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:p.search,onChange:function(e){return d(rc(rc({},p),{},{search:e.target.value}))},placeholder:window.vibebp.translations.search_text})),wp.element.createElement("select",{onChange:function(e){var t=rc({},p);t.sorter=e.target.value,t.page=1,d(t)}},Object.keys(window.vibebp.components.notifications.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.notifications.sorters[e])})))),n.length||_?wp.element.createElement("div",{className:"table_block"},wp.element.createElement("table",{className:"table"},wp.element.createElement("thead",null,wp.element.createElement("th",null,wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{id:"selectall",type:"checkbox",checked:b?"checked":"",onClick:function(){b?v(!1):(v(!0),g([]))}}),wp.element.createElement("label",{for:"selectall"}))),wp.element.createElement("th",null,window.vibebp.translations.owner),wp.element.createElement("th",null,window.vibebp.components.notifications.label),wp.element.createElement("th",null,window.vibebp.translations.date),wp.element.createElement("th",null,wp.element.createElement("a",{className:"vicon vicon-more rotate90"}))),wp.element.createElement("tbody",null,_?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):n.length?wp.element.createElement(Bn,{type:"user",user_ids:n.map((function(e){return e.user_id}))},n.map((function(e){return wp.element.createElement("tr",null,wp.element.createElement("td",{valign:"center"},wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",onClick:function(){var t=tc(y);b&&(v(!1),n.map((function(e){t.push(e.id)}))),-1===y.indexOf(e.id)?(t.push(e.id),g(t)):(t.splice(y.indexOf(e.id),1),g(t))},checked:b||-1!==y.indexOf(e.id)?"checked":"",id:e.id}),wp.element.createElement("label",{for:e.id}))),wp.element.createElement("td",{valign:"center"},wp.element.createElement($n,{type:"user",id:{user_id:e.user_id}})),wp.element.createElement("td",{valign:"center"},wp.element.createElement(ec,{notification:e,update:L})),wp.element.createElement("td",{valign:"center"},wp.element.createElement(La,{time:e.date_notified})),wp.element.createElement("td",{valign:"center"},wp.element.createElement("a",{className:"vicon vicon-more rotate90",onClick:function(){s(!c&&e.id)}}),c===e.id?wp.element.createElement("ul",{className:"target_menu"},Object.keys(window.vibebp.components.notifications.actions).map((function(t){if(t!==p.filter)return wp.element.createElement("li",{value:t,onClick:function(){L(e.id,t)}},window.vibebp.components.notifications.actions[t])}))):""))}))):"")),b||y.length?wp.element.createElement("div",{className:"bulk_actions"},wp.element.createElement("select",{onChange:function(e){S(e.target.value)}},wp.element.createElement("option",null,window.vibebp.translations.selectaction),Object.keys(window.vibebp.components.notifications.actions).map((function(e){if(e!==p.filter)return wp.element.createElement("option",{value:e},window.vibebp.components.notifications.actions[e])}))),wp.element.createElement("a",{className:"button is-primary",onClick:function(){var e=tc(n);if(console.log(j),j)if(b){if(r([]),"read"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/markall-read-unread?post"),{method:"post",body:JSON.stringify({is_new:0,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"unread"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/markall-read-unread?post"),{method:"post",body:JSON.stringify({is_new:1,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"delete"===j){var t=[];n.map((function(e){t.push(e.id)})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/deleteall?post"),{method:"post",body:JSON.stringify({ids:t,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){}))}}else y.length&&(y.map((function(t){e.splice(e.findIndex((function(e){return t===e.id})),1)})),r(e),"read"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread?post"),{method:"post",body:JSON.stringify({is_new:0,id:y,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"unread"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread?post"),{method:"post",body:JSON.stringify({is_new:1,id:y,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"delete"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/delete-notification?post"),{method:"post",body:JSON.stringify({id:y,token:pc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})))}},window.vibebp.translations.apply)):"",k&&!_?wp.element.createElement("a",{className:"link",onClick:function(){var e=rc({},p);e.page+=1,d(e),I(!0)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_notifications_found)))};function fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vc=wp.element,wc=(vc.createElement,vc.useState),yc=(vc.useEffect,vc.Fragment),gc=(vc.render,wp.data),hc=(gc.dispatch,gc.select,function(e){var t=fc(wc(JSON.parse(e.object)),2),n=t[0];t[1];return wp.element.createElement(yc,null,n&&n.hasOwnProperty("blocks")&&void 0!==n.blocks&&n.blocks.length&&void 0!==n.blocks[0]&&"unstyled"===n.blocks[0].type?wp.element.createElement("div",{className:"blocktext"},n.blocks[0].text):"")});function _c(e){return function(e){if(Array.isArray(e))return jc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Oc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Oc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){if(e){if("string"==typeof e)return jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jc(e,t):void 0}}function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sc=wp.element,Nc=(Sc.createElement,Sc.useState),kc=Sc.useEffect,Pc=Sc.Fragment,xc=(Sc.render,Sc.useContext),Ac=wp.data,Ic=Ac.dispatch,Cc=Ac.select,Tc=function(e){var t=xc(In),n=Ec(Nc(0),2),r=n[0],a=n[1],i=Ec(Nc(!1),2),o=i[0],l=i[1],c=Ec(Nc([]),2),s=c[0],u=c[1];kc((function(){e.message.hasOwnProperty("labels")&&e.message.labels&&e.message.labels.length&&u(e.message.labels)}),[e.message]),kc((function(){e.message.hasOwnProperty("recipients")&&Object.keys(e.message.recipients).map((function(t){e.message.recipients[t].user_id===Cc("vibebp").getUser()&&e.message.recipients[t].unread_count&&a(1)}))}),[]);var p="message_add_label vicon vicon-plus";return o&&(p="message_add_label vicon vicon-close"),wp.element.createElement(Pc,null,t.messageLabels&&t.messageLabels.length?wp.element.createElement("div",{className:"message_labels"},s.length?s.map((function(n){var r=t.messageLabels[t.messageLabels.findIndex((function(e){return e.slug===n}))];return wp.element.createElement("span",{style:{background:r.color},onClick:function(){return function(t){var n=_c(s);n.splice(n.indexOf(t),1),u(n),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({id:e.message.thread_id,action:"remove_label",label:t,token:Cc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(n){e.updateLabels(t,0),n.hasOwnProperty("message")&&Ic("vibebp").addNotification({text:n.message,icon:"vicon vicon-save"})}))}(n)}},r.name)})):"",wp.element.createElement("a",{className:p,onClick:function(){l(!o)}}),o?wp.element.createElement("ul",{className:"allmessage_labels"},t.messageLabels.map((function(t){if(-1===s.indexOf(t.slug))return wp.element.createElement("li",{onClick:function(){return function(t){l(!1);var n=_c(s);n.push(t.slug),u(n),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({id:e.message.thread_id,action:"add_label",label:t.slug,token:Cc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(n){e.updateLabels(t.slug,1),n.hasOwnProperty("message")&&Ic("vibebp").addNotification({text:n.message,icon:"vicon vicon-save"})}))}(t)},style:{background:t.color}},t.name)}))):""):"",wp.element.createElement("div",{className:"message",onClick:function(){e.show()}},r?wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:e.message.last_message_subject}}):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:e.message.last_message_subject}}),m(e.message.last_message_content)?wp.element.createElement(hc,{object:e.message.last_message_content,type:"text"}):wp.element.createElement("div",{className:"message_content",dangerouslySetInnerHTML:{__html:e.message.last_message_content}})))};function Dc(e){return function(e){if(Array.isArray(e))return Fc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Rc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(n),!0).forEach((function(t){Jc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Rc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(e,t){if(e){if("string"==typeof e)return Fc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fc(e,t):void 0}}function Fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hc=wp.element,qc=(Hc.createElement,Hc.useState),zc=Hc.useEffect,$c=Hc.Fragment,Bc=(Hc.render,wp.data),Wc=Bc.dispatch,Vc=Bc.select,Gc=function(e){var t=Uc(qc(""),2),n=t[0],r=t[1],a=Uc(qc(!1),2),i=a[0],o=a[1],l=Uc(qc(!1),2),c=l[0],s=l[1],m=Uc(qc([]),2),p=m[0],d=m[1],f=Uc(qc({content:"",recipients:[],subject:"",thread_id:0,meta:[]}),2),b=f[0],v=f[1],w=Uc(qc([]),2),y=w[0],g=w[1],h=Uc(qc(""),2),_=h[0],E=h[1],O=Uc(qc(!0),2),j=O[0],S=O[1],N=Uc(qc({}),2),k=N[0],P=N[1],x=Uc(qc(!1),2),A=x[0],I=x[1];zc((function(){localforage.setItem("fixedToolbar",1)}),[]),zc((function(){if(e.hasOwnProperty("thread_id")){var t=Lc({},b);t.thread_id=e.thread_id,t.recipients=e.recipients,v(t)}}),[e.thread_id]),zc((function(){if(e.hasOwnProperty("messaging_users")){var t=Lc({},b);t.recipients=e.messaging_users,v(t)}}),[e.messaging_users]),u((function(){n.length>3&&(s(!0),fetch("".concat(window.vibebp.api.url,"/search?nocache"),{method:"post",body:JSON.stringify({search:n,type:"user",token:Vc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){s(!1),e.status&&Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),d(e.results),I(!0))})))}),500,[n]),zc((function(){if(j){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_message_editor",content:e.hasOwnProperty("message")&&e.message.post_content?e.message.post_content:"",raw:e.hasOwnProperty("message")&&e.message.raw?e.message.raw:"",components:["editor"],updater:"vibe_message",reinit:!0}});document.dispatchEvent(t)}}),[j]),zc((function(){document.addEventListener("vibe_editor_content_update_vibe_message",(function(e){P({post_content:e.detail.raw_html,raw:e.detail.editor_content})}))}),[]);var C=function(){var t=1;if(k.post_content||(t=0,Wc("vibebp").addNotification({text:window.vibebp.translations.missing_content})),b.recipients.length||2==e.type||(t=0,Wc("vibebp").addNotification({text:window.vibebp.translations.missing_recipients})),b.subject.length||b.thread_id||(t=0,Wc("vibebp").addNotification({text:window.vibebp.translations.missing_subject})),t){var n=Lc(Lc({},b),{},{content:k.post_content,raw:k.raw});2==e.type&&(n.notice=1),o(!0);var r=new FormData;r.append("body",JSON.stringify({args:n,token:Vc("vibebp").getToken()})),_.length&&_.map((function(e,t){r.append("files_"+t,e)})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/send?upload"),{method:"post",body:r}).then((function(e){return e.json()})).then((function(t){o(!1),e.update(t,b),g([]),E(""),v(Lc(Lc({},b),{},{content:"",subject:""})),S(!1),t.hasOwnProperty("message")&&Wc("vibebp").addNotification({text:t.message})}))}};return wp.element.createElement("div",{className:"newmessage_form"},e.recipients||2==e.type?"":wp.element.createElement("div",{className:"recipients"},wp.element.createElement("label",null,window.vibebp.translations.recipients),wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},wp.element.createElement(Bn,{user_ids:b.recipients},b.recipients.map((function(e){return wp.element.createElement("span",{onClick:function(){var t=Lc({},b);t.recipients.splice(t.recipients.indexOf(e),1),v(t)}},wp.element.createElement($n,{type:"member",id:{user_id:e}}))})))),wp.element.createElement("div",{className:c?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:n,placeholder:window.vibebp.translations.search_member,onChange:function(e){r(e.target.value)},onFocus:function(){I(!0)}}))),A&&p.length?wp.element.createElement("div",{className:"search_results"},p.map((function(e,t){if(!(b.recipients.indexOf(e.id)>-1))return wp.element.createElement("div",{className:"search_result user",onClick:function(){r("");var t=Lc({},b);-1===t.recipients.indexOf(e.id)&&(t.recipients.push(e.id),v(t),I(!1))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""),e.hasOwnProperty("thread_id")?"":wp.element.createElement("div",{className:"subject"},wp.element.createElement("label",null,window.vibebp.translations.subject),wp.element.createElement("input",{type:"text",value:b.subject,onChange:function(e){var t=Lc({},b);t.subject=e.target.value,v(t)}})),wp.element.createElement("div",{className:"message_body",id:"message_body"},j?wp.element.createElement("div",{className:"vibe_message_editor"},wp.element.createElement("textarea",{onChange:function(e){v(Lc(Lc({},b),{},{content:e.target.value})),P(Lc(Lc({},k),{},{post_content:e.target.value}))},value:b.content})):wp.element.createElement("a",{className:"button is-primary is-fullwidth",onClick:function(){return S(!j)}},window.vibebp.translations.add_message)),j&&(!e.hasOwnProperty("type")||e.hasOwnProperty("type")&&"notices"!==e.type)?wp.element.createElement("div",{className:"message_actions"},wp.element.createElement("div",{className:"message_Attachments"},wp.element.createElement($c,null,wp.element.createElement("a",{className:"vicon vicon-clip",onClick:function(){var e=Dc(y);e.push("attachment"),g(e)}}),wp.element.createElement("a",{className:"vicon vicon-video-camera",onClick:function(){var e=Dc(y);e.push("video"),g(e)}}),wp.element.createElement("a",{className:"vicon vicon-image",onClick:function(){var e=Dc(y);e.push("image"),g(e)}})),y.length?y.map((function(e,t){return wp.element.createElement("div",{className:"message_attachment"},"image"==e?wp.element.createElement("a",{className:"vicon vicon-image upload_type"}):"video"==e?wp.element.createElement("a",{className:"vicon vicon-video-camera upload_type"}):wp.element.createElement("a",{className:"vicon vicon-clip upload_type"}),wp.element.createElement(ra,{type:e,update:function(n,r){var a=Dc(_);a[t]=new File([n[0]],n[0].name),E(a),v(Lc(Lc({},b),{},{meta:[].concat(Dc(b.meta),[{key:e,value:t}])}))}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){var e=Dc(y);e.splice(t,1);var n=Dc(_);n.splice(t,1),E(n),g(e)}}))})):""),wp.element.createElement("div",{className:"message_buttons"},b.thread_id?"":wp.element.createElement("a",{className:"link",onClick:e.cancel},window.vibebp.translations.cancel),wp.element.createElement("a",{className:i?"button is-primary is-loading":"button is-primary",onClick:C},window.vibebp.translations.send_message))):"")};function Zc(e){return(Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var es=wp.element,ts=(es.createElement,es.useState),ns=es.useEffect,rs=es.Fragment,as=(es.render,wp.data),is=(as.dispatch,as.select),os=function(e){var t=Yc(ts(e.message),2),n=t[0],r=t[1],a=Yc(ts(0),2),i=a[0],o=a[1],l=Yc(ts([]),2),c=l[0],s=l[1];ns((function(){console.log(e.message),void 0!==e.recipients&&e.recipients&&s(e.recipients)}),[e.recipients]),ns((function(){if(void 0!==e.message&&e.message&&Object.keys(e.message).length){var t=[];if(e.message.hasOwnProperty("recipients")){var n=is("vibebp").getUser(),a=Object.keys(e.message.recipients);void 0!==e.message&&a.length&&a.map((function(r){e.message.recipients[r].user_id===n.id?e.message.recipients[r].unread_count&&o(1):t.push(e.message.recipients[r].user_id)}))}s(t),r(e.message)}}),[e.message]),ns((function(){document.dispatchEvent(new Event("VibeBP_Editor_Content"))}),[n.messages]);var u=is("vibebp").getUser();return wp.element.createElement("div",{className:"fullmessage"},wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_left"},c.length?wp.element.createElement(Bn,{user_ids:c},c.map((function(e){if(e!=is("vibebp").getUser().id)return wp.element.createElement($n,{type:"member",id:{user_id:e}})}))):""),e.hasOwnProperty("embeded")&&e.embeded?"":wp.element.createElement("div",{className:"header_right"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.show()}}),wp.element.createElement("a",{href:"#message_body",className:"vicon vicon-back-left"}),wp.element.createElement("i",{className:"vicon vicon-trash",onClick:function(){return e.action("delete")}}))),wp.element.createElement("div",{className:"portal_body"},n.messages.length?n.messages.map((function(e,t){return wp.element.createElement("div",{className:e.sender_id!=u.id?"notmine":"mine"},wp.element.createElement("div",{className:"portal_message_wrapper"},wp.element.createElement($n,{type:"user",id:{user_id:e.sender_id}}),wp.element.createElement("div",{className:"portal_message"},wp.element.createElement("div",{className:"portal_title"},0==t?wp.element.createElement(rs,null,wp.element.createElement("div",{className:"message_subject"},i?wp.element.createElement("strong",null,e.subject):wp.element.createElement("span",null,e.subject)),wp.element.createElement(La,{time:e.date_sent})):wp.element.createElement("div",{className:"message_subject"},i?wp.element.createElement("strong",null,wp.element.createElement(La,{time:e.date_sent})):wp.element.createElement("span",null,wp.element.createElement(La,{time:e.date_sent})))),wp.element.createElement("div",{className:"portal_content"},m(e.message)?wp.element.createElement(hc,{object:e.message}):wp.element.createElement("div",{className:"portal_content",dangerouslySetInnerHTML:{__html:e.message}})),wp.element.createElement("div",{className:"message_attachments"},"object"===Zc(e.meta)&&null!==e.meta?Object.keys(e.meta).map((function(t){return wp.element.createElement(rs,null,e.meta[t].map((function(e){if(e.length>3){if("image"==t)return wp.element.createElement("img",{src:e,className:"activity_meta image"});if("video"==t)return wp.element.createElement("video",{src:e,className:"activity_meta video"});if("attachment"==t)return wp.element.createElement("a",{href:e,target:"_blank",className:"vicon vicon-clip activity_meta"})}})))})):""))),wp.element.createElement("div",null))})):"")),c.length?wp.element.createElement(Gc,{thread_id:n.thread_id,update:function(t,a){if(t.status){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kc(Object(n),!0).forEach((function(t){Xc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);i.messages=t.data,r(i),e.action("add",i.messages)}},recipients:c}):"")};function ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ls(Object(n),!0).forEach((function(t){ss(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var us=wp.element,ms=(us.createElement,us.useState,us.useEffect,us.Fragment),ps=(us.render,us.useContext),ds=wp.data,fs=ds.dispatch,bs=ds.select,vs=function(e){ps(In);var t=function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e.message.id,action:"active_notice",token:bs("vibebp").getToken(),active:!e.message.is_active})}).then((function(e){return e.json()})).then((function(t){e.update(cs(cs({},e.message),{},{is_active:!e.message.is_active}),"active"),t.hasOwnProperty("message")&&fs("vibebp").addNotification({text:t.message,icon:"vicon vicon-check"})}))};return wp.element.createElement(ms,null,wp.element.createElement("div",{className:e.message.is_active?"notice active":"notice"},wp.element.createElement("div",{className:"notice_content"},wp.element.createElement("h3",null,e.message.is_active?wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:e.message.subject}}):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:e.message.subject}})),m(e.message.message)?wp.element.createElement(hc,{object:e.message.message,type:"text"}):wp.element.createElement("div",{className:"message_content",dangerouslySetInnerHTML:{__html:e.message.message}})),wp.element.createElement("div",{className:"notice_actions"},e.message.is_active?wp.element.createElement("a",{className:"vicon vicon-na",onClick:t,title:window.vibebp.translations.make_inactive}):wp.element.createElement("a",{className:"vicon vicon-star",onClick:t,title:window.vibebp.translations.make_active}),wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e.message.id,action:"delete_notice",token:bs("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){e.update(e.message,"deleted"),t.hasOwnProperty("message")&&fs("vibebp").addNotification({text:t.message,icon:"vicon vicon-trash"})}))}}))))};function ws(e){return function(e){if(Array.isArray(e))return Os(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Es(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ys(Object(n),!0).forEach((function(t){hs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Es(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Es(e,t){if(e){if("string"==typeof e)return Os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Os(e,t):void 0}}function Os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var js=wp.element,Ss=(js.createElement,js.useState),Ns=js.useEffect,ks=js.Fragment,Ps=(js.rende,js.useContext),xs=wp.data,As=xs.dispatch,Is=xs.select,Cs=function(e){var t=Ps(In),n=_s(Ss([]),2),r=n[0],a=n[1],i=_s(Ss([]),2),o=i[0],l=i[1],c=_s(Ss(!1),2),s=c[0],m=c[1],p=_s(Ss({filter:"inbox",sorter:"",page:1,search:"",label:""}),2),d=p[0],f=p[1],b=_s(Ss(!1),2),v=b[0],w=b[1],y=_s(Ss([]),2),g=y[0],h=y[1],_=_s(Ss(!0),2),E=_[0],O=_[1],j=_s(Ss(""),2),S=j[0],N=j[1],k=_s(Ss(!1),2),P=k[0],x=k[1],A=_s(Ss(!1),2),I=A[0],C=A[1],T=_s(Ss(!1),2),D=T[0],M=T[1],L=_s(Ss(!1),2),J=L[0],U=L[1],R=_s(Ss(!1),2),F=R[0],H=R[1],q=_s(Ss({text:"",color:"#000"}),2),z=q[0],$=q[1],B=_s(Ss([]),2),W=B[0],V=B[1],G=_s(Ss(window.vibebp.components.messages.actions),2),Z=G[0],K=(G[1],_s(Ss(!1),2)),X=K[0],Y=K[1],Q=_s(Ss(null),2),ee=Q[0],te=Q[1],ne=_s(Ss(!1),2),re=ne[0],ae=ne[1];Ns((function(){return J>-1?document.querySelector(".vibebp_myprofile")&&document.querySelector(".vibebp_myprofile").classList.add("popup_active"):document.querySelector(".vibebp_myprofile")&&document.querySelector(".vibebp_myprofile").classList.remove("popup_active"),function(){document.querySelector(".vibebp_myprofile.popup_active")&&document.querySelector(".vibebp_myprofile").classList.remove("popup_active")}}),[J]),Ns((function(){var e=Is("vibebp").getMenu().filter((function(e){return"messages"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),l(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),u((function(){var e=gs({},d);e.token=Is("vibebp").getToken(),O(!0),ee&&ee.abort();var t={},n=new AbortController;ee&&(t={signal:n.signal}),te(n);var i="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"?").concat(encodeURIComponent(JSON.stringify(gs(gs({},d),{},{search:""}))));re&&(i+="&force"),fetch(i,gs(gs({method:"post"},t),{},{headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(e)})).then((function(e){return e.json()})).then((function(e){if(ae(!1),O(!1),e.status)if(I){var t=ws(r);e.data.threads.map((function(e){t.push(e)})),a(t),J||window.innerWidth>480&&U(0),C(!1),t.length<e.data.total?x(!0):x(!1)}else a(e.data.threads),J||window.innerWidth>480&&U(0),e.data.threads.length<e.data.total?x(!0):x(!1);else a([])}))}),500,[d]);var ie=function(){f(gs(gs({},d),{},{page:1}))};Ns((function(){return document.addEventListener("vibebp_component_reload",ie),function(){document.removeEventListener("vibebp_component_reload",ie)}})),Ns((function(){a([]),"notices"==d.filter&&M(2)}),[d.filter]),Ns((function(){if(1===D){f(gs(gs({},d),{},{filter:"sentbox"}));var e=ws(o),t=e.findIndex((function(e){return"sentbox"===e.css_id}));if(t>-1){var n=e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));e[n].class.splice(e[n].class.indexOf("current-menu-item"),1),e[t].class.push("current-menu-item"),l(e)}}else if(2===D){f(gs(gs({},d),{},{filter:"notices"}));var r=ws(o),a=r.findIndex((function(e){return"notices"===e.css_id}));if(a>-1){var i=r.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));r[i].class.splice(r[i].class.indexOf("current-menu-item"),1),r[a].class.push("current-menu-item"),l(r)}}}),[D]),Ns((function(){J&&document.querySelector(".fullmessage")&&document.querySelector("#vibebp_member").scrollTo({top:document.querySelector(".fullmessage").getBoundingClientRect().top,left:0,behavior:"smooth"})}),[J]),Ns((function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/labels"),{method:"post",body:JSON.stringify({token:Is("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.labels)&&e.labels.length&&(V(e.labels),t.update("messageLabels",e.labels))}))}),[d]);var oe=function(e,t){m(!1);var n=ws(r);if(!Array.isArray(e)){var i=[];i.push(e),e=i}if("star"===t||"unstar"===t){var o=[];e.map((function(e,t){Y(e),n[n.findIndex((function(t){return t.thread_id===e}))].messages.map((function(e,t){o.push(e.id)}))})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:o,action:t,token:Is("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(r){Y(!1),r.status&&("unstar"===t&&e.map((function(e,t){n[n.findIndex((function(t){return t.thread_id===e}))].star=0})),"star"===t&&e.map((function(e,t){n[n.findIndex((function(t){return t.thread_id===e}))].star=1})))}))}"read"===t&&(e.map((function(e,t){n[n.findIndex((function(t){return t.thread_id===e}))].unread_count=0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e,action:t,token:Is("vibebp").getToken()})})),"unread"===t&&(e.map((function(e,t){n[n.findIndex((function(t){return t.thread_id===e}))].unread_count++})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e,action:t,token:Is("vibebp").getToken()})})),"delete"===t&&(e.map((function(e,t){n.splice(n.findIndex((function(t){return t.thread_id===e})),1)})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e,action:t,token:Is("vibebp").getToken()})})),a(n)},le=function(e){var t=gs({},d);t.label===e.slug?t.label="":t.label=e.slug,f(t)},ce=function(e){return!1!==J&&J===e?"message_block active":"message_block"},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("delete"==t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:r[e].thread_id,action:"delete",token:Is("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){var n=ws(r);n.splice(e,1),a(n),U(!1),t.hasOwnProperty("message")&&As("vibebp").addNotification({text:t.message,icon:"vicon vicon-save"})})),"add"==t){var i=ws(r);i[e].messages=n,a(i)}},ue=function(e,t){if("active"==t){var n=ws(r);n[n.findIndex((function(t){return t.id===e.id}))]=e,a(n)}else if("deleted"==t){var i=ws(r);i.splice(i.findIndex((function(t){return t.id===e.id})),1),a(i)}};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.messages.label),wp.element.createElement("a",{className:"button is-primary new_mail",onClick:function(){M(1)}},window.vibebp.translations.new_message),Is("vibebp").getUser().caps.hasOwnProperty("manage_options")?wp.element.createElement("a",{className:"button is-danger new_mail",onClick:function(){M(2)}},window.vibebp.translations.send_notice):"",o.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:n,onClick:function(n){var r=gs({},d);r.filter=e.css_id,r.page=1,U(!1),M(!1),d.css_id!==r.filter&&f(r);var a=ws(o),i=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[i].class.splice(a[i].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),w(!1),h([]),N(""),l(a)}},e.name)})),wp.element.createElement("div",{className:"labels"},wp.element.createElement("div",{class:"labels_title"},wp.element.createElement("span",null,window.vibebp.translations.labels),wp.element.createElement("a",{className:"link",onClick:function(){H(!F)}},window.vibebp.translations.add_new)),F?wp.element.createElement("div",{className:"newlabel_form"},wp.element.createElement("input",{type:"text",value:z.text,onChange:function(e){var t=gs({},z);t.text=e.target.value,$(t)}}),wp.element.createElement("label",{style:{background:z.color}},wp.element.createElement("input",{type:"color",onChange:function(e){var t=gs({},z);t.color=e.target.value,$(t)}})),wp.element.createElement("a",{className:"button is-primary vicon vicon-plus",onClick:function(){H(!1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/label/add?post"),{method:"post",body:JSON.stringify(gs(gs({},z),{},{token:Is("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(e.status){if(e.labels.length){var n=ws(W);e.labels.map((function(e){-1==n.findIndex((function(t){return t.slug==e.slug}))&&n.push(e)})),V(e.labels)}t.update("messageLabels",e.labels)}e.hasOwnProperty("message")&&As("vibebp").addNotification({text:e.message})}))}})):"",W&&W.length?wp.element.createElement("ul",{className:"message_labels"},W.map((function(e,n){var r="";return d.label==e.slug&&(r="active"),wp.element.createElement("li",{className:r},wp.element.createElement("label",null,wp.element.createElement("strong",{onClick:function(){return le(e)}},wp.element.createElement("span",{style:{borderColor:e.color}}),e.name),wp.element.createElement("span",{className:"vicon vicon-trash",onClick:function(){return function(e){var n=ws(W);n.splice(e,1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/label/remove?post"),{method:"post",body:JSON.stringify({slug:W[e].slug,token:Is("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),V(n),t.update("messageLabels",n)}(n)}})),wp.element.createElement("span",{onClick:function(){return le(e)}},e.count))}))):""))),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement("div",{className:"message_left_right"},wp.element.createElement("div",{className:"message_list_left"},wp.element.createElement("div",{className:"message_list_head"},v||g.length?"":wp.element.createElement(ks,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:d.search,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=gs({},d);t.search=e.target.value,f(t)}})),wp.element.createElement("select",{onChange:function(e){var t=gs({},d);t.sorter=e.target.value,f(t)}},Object.keys(window.vibebp.components.messages.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.messages.sorters[e])})))),wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{id:"selectall",type:"checkbox",checked:v?"checked":"",onClick:function(){v?w(!1):(w(!0),h([]))}}),wp.element.createElement("label",{for:"selectall"})),v||g.length?wp.element.createElement("div",{className:"bulk_actions"},wp.element.createElement("select",{onChange:function(e){N(e.target.value)}},wp.element.createElement("option",null,window.vibebp.translations.selectaction),Object.keys(Z).map((function(e){if(e!==d.filter)return wp.element.createElement("option",{value:e},Z[e])}))),wp.element.createElement("a",{className:"button is-primary",onClick:function(){var e=ws(r),t=[];S&&(v?e.map((function(e,n){t.push(e.thread_id)})):g.length&&e.map((function(e,n){g.indexOf(e.thread_id)>-1&&t.push(e.thread_id)})),oe(t,S))}},window.vibebp.translations.apply)):""),wp.element.createElement("div",{className:"messages"},r.length||E?wp.element.createElement(ks,null,E?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):r.length?wp.element.createElement(Bn,{user_ids:"notices"!==d.filter?r.map((function(e){return e.hasOwnProperty("sender_ids")&&Object.keys(e.sender_ids)})):[Is("vibebp").getUser().id]},r.map((function(e,n){if("notices"!==d.filter){var a="vicon vicon-star";return a=X==e.thread_id?"vicon vicon-more":"vicon vicon-star",e.star&&(a+=" filled"),wp.element.createElement("div",{className:ce(n),onClick:function(){U(n)}},wp.element.createElement("div",{className:"message_avatars"},e.hasOwnProperty("sender_ids")&&Object.keys(e.sender_ids).length?Object.keys(e.sender_ids).map((function(t,n){if(Object.keys(e.sender_ids)>3){if(n<3&&parseInt(t)>0)return wp.element.createElement($n,{type:"user",id:{user_id:t}})}else if(parseInt(t)>0)return wp.element.createElement($n,{type:"user",id:{user_id:t}})})):e.hasOwnProperty("sender_id")&&parseInt(e.sender_id)?wp.element.createElement($n,{type:"user",id:{user_id:e.sender_id}}):"",e.hasOwnProperty("userlinks")?wp.element.createElement("div",{className:"userlinks"},e.userlinks.map((function(e,t){return wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e}})}))):"",e.hasOwnProperty("sender_ids")&&Object.keys(e.sender_ids).length>3?wp.element.createElement("span",null,"+"+(Object.keys(e.sender_ids).length-3)+" "+window.vibebp.translations.more):""),wp.element.createElement("div",{className:"message_block_main"},wp.element.createElement("div",{className:"message_block_head"},wp.element.createElement(La,{time:e.last_message_date}),wp.element.createElement("div",null,wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",onClick:function(){var t=ws(g);v&&(w(!1),r.map((function(e){t.push(e.thread_id)}))),-1===g.indexOf(e.thread_id)?(t.push(e.thread_id),h(t)):(t.splice(g.indexOf(e.thread_id),1),h(t))},checked:v||-1!==g.indexOf(e.thread_id)?"checked":"",id:e.thread_id}),wp.element.createElement("label",{for:e.thread_id})),wp.element.createElement("a",{onClick:function(){e.star?oe(e.thread_id,"unstar"):oe(e.thread_id,"star")},className:a}),wp.element.createElement("a",{className:"vicon vicon-more rotate90",onClick:function(){m(!s&&e.thread_id)}}),wp.element.createElement(ks,null,s===e.thread_id?wp.element.createElement("ul",{className:"target_menu"},Object.keys(Z).map((function(t){if("unread"!==t&&"read"!==t&&"star"!==t&&"unstar"!==t&&"remove_label"!==t||"unread"===t&&!e.unread_count||"read"===t&&e.unread_count||"unstar"===t&&e.star||"star"===t&&!e.star)return wp.element.createElement("li",{value:t,onClick:function(){oe(e.thread_id,t)}},Z[t])}))):""))),wp.element.createElement(Tc,{message:e,labels:W,updateLabels:function(e,n){!function(e,n){var r=ws(W);n?r[r.findIndex((function(t){return t.slug===e}))].count++:r[r.findIndex((function(t){return t.slug===e}))].count--,V(r),t.update("messageLabels",r)}(e,n)},show:function(){U(n)}})))}return wp.element.createElement(vs,{message:e,update:ue})}))):"",P?wp.element.createElement("a",{className:"link",onClick:function(){var e=gs({},d);e.page+=1,f(e),C(!0)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_messages_found))),wp.element.createElement("div",{className:"message_main"},D?wp.element.createElement(Gc,{type:D,cancel:function(){M(!1)},update:function(e,t){if("notices"===d.filter)return ae(!0),void f(gs(gs({},d),{},{filter:"notices"}));var n=ws(r);if(e.status){var i={};t.recipients.map((function(t){i[1]={user_id:t,unread_count:1},i[2]={user_id:e.data[0].sender_id,unread_count:0}}));var o={};o[e.data[0].sender_id]=e.data[0].sender_id;var l={thread_id:e.data[0].thread_id,last_message_date:e.data[0].date_sent,last_message_subject:e.data[0].subject,last_message_content:e.data[0].message,star:0,recipients:i,sender_ids:o,messages:e.data,unread_count:0};n.unshift(l),a(n),U(0),M(!1)}}}):"notices"!==d.filter&&!E&&r.length&&!1!==J?wp.element.createElement(os,{message:r[J],show:function(){U(!1)},action:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return se(J,e,t)}}):""))))};function Ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(n),!0).forEach((function(t){Ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ls(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Js(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Us=wp.element,Rs=(Us.createElement,Us.useState),Fs=Us.useEffect,Hs=Us.Fragment,qs=(Us.render,wp.data),zs=qs.dispatch,$s=qs.select,Bs=function(e){var t=Ls(Rs({unfriend:!1,accept:!1,reject:!1,cancel:!1,follow:!1,unfollow:!1}),2),n=t[0],r=t[1],a=Ls(Rs(!1),2),i=(a[0],a[1]),o=Ls(Rs(e.member),2),l=o[0],c=o[1],s=Ls(Rs(!1),2);s[0],s[1];Fs((function(){c(e.member)}),[e.member]);var u=function(t){e.action&&e.action(t);var a=Ds({},n);a[t]=!0,r(a),fetch("".concat(window.vibebp.api.url,"/followers/action?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:t,user:l,token:$s("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(a){var i=Ds({},n);i[t]=!1,r(i),a.status&&("follow"===t&&(c(Ds(Ds({},l),{},{is_following:!0})),zs("vibebp").addNotification({text:a.message}),zs("vibebp").sendRealTimeNotification(a.rtm.user_id,a.rtm.message)),"unfollow"===t&&(c(Ds(Ds({},l),{},{is_following:!1})),zs("vibebp").addNotification({text:a.message}),zs("vibebp").sendRealTimeNotification(a.rtm.user_id,a.rtm.message)),e.hasOwnProperty("update")&&e.update(t,l))}))};return wp.element.createElement("div",{className:"membercard",onClick:function(){i(!0)}},wp.element.createElement("img",{src:l.avatar}),wp.element.createElement("div",{className:"member_details"},wp.element.createElement("strong",null,l.display_name?l.display_name:l.name?l.name:""),wp.element.createElement(Hs,null,l.hasOwnProperty("is_admin")?l.is_admin?wp.element.createElement("span",{className:"is-highlight is-admin"},window.vibebp.translations.admin):l.is_mod?wp.element.createElement("span",{className:"is-highlight is-mod"},window.vibebp.translations.mod):"":""),wp.element.createElement(Hs,null,l.hasOwnProperty("latest_update")&&l.latest_update?wp.element.createElement("span",null,l.latest_update.content):""),wp.element.createElement("div",{className:"request_actions"},l.hasOwnProperty("is_friend")?wp.element.createElement("a",{className:n.unfriend?"button is-warning is-small vicon vicon-na is-loading":"button is-warning is-small vicon vicon-na",onClick:e.unfriend}):l.hasOwnProperty("is_friend_request")?wp.element.createElement(Hs,null,wp.element.createElement("a",{className:n.accept?"button is-success is-small vicon vicon-face-smile is-loading":"button is-success is-small vicon vicon-face-smile",onClick:function(){return e.action("accept")}}),wp.element.createElement("a",{className:n.reject?"button is-warning is-small vicon vicon-face-sad is-loading":"button is-warning is-small vicon vicon-face-sad",onClick:function(){return e.action("reject")}})):l.hasOwnProperty("is_my_friend_request")?wp.element.createElement(Hs,null,wp.element.createElement("a",{className:n.cancel?"button is-warning is-small vicon vicon-na is-loading":"button is-warning is-small vicon vicon-na",onClick:function(){return e.action("cancel")}})):"",window.vibebp.settings.followers&&!e.hasOwnProperty("no_follow")?l.hasOwnProperty("is_following")&&l.is_following?wp.element.createElement("a",{className:n.unfollow?"button is-info is-small vicon vicon-thumb-down is-loading":"button is-info is-small vicon vicon-thumb-down",onClick:function(){return u("unfollow")}}):wp.element.createElement("a",{className:n.follow?"button is-info is-small vicon vicon-thumb-up is-loading":"button is-info is-small vicon vicon-thumb-up",onClick:function(){return u("follow")}}):"")))};function Ws(e){return function(e){if(Array.isArray(e))return Ys(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Xs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(n),!0).forEach((function(t){Zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ks(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Xs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xs(e,t){if(e){if("string"==typeof e)return Ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ys(e,t):void 0}}function Ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qs=wp.element,eu=(Qs.createElement,Qs.useState),tu=Qs.useEffect,nu=(Qs.Fragment,Qs.render,wp.data),ru=nu.dispatch,au=nu.select,iu=function(e){var t=Ks(eu(!1),2),n=t[0],r=t[1],a=Ks(eu({page:1,search:"",sort:"active"}),2),i=a[0],o=a[1],l=Ks(eu([]),2),c=l[0],s=l[1],u=Ks(eu(!1),2),m=u[0],p=u[1],d=Ks(eu(!1),2),f=d[0],b=d[1],v=Ks(eu(null),2),w=v[0],y=v[1];tu((function(){w&&w.abort();var e={},t=new AbortController;w&&(e={signal:t.signal}),y(t),r(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"?").concat(i.search.length?"nocache&":"args="+encodeURIComponent(JSON.stringify(Gs(Gs({},i),{},{search:""})))),Gs(Gs({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify(Gs(Gs({},i),{},{token:au("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status)if(m){p(!1);var t=Ws(c);e.data.users.map((function(e){t.push(e)})),s(t),t.length<e.data.total?b(!0):b(!1)}else s(e.data.users),e.data.users.length<e.data.total?b(!0):b(!1)}))}),[i]);var g=function(){o(Gs(Gs({},i),{},{page:1}))};tu((function(){return document.addEventListener("vibebp_component_reload",g),function(){document.removeEventListener("vibebp_component_reload",g)}}));return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:function(e){var t=Gs({},i);t.search=e.target.value,t.page=1,o(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){o(Gs(Gs({},i),{},{sort:e.target.value}))},value:i.sort},Object.keys(window.vibebp.components.friends.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.friends.sorters[e])}))))),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?wp.element.createElement("div",{className:"friend_list member_list"},c.map((function(e){return wp.element.createElement(Bs,{member:Gs(Gs({},e),{},{is_friend:1}),unfriend:function(){!function(e){var t=Ws(c);t.splice(c.findIndex((function(t){return t.id===e.id})),1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/removefriendship?post"),{method:"post",body:JSON.stringify({friend_userid:e.id,token:au("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&ru("vibebp").addNotification({text:e.message,icon:"vicon vicon-alert"})})),s(t)}(e)}})})),f?wp.element.createElement("a",{className:"link",onClick:function(){var e=Gs({},i);e.page=i.page+1,p(!0),o(e)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_friends_found)))};function ou(e){return function(e){if(Array.isArray(e))return pu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||mu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lu(Object(n),!0).forEach((function(t){su(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function su(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||mu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mu(e,t){if(e){if("string"==typeof e)return pu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pu(e,t):void 0}}function pu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var du=wp.element,fu=(du.createElement,du.useState),bu=du.useEffect,vu=(du.Fragment,du.render,wp.data),wu=(vu.dispatch,vu.select),yu=function(e){var t=uu(fu(!1),2),n=t[0],r=t[1],a=uu(fu({requester:0,reload:0,sort:"DESC",page:1}),2),i=a[0],o=a[1],l=uu(fu([]),2),c=l[0],s=l[1],u=uu(fu(!1),2),m=u[0],p=u[1],d=uu(fu(!1),2),f=d[0],b=d[1],v=uu(fu(!1),2),w=v[0],y=v[1],g=uu(fu(!1),2),h=g[0],_=g[1],E=uu(fu([]),2),O=E[0],j=E[1],S=uu(fu(""),2),N=S[0],k=S[1],P=uu(fu([]),2),x=P[0],A=P[1],I=uu(fu(null),2),C=I[0],T=I[1];bu((function(){if(N.length>4){_(!0),C&&C.abort();var e={},t=new AbortController;C&&(e={signal:t.signal}),T(t),fetch("".concat(window.vibebp.api.url,"/search?nocache"),cu(cu({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify({search:N,type:"user",token:wu("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){_(!1),e.status&&Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),A(e.results))}))}}),[N]),bu((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/requests?args=").concat(encodeURIComponent(JSON.stringify(cu({},i)))),{method:"post",body:JSON.stringify(cu(cu({},i),{},{token:wu("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(r(!1),b(!1),e.status)if(m){if(p(!1),e.data.length){var t=ou(c);e.data.map((function(e){t.push(e)})),s(t),20===e.data.length&&b(!0)}}else s(e.data),20===e.data.length&&b(!0)}))}),[i]);var D=function(){o(cu(cu({},i),{},{page:1}))};bu((function(){return document.addEventListener("vibebp_component_reload",D),function(){document.removeEventListener("vibebp_component_reload",D)}}));var M=function(e,t){var n=c.findIndex((function(t){return t.friendship_id===e}));fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/action?post"),{method:"post",body:JSON.stringify({friendship_id:e,action:t,friend_id:c[n].user.ID,token:wu("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){}));var r=ou(c);r.splice(n,1),s(r)};return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("a",{onClick:function(){o(cu(cu({},i),{},{requester:0}))},className:i.requester?"":"active"},window.vibebp.translations.requestee),wp.element.createElement("a",{onClick:function(){o(cu(cu({},i),{},{requester:1}))},className:i.requester?"active":""},window.vibebp.translations.requester),wp.element.createElement("a",{onClick:function(){y(!0)},className:"button is-primary"},window.vibebp.translations.add_friend)),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){o(cu(cu({},i),{},{sort:e.target.value}))},value:i.sort},Object.keys(window.vibebp.components.friends.requests_sorter).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.friends.requests_sorter[e])}))))),w?wp.element.createElement("div",{className:"recipients"},wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},wp.element.createElement(Bn,{user_ids:O},O.map((function(e){return wp.element.createElement($n,{type:"user",click:function(){var t=ou(O);t.splice(t.indexOf(e),1),j(t)},id:{user_id:e}})}))),O.length?wp.element.createElement("a",{className:"button is-primary",onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/addfriendship?post"),{method:"post",body:JSON.stringify({friends:O,token:wu("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(cu(cu({},i),{},{reload:1})),j([])})),y(!1)}},window.vibebp.translations.send_friend_request):""),wp.element.createElement("div",{className:h?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:N,placeholder:window.vibebp.translations.search_member,onChange:function(e){k(e.target.value)}}))),x.length?wp.element.createElement("div",{className:"search_results"},x.map((function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){k("");var n=ou(x),r=ou(O);-1===r.indexOf(e.id)&&(r.push(e.id),j(r),n.splice(t,1),A(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""):"",wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?wp.element.createElement("div",{className:"friend_list member_list"},c.map((function(e){return i.requester?wp.element.createElement(Bs,{member:cu(cu({},e.user),{},{is_my_friend_request:1}),action:function(t){return M(e.friendship_id,t)},no_follow:1}):wp.element.createElement(Bs,{member:cu(cu({},e.user),{},{is_friend_request:1}),action:function(t){return M(e.friendship_id,t)},no_follow:1})})),f?wp.element.createElement("a",{className:"link",onClick:function(){var e=cu({},i);e.page=i.page+1,p(!0),o(e)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_requests_found)))};function gu(e){return function(e){if(Array.isArray(e))return ju(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ou(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Ou(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ou(e,t){if(e){if("string"==typeof e)return ju(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ju(e,t):void 0}}function ju(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Su=wp.element,Nu=(Su.createElement,Su.useState),ku=Su.useEffect,Pu=(Su.Fragment,Su.render,wp.data),xu=(Pu.dispatch,Pu.select),Au=function(e){var t=Eu(Nu({}),2),n=t[0],r=t[1],a=Eu(Nu([]),2),i=a[0],o=a[1],l=Eu(Nu(""),2),c=l[0],s=l[1];return ku((function(){var e=xu("vibebp").getMenu().filter((function(e){return"friends"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.friends.label),i.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:a,onClick:function(a){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(n),!0).forEach((function(t){_u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);l.filter=e.css_id,l.page=1,n.css_id!==l.filter&&r(l),s(e.css_id);var c=gu(i),u=c.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),o(c)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"requests"===c?wp.element.createElement(yu,null):wp.element.createElement(iu,null)))};function Iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(n),!0).forEach((function(t){Tu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Du(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lu=wp.element,Ju=(Lu.createElement,Lu.useState),Uu=Lu.useEffect,Ru=(Lu.Fragment,Lu.render,wp.data),Fu=(Ru.dispatch,Ru.select),Hu=function(e){var t=Du(Ju(!1),2),n=t[0],r=t[1],a=Du(Ju({page:1,search:"",orderby:"active"}),2),i=a[0],o=a[1],l=Du(Ju([]),2),c=l[0],s=l[1];u((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/followers?").concat(i.search.length?"nocache":encodeURIComponent(JSON.stringify(Cu(Cu({},i),{},{s:""})))),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(Cu(Cu({},i),{},{token:Fu("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&s(e.followers)}))}),500,[i]);var m=function(){o(Cu(Cu({},i),{},{page:1}))};return Uu((function(){return document.addEventListener("vibebp_component_reload",m),function(){document.removeEventListener("vibebp_component_reload",m)}})),wp.element.createElement("div",{className:"vibebp_followers_wrapper"},wp.element.createElement("div",{className:"vibebp_main_head vibebp_form"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:i.search,onChange:function(e){return o(Cu(Cu({},i),{},{search:e.target.value}))}})),wp.element.createElement("select",{onChange:function(e){return o(Cu(Cu({},i),{},{orderby:e.target.value}))}},Object.keys(window.vibebp.components.followers.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.followers.sorters[e])})))),wp.element.createElement("div",{className:"vibebp_followers"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?c.map((function(e){return wp.element.createElement(Bs,{member:e})})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_followers)))};function qu(e){return function(e){if(Array.isArray(e))return Gu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Vu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zu(Object(n),!0).forEach((function(t){Bu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Vu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vu(e,t){if(e){if("string"==typeof e)return Gu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gu(e,t):void 0}}function Gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zu=wp.element,Ku=(Zu.createElement,Zu.useState),Xu=Zu.useEffect,Yu=(Zu.Fragment,Zu.render,wp.data),Qu=Yu.dispatch,em=Yu.select,tm=function(e){var t=Wu(Ku(!1),2),n=t[0],r=t[1],a=Wu(Ku({page:1,search:"",orderby:"active"}),2),i=a[0],o=a[1],l=Wu(Ku([]),2),c=l[0],s=l[1],m=Wu(Ku(!1),2),p=m[0],d=m[1],f=Wu(Ku([]),2),b=f[0],v=f[1],w=Wu(Ku(""),2),y=w[0],g=w[1],h=Wu(Ku([]),2),_=h[0],E=h[1],O=Wu(Ku(!1),2),j=(O[0],O[1]),S=Wu(Ku(!1),2),N=(S[0],S[1]),k=Wu(Ku(null),2),P=k[0],x=k[1];u((function(){P&&P.abort();var e={},t=new AbortController;P&&(e={signal:t.signal}),x(t),r(!0),fetch("".concat(window.vibebp.api.url,"/following?").concat(i.search.length?"nocache":encodeURIComponent(JSON.stringify($u($u({},i),{},{s:""})))),$u($u({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify($u($u({},i),{},{token:em("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&s(e.following)}))}),500,[i]);var A=function(){o($u($u({},i),{},{page:1}))};Xu((function(){return document.addEventListener("vibebp_component_reload",A),function(){document.removeEventListener("vibebp_component_reload",A)}})),u((function(){y.length>4&&(j(!0),fetch("".concat(window.vibebp.api.url,"/search"),{method:"post",body:JSON.stringify({search:y,type:"user",token:em("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){j(!1),e.status&&Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),E(e.results))})))}),500,[y]);var I=function(e,t){if("unfollow"==e){var n=qu(c),r=n.findIndex((function(e){return e.ID===t.id||e.ID===t.ID}));r>-1&&n.splice(r,1),s(n)}};return wp.element.createElement("div",{className:"vibebp_followers_wrapper"},wp.element.createElement("div",{className:"vibebp_followers_header vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:i.search,onChange:function(e){return o($u($u({},i),{},{search:e.target.value}))}})),p?wp.element.createElement("div",{className:"add_member_wrapper recipients"},b.length?wp.element.createElement("div",{className:"add_following_wrapper"},wp.element.createElement(Bn,{user_ids:b.map((function(e){return e.id}))},b.map((function(e,t){return wp.element.createElement($n,{type:"user",click:function(){var e=qu(b);e.splice(t,1),v(e)},id:{user_id:e.id}})}))),wp.element.createElement("a",{className:"vicon vicon-plus button is-link",onClick:function(){N(!0),fetch("".concat(window.vibebp.api.url,"/followers/action"),{method:"post",body:JSON.stringify({followers:b,action:"follow",token:em("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(N(!1),e.status){d(!1);var t=qu(b);t.map((function(e,n){t[n].is_following=1}));var n=[].concat(qu(c),qu(t));s(n),e.hasOwnProperty("message")&&e.message.length&&e.message.map((function(e){Qu("vibebp").addNotification({icon:"vicon vicon-thumb-up",message:e})})),e.hasOwnProperty("rtm")&&e.rtm.length&&e.rtm.map((function(e){Qu("vibebp").sendRealTimeNotification(e.user_id,e.message)}))}else e.hasOwnProperty("message")&&Qu("vibebp").addNotification({text:e.message})}))}})):"",wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:y,onChange:function(e){return g(e.target.value)}}),_.length?wp.element.createElement("div",{className:"search_results"},_.map((function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){g("");var n=qu(_),r=qu(b);if(-1===r.indexOf(e)){var a=$u($u({},e),{},{ID:e.id,user_nicename:e.name,avatar:e.avatar});r.push(a),v(r),n.splice(t,1),E(n)}}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""):wp.element.createElement("a",{className:"button is-primary",onClick:function(){return d(!0)}},window.vibebp.translations.follow_members)),wp.element.createElement("select",{onChange:function(e){return o($u($u({},i),{},{orderby:e.target.value}))}},Object.keys(window.vibebp.components.followers.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.followers.sorters[e])})))),wp.element.createElement("div",{className:"vibebp_followers"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?c.map((function(e){return wp.element.createElement(Bs,{member:e,update:I})})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_following)))};function nm(e){return function(e){if(Array.isArray(e))return lm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||om(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function am(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function im(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||om(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function om(e,t){if(e){if("string"==typeof e)return lm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lm(e,t):void 0}}function lm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cm=wp.element,sm=(cm.createElement,cm.useState),um=cm.useEffect,mm=(cm.Fragment,cm.render,wp.data),pm=(mm.dispatch,mm.select),dm=function(e){var t=im(sm({}),2),n=t[0],r=t[1],a=im(sm([]),2),i=a[0],o=a[1],l=im(sm(""),2),c=l[0],s=l[1];return um((function(){var e=pm("vibebp").getMenu().filter((function(e){return"followers"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.followers.label),i.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rm(Object(n),!0).forEach((function(t){am(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);l.filter=e.css_id,l.page=1,n.css_id!==l.filter&&r(l),s(e.css_id);var c=nm(i),u=c.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),o(c)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"following"===c?wp.element.createElement(tm,null):wp.element.createElement(Hu,null)))};function fm(e){return function(e){if(Array.isArray(e))return hm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||gm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bm(Object(n),!0).forEach((function(t){wm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ym(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||gm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gm(e,t){if(e){if("string"==typeof e)return hm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hm(e,t):void 0}}function hm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _m=wp.element,Em=(_m.createElement,_m.useState),Om=_m.useEffect,jm=_m.Fragment,Sm=(_m.render,_m.useRef),Nm=wp.data,km=Nm.dispatch,Pm=Nm.select,xm=function(e){var t=Sm(null),n=ym(Em(!0),2),r=n[0],a=n[1],i=ym(Em({component:"",id:"",search_terms:"",type:"",role:"",page:1}),2),o=i[0],l=i[1],c=ym(Em([]),2),s=c[0],m=c[1],p=ym(Em(!1),2),d=p[0],f=p[1],b=ym(Em(!1),2),v=b[0],w=b[1],y=ym(Em([]),2),g=y[0],h=y[1],_=ym(Em(""),2),E=_[0],O=_[1],j=ym(Em([]),2),S=j[0],N=j[1],k=ym(Em([]),2),P=k[0],x=k[1],A=ym(Em({}),2),I=A[0],C=A[1],T=ym(Em(null),2),D=T[0],M=T[1],L=ym(Em(!1),2),J=L[0],U=L[1],R=ym(Em(!1),2),F=R[0],H=R[1],q=ym(Em(!1),2),z=q[0],$=q[1];Om((function(){if(e.hasOwnProperty("type")){var t=vm({},o);t.component=e.type,t.id=e.id,l(t)}}),[e.type,e.id]),u((function(){if(E.length>4){D&&D.abort();var e={},t=new AbortController;D&&(e={signal:t.signal}),M(t),fetch("".concat(window.vibebp.api.url,"/search?nocache"),vm(vm({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify({search:E,type:"user",token:Pm("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),N(e.results))}))}}),500,[E]),Om((function(){var t=vm({},o);t.token=Pm("vibebp").getToken();var n=Pm("vibebp").getUser();t.user_id=n.id,a(!0);var r=window.vibebp.api.endpoints.members;o.component!==window.vibebp.api.endpoints.members&&(r=e.type+"/members/"+e.id),D&&D.abort();var i={},l=new AbortController;D&&(i={signal:l.signal}),M(l),console.log(J),J&&(r+="?force"),fetch("".concat(window.vibebp.api.url,"/").concat(r),vm(vm({method:"post"},i),{},{body:JSON.stringify(t)})).then((function(e){return e.json()})).then((function(e){U(!1),a(!1),e.status&&(C(e.meta),m(e.data.members))}))}),[o]);return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:o.search_terms,placeholder:window.vibebp.translations.search_member,onChange:function(e){var t=vm({},o);t.search_terms=e.target.value,l(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{value:o.role,onChange:function(e){l(vm(vm({},o),{},{role:e.target.value}))}},Object.keys(window.vibebp.components[e.type].membertypes).map((function(t){return wp.element.createElement("option",{value:t},window.vibebp.components[e.type].membertypes[t])}))))),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:"members"},r?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):s.length?s.map((function(t){return e.hasOwnProperty("type")?wp.element.createElement("div",{className:P.indexOf(t.ID)>-1?"selected":"",onClick:function(){var e=fm(P);P.indexOf(t.ID)>-1?e.splice(P.indexOf(t.ID),1):e.push(t.ID),x(e)}},wp.element.createElement(Bs,{member:t,type:e.type,id:e.id})):wp.element.createElement("div",{className:P.indexOf(t.ID)>-1?"selected":""},wp.element.createElement(Bs,{member:t}))})):"")),wp.element.createElement("div",{className:"portal_footer"},"groups"===o.component?v||r?v?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"":wp.element.createElement(jm,null,"upload_members_csv"==d?wp.element.createElement("div",{className:"upload_form"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){f(!1)}}),wp.element.createElement("div",{class:"vibep_csv_register"},wp.element.createElement("label",null,wp.element.createElement("span",null,z?wp.element.createElement("span",{onClick:function(){}},z.name):wp.element.createElement("span",null,window.vibebp.translations.select_csv),wp.element.createElement("input",{type:"file",accept:".csv",ref:t,onChange:function(e){t.current.files[0].size<window.vibebp.settings.upload_limit?$(t.current.files[0]):km("vibebp").addNotification({text:window.vibebp.translations.image_size_error})}}))),wp.element.createElement("a",{class:"button",href:window.vibebp.settings.groups_csv_file,target:"_blank"},window.vibebp.translations.download_sample),z?wp.element.createElement("a",{class:F?"button is-loading":"button",onClick:function(){H(!0);var t={token:Pm("vibebp").getToken(),group_id:e.id},n=new FormData;n.append("body",JSON.stringify(t)),n.append("file",z),fetch("".concat(window.vibebp.api.url,"/groups/import_users?upload"),{method:"post",body:n}).then((function(e){return e.ok?e.json():{status:0,message:window.vibebp.translations.error_loading_data}})).then((function(e){if(H(!1),e.status){f(!1),U(!0);var t=vm({},o);t.page=1,l(t),$(!1)}e.hasOwnProperty("message")&&km("vibebp").addNotification({text:e.message})})).catch((function(e){H(!1),console.error("Uh oh, an error!",e),km("vibebp").addNotification({text:window.vibebp.translations.error_loading_data})}))}},window.vibebp.translations.upload):"")):d?wp.element.createElement("div",{className:"recipients"},wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},g.length?wp.element.createElement(jm,null,wp.element.createElement(Bn,{user_ids:g},g.map((function(e){return wp.element.createElement($n,{type:"user",click:function(){var t=fm(g);t.splice(t.indexOf(e),1),h(t)},id:{user_id:e}})}))),wp.element.createElement("a",{className:v?"is-loading button":"button vicon vicon-control-forward",onClick:function(){"invite"==d&&(w(!0),fetch("".concat(window.vibebp.api.url,"/groups/invite_member/").concat(e.id,"/?").concat(encodeURIComponent(JSON.stringify(vm(vm({},o),{},{search_terms:""}))),"&post"),{method:"post",body:JSON.stringify({invitees:g,token:Pm("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){w(!1),a(!1),e.status&&(f(!1),N([]),O([])),e.hasOwnProperty("message")&&km("vibebp").addNotification({text:e.message}),U(!0);var t=vm({},o);t.page=1,l(t)}))),"add"==d&&(w(!0),fetch("".concat(window.vibebp.api.url,"/groups/join_group/").concat(e.id,"/?post"),{method:"post",body:JSON.stringify({invitees:g,token:Pm("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){w(!1),a(!1),e.status&&(f(!1),N([]),O([])),e.hasOwnProperty("message")&&km("vibebp").addNotification({text:e.message}),U(!0);var t=vm({},o);t.page=1,l(t)}))),"requests"==d&&(w(!0),fetch("".concat(window.vibebp.api.url,"/groups/requests/").concat(e.id,"/?").concat(encodeURIComponent(JSON.stringify(vm(vm({},o),{},{search_terms:""}))),"&post"),{method:"post",body:JSON.stringify({invitees:g,token:Pm("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){w(!1),a(!1),e.status&&(f(!1),N([]),O([])),e.hasOwnProperty("message")&&km("vibebp").addNotification({text:e.message}),U(!0);var t=vm({},o);t.page=1,l(t)})))}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){f(!1)}})):""),wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",value:E,placeholder:window.vibebp.translations.search_member,onChange:function(e){O(e.target.value)}})),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){f(!1)}}),"add"==d?wp.element.createElement("a",{onClick:function(){return f("upload_members_csv")},className:"button is-info"},wp.element.createElement("span",{className:"vicon vicon-upload"})):"")),S.length?wp.element.createElement("div",{className:"search_results"},S.map((function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){O("");var n=fm(S),r=fm(g);-1===r.indexOf(e.id)&&(r.push(e.id),h(r),n.splice(t,1),N(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""):wp.element.createElement("div",{className:"actions"},!P.length&&!d&&I.hasOwnProperty("can_invite")&&I.can_invite?wp.element.createElement("a",{onClick:function(){return f("invite")},className:"button is-primary"},window.vibebp.translations.invite_members):"",!d&&I.hasOwnProperty("can_add_members")&&I.can_add_members?wp.element.createElement(jm,null,P.length?"":wp.element.createElement(jm,null,wp.element.createElement("a",{onClick:function(){return f("add")},className:"button is-info"},window.vibebp.translations.add_members)),P.length&&I.member_actions?wp.element.createElement("div",{className:"members_actions_block"},wp.element.createElement("select",{onChange:function(t){P.length&&e.memberActions(t.target.value,P).then((function(){U(!0),x([]),l(vm({},o))}))}},wp.element.createElement("option",null,window.vibebp.translations.select_action),Object.keys(I.member_actions).map((function(e){return wp.element.createElement("option",{value:e},I.member_actions[e])})))):""):"")):""))};function Am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Im(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dm=wp.element,Mm=(Dm.createElement,Dm.render,Dm.useState),Lm=Dm.useEffect,Jm=(Dm.useContext,Dm.Fragment,Dm.RawHTML,function(e){var t=Cm(Mm({}),2),n=t[0],r=t[1];Lm((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Am(Object(n),!0).forEach((function(t){Im(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Am(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")},i=!1;return n.hasOwnProperty("value")&&n.value&&(n.hasOwnProperty("options")&&n.options.length&&n.options[1]&&n.options[1].hasOwnProperty("value")&&n.value==n.options[1].value||1==n.value)&&(i=!0),wp.element.createElement("div",{className:"switch"},i?wp.element.createElement("input",{type:"checkbox",id:n.id,checked:!0,onClick:function(){n.hasOwnProperty("options")&&n.options.length&&n.options[0]?a(n.options[0].value):a(null)}}):wp.element.createElement("input",{type:"checkbox",id:n.id,onClick:function(){n.hasOwnProperty("options")&&n.options.length&&n.options[1]&&n.options[1].hasOwnProperty("value")?a(n.options[1].value):a(1)}}),wp.element.createElement("label",{for:n.id,className:"slider"}))});function Um(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qm=wp.element,zm=(qm.createElement,qm.render,qm.useState),$m=qm.useEffect,Bm=(qm.useContext,qm.Fragment,qm.RawHTML,function(e){var t=Fm(zm(e.field),2),n=t[0],r=t[1];$m((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Um(Object(n),!0).forEach((function(t){Rm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Um(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"textarea_field"},wp.element.createElement("textarea",{id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default},n.value))});function Wm(e){return function(e){if(Array.isArray(e))return Vm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Vm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vm(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gm=wp.element,Zm=(Gm.createElement,Gm.useRef),Km=Gm.useEffect;Gm.Fragment,Gm.render;function Xm(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Ym(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))if(n){for(var r=0;r<t.length;r++)if(t[r][n]===e[n])return r}else for(var a=0;a<t.length;a++)if(t[a].id===e.id)return a;return-1}var Qm=Xm;function ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach((function(t){np(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function np(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ap(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ap(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ap(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ip=wp.element,op=(ip.createElement,ip.render,ip.useState),lp=ip.useEffect,cp=(ip.useContext,ip.Fragment,ip.RawHTML,function(e){var t=rp(op(!1),2),n=t[0],r=t[1],a=rp(op({}),2),i=a[0],o=a[1];lp((function(){var t=tp({},e.field);Xm(e.field.value)&&!Xm(e.field.default)&&(t.value=e.field.default),o(t)}),[e.field]);return wp.element.createElement("div",{className:"number"},n||9999!==i.value?wp.element.createElement("input",{type:"number",id:i.id,value:i.value,onChange:function(t){return function(t){var n=tp({},i);n.value=t.target.value,o(n),e.update(n,e.fieldIndex,"fieldvaluechanged")}(t)},placeholder:i.default}):wp.element.createElement("span",{onClick:function(){return r(!n)}},window.vibebp.translations.unlimited))});function sp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function up(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dp=wp.element,fp=(dp.createElement,dp.render,dp.useState),bp=dp.useEffect,vp=(dp.useContext,dp.Fragment,dp.RawHTML,function(e){var t=mp(fp({}),2),n=t[0],r=t[1];bp((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sp(Object(n),!0).forEach((function(t){up(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"number"},wp.element.createElement("input",{type:"number",id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default}))});function yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ep=wp.element,Op=(Ep.createElement,Ep.render,Ep.useState),jp=Ep.useEffect,Sp=(Ep.useContext,Ep.Fragment,Ep.RawHTML,function(e){var t=hp(Op({}),2),n=t[0],r=t[1];jp((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(n),!0).forEach((function(t){gp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id},wp.element.createElement("input",{type:"text",id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default}))});function Np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ap=wp.element,Ip=(Ap.createElement,Ap.render,Ap.useState),Cp=Ap.useEffect,Tp=(Ap.useContext,Ap.Fragment,Ap.RawHTML,function(e){var t=Pp(Ip({}),2),n=t[0],r=t[1];Cp((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(n),!0).forEach((function(t){kp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Np(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"select"},wp.element.createElement("select",{id:n.id,onChange:function(e){return a(e)}},n.options&&n.options.length?n.options.map((function(e,t){var r=!1;return e.value==n.value&&(r=!0),wp.element.createElement("option",{value:e.value,selected:r},e.label)})):""))});function Dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Up=wp.element,Rp=(Up.createElement,Up.render,Up.useState),Fp=Up.useEffect,Hp=(Up.useContext,Up.Fragment,Up.RawHTML,Up.useRef),qp=function(e){var t=Lp(Rp(e.field),2),n=t[0],r=t[1],a=Hp(null);Fp((function(){r(e.field)}),[e.field]),Fp((function(){if(a.current){var t={altInput:!0,dateFormat:"Y-m-d",defaultDate:e.field.hasOwnProperty("value")&&e.field.value.length?e.field.value:[],onChange:i};flatpickr(a.current,t)}}),[]);var i=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dp(Object(n),!0).forEach((function(t){Mp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(t&&t.length){var i=t[0].getDate();(i=i.toString()).length<2&&(i="0"+i);var o=t[0].getMonth()+1;(o=o.toString()).length<2&&(o="0"+o);var l=t[0].getFullYear()+"-"+o+"-"+i;a.value=l}else a.value="";r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"date"},wp.element.createElement("input",{type:"text",ref:a}))};function zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vp=wp.element,Gp=(Vp.createElement,Vp.render,Vp.useState),Zp=Vp.useEffect,Kp=(Vp.useContext,Vp.Fragment,Vp.RawHTML,Vp.useRef);function Xp(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Yp=function(e){var t=Bp(Gp(e.field),2),n=t[0],r=t[1],a=Kp(null);Zp((function(){r(e.field)}),[e.field]),Zp((function(){if(a.current){var t={enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:e.field.hasOwnProperty("value")&&!Xp(e.field.value)?e.field.value:"",onChange:i};flatpickr(a.current,t)}}),[]);var i=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zp(Object(n),!0).forEach((function(t){$p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(t&&t.length){var i=t[0].getHours();(i=i.toString()).length<2&&(i="0"+i);var o=t[0].getMinutes();(o=o.toString()).length<2&&(o="0"+o);var l=i+":"+o;a.value=l}else a.value="";r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"date"},wp.element.createElement("input",{type:"text",ref:a}))};function Qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ed(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function td(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rd=wp.element,ad=(rd.createElement,rd.render,rd.useState),id=rd.useEffect,od=(rd.useContext,rd.Fragment,rd.RawHTML,function(e){var t=td(ad({}),2),n=t[0],r=t[1];id((function(){r(e.field)}),[e.field]);var a=function(t,a,i){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(n),!0).forEach((function(t){ed(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);o.hasOwnProperty("value")||(o.value={}),o.value.hasOwnProperty(t.id)||(o.value[t.id]={}),o.value[t.id][t.course]=t.value,r(o),e.update(o,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id},n.courses&&n.courses.length?n.courses.map((function(e,t){var r=e.id,i=n.hasOwnProperty("value")&&n.value.hasOwnProperty("batch_start_time")&&n.value.batch_start_time[r]?n.value.batch_start_time[r]:null,o=n.hasOwnProperty("value")&&n.value.hasOwnProperty("batch_end_time")&&n.value.batch_end_time[r]?n.value.batch_end_time[r]:null,l=n.hasOwnProperty("value")&&n.value.hasOwnProperty("batch_repeatable")&&n.value.batch_repeatable[r]?n.value.batch_repeatable[r]:null,c=n.hasOwnProperty("value")&&n.value.hasOwnProperty("batch_repeatable_parameter")&&n.value.batch_repeatable_parameter[r]?n.value.batch_repeatable_parameter[r]:null;return wp.element.createElement("div",{className:"course_settings"},wp.element.createElement("div",{className:"label"},wp.element.createElement("label",null,e.title)),wp.element.createElement("div",{className:"settings"},wp.element.createElement("div",{className:"timings"},wp.element.createElement("div",null,wp.element.createElement("label",null,window.vibebp.translations.start_time),wp.element.createElement(Yp,{field:{id:"batch_start_time",value:i,course:r,fieldIndex:t},fieldIndex:t,update:a})),wp.element.createElement("div",null,wp.element.createElement("label",null,window.vibebp.translations.end_time),wp.element.createElement(Yp,{field:{id:"batch_end_time",value:o,course:r,fieldIndex:t},fieldIndex:t,update:a}))),wp.element.createElement("div",{className:"occurence"},wp.element.createElement("div",null,wp.element.createElement("label",null,window.vibebp.translations.every)),wp.element.createElement("div",null,wp.element.createElement(vp,{field:{id:"batch_repeatable",value:l,course:r,fieldIndex:t},update:a}),wp.element.createElement(Tp,{field:{id:"batch_repeatable_parameter",value:c,options:n.options,course:r,fieldIndex:t},fieldIndex:t,update:a})))))})):"")}),ld=wp.element,cd=(ld.createElement,ld.render,function(e){return wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))});function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sd(Object(n),!0).forEach((function(t){md(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function md(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fd=wp.element,bd=(fd.createElement,fd.render,fd.useState),vd=fd.useEffect,wd=(fd.useContext,fd.Fragment,fd.RawHTML,function(e){var t=pd(bd(e.field),2),n=t[0],r=t[1],a=pd(bd(""),2),i=a[0],o=a[1],l=pd(bd([]),2),c=l[0],s=l[1],u=pd(bd({}),2),m=u[0],p=u[1],d=pd(bd(!1),2),f=d[0],b=d[1],v=wp.data,w=v.dispatch,y=v.select,g=y("vibebp").getUser();return g.token=y("vibebp").getToken(),vd((function(){var t=ud({},n);m.id&&(t.value=m.id,t.show_value=m,r(t),e.update(t,"fieldvaluechanged"))}),[m]),vd((function(){if(i.length>3){b(!0);var t="",n="";e.field.cpt&&(t=e.field.cpt,n="selectcpt"),e.field.taxonomy&&(t=e.field.taxonomy,n="taxonomy"),fetch("".concat(window.vibebp.api.url,"/").concat(n,"/").concat(t,"?nocache"),{method:"post",body:JSON.stringify({search:i,token:g.token})}).then((function(e){return e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}})).then((function(e){e.status&&Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),s(e.posts)),b(!1)})).catch((function(e){b(!1),console.error("Uh oh, an error!",e),w("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))}}),[i]),wp.element.createElement("div",{className:"selectcptfield"},wp.element.createElement("div",{className:"selectcptfield_list"},m&&m.text?wp.element.createElement("div",{className:"selectcptfield_items"},wp.element.createElement("span",{type:n.cpt,onClick:function(){p({})},dangerouslySetInnerHTML:{__html:m.text}})):wp.element.createElement("div",{className:f?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:i,placeholder:window.vibebp.translations.type_keyword,onChange:function(e){o(e.target.value)}}))),c.length?wp.element.createElement("div",{className:"search_results"},c.map((function(e,t){return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){o("");var n=ud({},m);n=e,c.splice(t,1),p(n),s([])}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.text}}))}))):"")}),yd=wp.element,gd=(yd.createElement,yd.useState,yd.useEffect,yd.Fragment,yd.render,yd.useRef,wp.data);gd.dispatch,gd.select;function hd(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function _d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_d(Object(n),!0).forEach((function(t){Od(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nd=wp.element,kd=(Nd.createElement,Nd.render,Nd.useState),Pd=Nd.useEffect,xd=(Nd.useContext,Nd.Fragment),Ad=wp.data,Id=Ad.dispatch,Cd=Ad.select,Td=function(e){var t=Cd("vibebp").getUser();t.token=Cd("vibebp").getToken();var n=jd(kd({}),2),r=n[0],a=n[1],i=jd(kd(!1),2),o=i[0],l=i[1],c=jd(kd(!1),2),s=c[0],u=c[1],m=jd(kd(!1),2),p=m[0],d=m[1],f=jd(kd(!1),2),b=f[0],v=f[1],w=jd(kd(!1),2),y=w[0],g=w[1],h=jd(kd({}),2),_=h[0],E=h[1];Pd((function(){var t=Ed({},e.field);!hd(e.field.value)&&hd(e.field.show_value)?r.value!==e.field.value&&(u(!0),fetch("".concat(window.vibebp.api.url,"/getProduct/").concat(e.field.value,"?nocache"),{method:"post",body:JSON.stringify({field:e.field,token:Cd("vibebp").getToken()})}).then((function(e){return e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}})).then((function(e){u(!1),e.status?(t.show_value=e.show_value,a(t)):(t.value=0,e.hasOwnProperty("message")&&Id("vibebp").setNotification({text:e.message}),a(t))})).catch((function(e){u(!1),console.error("Uh oh, an error!",e),Id("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))):(t.hasOwnProperty("is_bundle")&&t.is_bundle&&g(!0),a(t))}),[e.field]);var O=function(e){var t=Ed({},r);t.fields[r.fields.findIndex((function(t){return t.id==e.field.id}))]=e.field,a(t)};return wp.element.createElement("div",{className:"course_product_price"},o?wp.element.createElement(xd,null,wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){l(!1)}}),wp.element.createElement("div",{className:"add_cpt"},"create"!=p&&"bundle"!=p?wp.element.createElement("div",{className:"select_cpt_wrapper"},"select"==p?wp.element.createElement("div",{className:"select_existing_cpt"},wp.element.createElement(wd,{field:{cpt:"product"},update:function(e){E(e)}}),wp.element.createElement("div",{className:"selectcptactions"},wp.element.createElement("a",{className:"button is-primary",onClick:function(){var t,n,i;t=_,n="fieldvaluechanged",i=Ed({},r),"fieldvaluechanged"==n&&(i.value=t.show_value.id,i.show_value=t.show_value,"bundle"==p?(g(!0),i.is_bundle=!0):(g(!1),i.is_bundle=!1),Object.keys(t.show_value.fields).map((function(e,n){if("meta"==e)t.show_value.fields.meta.map((function(e){i.fields.findIndex((function(t){return t.id==e.meta_key}))>-1&&(i.fields[i.fields.findIndex((function(t){return t.id==e.meta_key}))].value=e.meta_value)}));else{var r=i.fields.findIndex((function(t){return t.id==e}));r>-1?i.fields[r].value=t.show_value.fields[e]:i.fields.push({id:e,value:t.show_value.fields[e]})}}))),e.update(i,e.fieldIndex,"fieldvaluechanged"),a(i),l(!1)}},wp.element.createElement("i",{class:"vicon vicon-plus"})),wp.element.createElement("a",{className:"link",onClick:function(){d(!1)}},window.vibebp.translations.cancel))):wp.element.createElement("a",{onClick:function(){d("select")}},wp.element.createElement("i",{className:"vicon vicon-search"}),window.vibebp.translations.add_cpt.product.search)):"","select"!=p&&"bundle"!=p?wp.element.createElement("div",{className:"create_cpt_wrapper"},"create"==p?wp.element.createElement("div",{className:"new_cpt_wrapper"},wp.element.createElement("div",{className:"new_cpt_wrapper"},r.fields.map((function(e,t){if(!(e&&e.hasOwnProperty("is_child")&&e.is_child))return wp.element.createElement(xd,null,wp.element.createElement(qb,{field:e,fieldIndex:t,update:O}),e.hasOwnProperty("children")&&e.children.length&&!hd(e.value)&&"H"!=e.value?e.children.map((function(e){var t=r.fields.findIndex((function(t){return t&&t.hasOwnProperty("id")&&t.id==e}));return wp.element.createElement(qb,{field:r.fields[t],fieldIndex:t,update:O})})):"")}))),wp.element.createElement("div",null,wp.element.createElement("a",{className:b?"button is-primary is-loading":"button is-primary",onClick:function(){!function(){var n=Ed({},r);v(!0);var a={post_title:e.group.name,post_content:e.group.name,meta:[]};r.fields.map((function(e){"meta"==e.from&&a.meta.push({meta_key:e.id,meta_value:e.value})})),fetch("".concat(window.vibebp.api.url,"/createElement/product?post"),{method:"post",body:JSON.stringify(Ed(Ed({},a),{},{token:t.token}))}).then((function(e){return e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}})).then((function(t){v(!1),t.status?(n.value=t.data.id,n.hasOwnProperty("show_value")||(n.show_value={}),n.show_value=t.data,g(!1),n.is_bundle=!1,e.update(n,e.fieldIndex,"fieldvaluechanged"),l(!1)):t.hasOwnProperty("message")&&Id("vibebp").addNotification({text:t.message})})).catch((function(e){v(!1),console.error("Uh oh, an error!",e),Id("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))}()}},window.vibebp.translations.add_cpt.product.add),wp.element.createElement("a",{className:"link",onClick:function(){d(!1)}},window.vibebp.translations.cancel))):wp.element.createElement("a",{class:"more",onClick:function(){d("create")}},wp.element.createElement("i",{class:"vicon vicon-plus"}),window.vibebp.translations.add_cpt.product.add)):"")):hd(r.value)?wp.element.createElement("span",null,window.vibebp.translations.no_price,wp.element.createElement("span",{onClick:function(){l(!0)},className:"vicon vicon-pencil"})):wp.element.createElement("div",{className:"product_price_wrapper"},s?wp.element.createElement(cd,null):r.hasOwnProperty("show_value")?wp.element.createElement("div",null,wp.element.createElement("div",null,wp.element.createElement("div",{className:"product_price",dangerouslySetInnerHTML:{__html:r.show_value.text}}),y?wp.element.createElement("a",{class:"tag link",target:"_blank",href:r.hasOwnProperty("show_value")&&r.show_value.hasOwnProperty("link")?r.show_value.link:"#"},window.vibebp.translations.add_cpt.product.bundle):""),wp.element.createElement("span",null,wp.element.createElement("span",{onClick:function(){l(!0),d("create")},className:"vicon vicon-pencil"}),wp.element.createElement("span",{onClick:function(){var t=Ed({},r);t.value=null,t.show_value=null,g(!1),t.is_bundle=!1,d(!0),e.update(t,e.fieldIndex,"fieldvaluechanged")},className:"vicon vicon-trash"}))):wp.element.createElement("span",null,window.vibebp.translations.no_price,wp.element.createElement("span",{onClick:function(){l(!0)},className:"vicon vicon-pencil"}))))};function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dd(Object(n),!0).forEach((function(t){Ld(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ld(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ud(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ud(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rd=wp.element,Fd=(Rd.createElement,Rd.render,Rd.useState),Hd=Rd.useEffect,qd=(Rd.useContext,Rd.Fragment,Rd.RawHTML,function(e){var t=Jd(Fd({}),2),n=t[0],r=t[1];Hd((function(){r(e.field)}),[e.field]);return wp.element.createElement("div",{className:"repeatable",id:n.id},wp.element.createElement("a",{className:"button small is-primary add_repeatable_count_option",onClick:function(){var t=Md({},n);Qm(t.value)&&(t.value=[]),t.value.push("Option "+(t.value.length+1)),r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}},window.vibebp.translations.add_option),wp.element.createElement("ul",{className:"repeatableoption"},n.value&&n.value.length?n.value.map((function(t,a){return wp.element.createElement("li",null,wp.element.createElement("span",null,a+1+" "),wp.element.createElement("input",{type:"text",value:t,onChange:function(t){!function(t,a){var i=Md({},n);i.value[a]=t,r(i),e.update(i,e.fieldIndex,"fieldvaluechanged")}(t.target.value,a)}}),wp.element.createElement("span",{class:"vicon vicon-close",onClick:function(){!function(t){var a=Md({},n);a.value.splice(t,1),r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")}(a)}}))})):""))});function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vd=wp.element,Gd=(Vd.createElement,Vd.render,Vd.useState),Zd=Vd.useEffect,Kd=(Vd.useContext,Vd.Fragment,Vd.RawHTML,function(e){var t=Bd(Gd(e.field),2),n=t[0],r=t[1],a=Bd(Gd({post_content:"",raw:{}}),2),i=(a[0],a[1]),o=Bd(Gd(Math.round(1e5*Math.random())),2),l=o[0];o[1];return Zd((function(){if(e.field&&e.field.id){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_"+e.field.id+l+"_editor",content:e.field.hasOwnProperty("value")?e.field.value:"",raw:e.field.hasOwnProperty("raw")?e.field.raw:"",components:["editor"],updater:e.field.id+l}});document.dispatchEvent(t)}}),[e.field]),Zd((function(){e.field&&e.field.id&&document.addEventListener("vibe_editor_content_update_"+e.field.id+l,(function(t){i({post_content:t.detail.raw_html,raw:t.detail.editor_content});var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zd(Object(n),!0).forEach((function(t){$d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.field);n.value=t.detail.raw_html,n.raw=t.detail.editor_content,r(n),e.update(n,e.fieldIndex,"fieldvaluechanged")}))}),[]),wp.element.createElement("div",{className:"vibev_editor"},wp.element.createElement("div",{className:"vibe_"+n.id+l+"_editor"},wp.element.createElement("textarea",{value:n.value})))});function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(n),!0).forEach((function(t){Qd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ef(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nf=wp.element,rf=(nf.createElement,nf.render,nf.useState),af=nf.useEffect,of=(nf.useContext,nf.Fragment,nf.RawHTML,wp.data),lf=(of.dispatch,of.select),cf=function(e){var t=ef(rf({}),2),n=t[0],r=t[1],a=ef(rf(""),2),i=a[0],o=a[1],l=ef(rf([]),2),c=l[0],s=l[1],u=ef(rf({}),2),m=u[0],p=u[1],d=ef(rf(!1),2),f=d[0],b=d[1],v=lf("vibebp").getUser();return v.token=lf("vibebp").getToken(),af((function(){e.field&&e.field.hasOwnProperty("show_value")&&p(e.field.show_value),r(e.field)}),[e.field]),af((function(){var t=Yd({},n);m.id&&(t.value=m.id,t.show_value=m,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged"))}),[m]),af((function(){if(i.length>3){b(!0);var e="",t="";n.cpt&&(e=n.cpt,t="selectcpt"),n.post_type&&(e=n.post_type,t="selectcpt"),n.taxonomy&&(e=n.taxonomy,t="taxonomy"),fetch("".concat(window.vibebp.api.url,"/").concat(t,"/").concat(e,"?nocache"),{method:"post",body:JSON.stringify({search:i,token:v.token})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),s(e.posts)),b(!1)}))}}),[i]),wp.element.createElement("div",{className:"selectcptfield"},wp.element.createElement("div",{className:"selectcptfield_list"},wp.element.createElement("div",{className:"selectcptfield_items"},m&&m.text?wp.element.createElement("span",{type:n.cpt,onClick:function(){p({})}},m.text):"")),wp.element.createElement("input",{type:"text",value:i,placeholder:window.vibebp.translations.type_keyword,onChange:function(e){o(e.target.value)}}),c.length?wp.element.createElement("div",{className:"search_results"},c.map((function(e,t){return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){o("");var n=Yd({},m);n=e,c.splice(t,1),p(n)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.text}}))}))):f?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(cd,null)):"")};function sf(e){return function(e){if(Array.isArray(e))return ff(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||df(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||df(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function df(e,t){if(e){if("string"==typeof e)return ff(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ff(e,t):void 0}}function ff(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bf=wp.element,vf=(bf.createElement,bf.render,bf.useState),wf=bf.useEffect,yf=(bf.useContext,bf.Fragment,bf.RawHTML,wp.data),gf=yf.dispatch,hf=yf.select,_f=function(e){var t=pf(vf({}),2),n=t[0],r=t[1],a=pf(vf(""),2),i=a[0],o=a[1],l=pf(vf([]),2),c=l[0],s=l[1],u=pf(vf([]),2),m=u[0],p=u[1],d=pf(vf(!1),2),f=d[0],b=d[1],v=pf(vf(!1),2),w=v[0],y=v[1];return hf("vibebp").getUser().token=hf("vibebp").getToken(),wf((function(){e.field&&e.field.hasOwnProperty("show_value")&&p(e.field.show_value),r(e.field)}),[e.field]),wf((function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uf(Object(n),!0).forEach((function(t){mf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(m&&m.length){var a=[];m.map((function(e){a.push(e.id)})),t.value=a,t.show_value=m,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),[m]),wf((function(){if(i.length>3){y(!0);var e="",t="";n.cpt&&(e=n.cpt,t="selectcpt"),n.taxonomy&&(e=n.taxonomy,t="taxonomy"),fetch("".concat(window.vibebp.api.url,"/").concat(t,"/").concat(e,"?nocache"),{headers:{Authorization:window.vibebp.token},method:"post",body:JSON.stringify({search:i,token:hf("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status?Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),s(e.posts)):gf("vibebp").addNotification({text:e.message}),y(!1)}))}}),[i]),wp.element.createElement("div",{className:"selectcptfield"},wp.element.createElement("div",{className:"selectcptfield_list"},m.length?wp.element.createElement("div",{className:"selectcptfield_items"},m.map((function(e){var t=n.cpt?n.taxonomy:"";return wp.element.createElement("span",{type:t,onClick:function(){var t=sf(m);t.splice(Ym(e,m),1),p(t)}},e.text)}))):"",f?wp.element.createElement("span",{className:"add_wrapper"},wp.element.createElement("input",{type:"text",value:i,placeholder:n.hasOwnProperty("placeholder")?n.placeholder:window.vibebp.translations.type_keyword,onChange:function(e){o(e.target.value)}}),wp.element.createElement("span",{onClick:function(){b(!f)},className:"vicon vicon-close"})):wp.element.createElement("span",{className:"add_wrapper",onClick:function(){b(!f)}},window.vibebp.translations.add,wp.element.createElement("span",{className:"vicon vicon-plus"}))),c.length?wp.element.createElement("div",{className:"search_results"},c.map((function(e,t){if(-1===Ym(e,m))return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){o("");var n=sf(m);-1===Ym(e,n)&&(n.push(e),c.splice(t,1),p(n))}},wp.element.createElement("span",null,e.text))}))):w?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(cd,null)):"")};function Ef(e){return function(e){if(Array.isArray(e))return kf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Nf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Of(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Nf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nf(e,t){if(e){if("string"==typeof e)return kf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kf(e,t):void 0}}function kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pf=wp.element,xf=(Pf.createElement,Pf.render,Pf.useState),Af=Pf.useEffect,If=(Pf.useContext,Pf.Fragment,Pf.RawHTML,function(e){var t=Sf(xf({}),2),n=t[0],r=t[1],a=Sf(xf(""),2),i=(a[0],a[1]),o=Sf(xf([]),2),l=o[0],c=o[1],s=Sf(xf([]),2),u=s[0],m=s[1],p=Sf(xf(!1),2),d=p[0],f=p[1],b=Sf(xf(!1),2),v=b[0],w=b[1],y=Sf(xf(!1),2),g=y[0],h=y[1];Af((function(){if(e.field.options.length&&0==g&&e.field.hasOwnProperty("value")&&e.field.value.length){var t=[];e.field.value.map((function(n,r){var a=e.field.options.findIndex((function(e){return n==e.value}));-1!==a&&t.push(e.field.options[a])})),m(t)}r(e.field),h(!0)}),[e.field]),Af((function(){if(1==g){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Of(Object(n),!0).forEach((function(t){jf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Of(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(u&&u.length){var a=[];u.map((function(e){a.push(e.value)})),t.value=a,t.show_value=u,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}}),[u]),Af((function(){g&&(f(!0),c(n.options),f(!1))}),[g]);var _="search_results";return v&&(_="search_results active"),wp.element.createElement("div",{className:"selectcptfield multiselect"},wp.element.createElement("div",{className:"selectcptfield_list"},u.length?wp.element.createElement("div",{className:"selectcptfield_items"},u.map((function(e){var t=n.cpt?n.multiselect:"";return wp.element.createElement("span",{type:t,onClick:function(){var t=Ef(u),n=Ef(l);t.splice(Ym(e,u,"value"),1),n.push(e),c(n),m(t)}},e.label)}))):""),wp.element.createElement("div",{className:"selectimitate",onClick:function(){w(!v)}},v?wp.element.createElement("i",{class:"vicon vicon-angle-up","aria-hidden":"true"}):wp.element.createElement("i",{class:"vicon vicon-angle-down","aria-hidden":"true"}),l.length?wp.element.createElement("div",{className:_},l.map((function(e,t){if(-1===Ym(e,u,"value"))return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){i("");var n=Ef(u);-1===Ym(e,n,"value")&&(n.push(e),l.splice(t,1),m(n))}},wp.element.createElement("span",null,e.label))}))):d?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(cd,null)):""))});function Cf(e){return function(e){if(Array.isArray(e))return Jf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Lf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Df(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Lf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lf(e,t){if(e){if("string"==typeof e)return Jf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jf(e,t):void 0}}function Jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uf=wp.element,Rf=(Uf.createElement,Uf.render,Uf.useState),Ff=Uf.useEffect,Hf=(Uf.useContext,Uf.Fragment,Uf.RawHTML,wp.data),qf=(Hf.dispatch,Hf.select),zf=function(e){var t=Mf(Rf({}),2),n=t[0],r=t[1],a=Mf(Rf(""),2),i=(a[0],a[1]),o=Mf(Rf([]),2),l=o[0],c=o[1],s=Mf(Rf([]),2),u=s[0],m=s[1],p=Mf(Rf(!1),2),d=(p[0],p[1]),f=Mf(Rf(!1),2),b=f[0],v=f[1],w=Mf(Rf(!1),2),y=w[0],g=w[1],h=qf("vibebp").getUser();return h.token=qf("vibebp").getToken(),Ff((function(){r(e.field),g(!0)}),[e.field]),Ff((function(){e.field.hasOwnProperty("value")&&l.length&&e.field.value.length&&m(l.filter((function(t){return e.field.value.indexOf(t.id)>-1})))}),[l]),Ff((function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tf(Object(n),!0).forEach((function(t){Df(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(u&&u.length){var r=[];u.map((function(e){r.push(e.id)})),t.value=r,t.show_value=u,m(u),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),[u]),Ff((function(){d(!0);n.taxonomy&&n.taxonomy,fetch("".concat(window.vibebp.api.url,"/taxonomy/?force"),{headers:{Authorization:window.vibebp.token},method:"post",body:JSON.stringify({taxonomy:n.taxonomy,token:h.token})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),c(e.posts)),d(!1)}))}),[y]),wp.element.createElement("div",{className:"taxonomy_field"},wp.element.createElement("div",{className:"selected_term_list_wrapper"},wp.element.createElement("div",{className:"selected_term_list"},u.map((function(e,t){var r=n.cpt?n.taxonomy:"";return"number"==typeof e.id?wp.element.createElement("div",{className:"term_select"},wp.element.createElement("span",{type:r,onClick:function(){var n=Cf(u),r=Cf(l);n.splice(t,1),r.push(e),c(r),m(n)}},e.text)):wp.element.createElement("div",{className:"term_select"},wp.element.createElement("input",{type:"text",value:u[t].id.split("new_")[1],placeholder:window.vibebp.translations.type_here,onChange:function(e){var n=Cf(u);n[t]={id:"new_"+e.target.value},m(n)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=Cf(u);t>-1&&e.splice(t,1),m(e)}}))})))),wp.element.createElement("div",{className:"term_select",onClick:function(){v(!b)}},wp.element.createElement("div",{class:"term_select_label"},n.label,b?wp.element.createElement("i",{class:"vicon vicon-angle-down","aria-hidden":"true"}):wp.element.createElement("i",{class:"vicon vicon-plus","aria-hidden":"true"})),b?wp.element.createElement("div",{className:"search_term_list"},wp.element.createElement("div",{className:"search_term",onClick:function(){var e=Cf(u);e.push({id:"new_"}),m(e)}},wp.element.createElement("span",null,window.vibebp.translations.add_new)),l.length?l.map((function(e,t){if(-1===Ym(e,u))return wp.element.createElement("div",{className:"search_term",onClick:function(){i("");var n=Cf(u);-1===Ym(e,n)&&(n.push(e),l.splice(t,1),m(n))}},wp.element.createElement("span",null,e.text))})):""):""))};function $f(e){return function(e){if(Array.isArray(e))return Kf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Zf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bf(Object(n),!0).forEach((function(t){Vf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Zf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zf(e,t){if(e){if("string"==typeof e)return Kf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kf(e,t):void 0}}function Kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xf=wp.element,Yf=(Xf.createElement,Xf.render,Xf.useState),Qf=(Xf.useEffect,Xf.Fragment),eb=(Xf.useContext,wp.data),tb=eb.dispatch,nb=eb.select,rb=function(e){var t=Gf(Yf(!1),2),n=t[0],r=t[1],a=Gf(Yf([]),2),i=a[0],o=a[1],l=Gf(Yf([]),2),c=l[0],s=(l[1],Gf(Yf(!1),2)),u=s[0],m=s[1],p=Gf(Yf(!1),2),d=p[0],f=p[1],b=Gf(Yf("media"),2),v=b[0],w=b[1],y=Gf(Yf((function(){var t={posts_per_page:20,paged:1,search_terms:"",orderby:""};return e.hasOwnProperty("type")&&(t.post_mime_type=e.type),t})),2),g=y[0],h=y[1];!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Zm(Date.now());Km((function(){var n=setTimeout((function(){Date.now()-r.current>=t&&(e(),r.current=Date.now())}),t-(Date.now()-r.current));return function(){clearTimeout(n)}}),[t].concat(Wm(n)))}((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/user/fetch_media?force"),{method:"post",body:JSON.stringify(Wf(Wf({},g),{},{token:nb("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status)if(d){var t=$f(i);e.data.map((function(e){t.push(e)})),o(t),f(!1),t.length<parseInt(e.total)?m(!0):m(!1)}else o(e.data),e.data.length<parseInt(e.total)?m(!0):m(!1)}))}),500,[g]);var _=function(t){e.share(t)},E=function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("video",{controls:!0,src:e.url,className:"content_to_html_video"});case"audio":return wp.element.createElement("audio",{controls:!0,src:e.url,className:"content_to_html_audio"})}};return wp.element.createElement("div",{className:"vibe_editor_modal"},wp.element.createElement("div",{className:"modal-content"},wp.element.createElement("div",{className:"modal-header"},wp.element.createElement("div",null,wp.element.createElement("a",{className:"media"==v?"active":"",onClick:function(){"media"!=v&&w("media")}},window.vibebp.translations.select_media),wp.element.createElement("a",{className:"upload"==v?"active":"",onClick:function(){"upload"!=v&&w("upload")}},window.vibebp.translations.upload_media)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(t){e.close(!1)}})),wp.element.createElement("div",{className:"modal-body"},"media"==v?wp.element.createElement(Qf,null,wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,onChange:function(e){return h(Wf(Wf({},g),{},{search_terms:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("select",{onChange:function(e){h(Wf(Wf({},g),{},{order:e.target.value}))}},Object.keys(window.vibeEditor.media_order).map((function(e){return wp.element.createElement("option",{value:e},window.vibeEditor.media_order[e])}))))),n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i&&i.length?wp.element.createElement("div",{className:"allMedia"},i.map((function(t,n){return wp.element.createElement("div",{className:"single_media",onClick:function(n){_(t),e.close(!1)}},E(t))}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_media),u?wp.element.createElement("a",{className:"link",onClick:function(){h(Wf(Wf({},g),{},{paged:g.paged+1})),f(!0)}},window.vibebp.translations.more):""):"upload"===v?wp.element.createElement(Qf,null,wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media"},window.vibebp.translations.upload_media),wp.element.createElement("input",{type:"file",id:"vibe_editor_upload_media",onChange:function(e){return function(e){if(e.target.files[0]){var t=new FormData;t.append("file",e.target.files[0]),t.append("body",JSON.stringify({token:nb("vibebp").getToken()})),fetch("".concat(window.vibebp.api.url,"/user/upload_media?upload&post"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){if(e.status){var t=$f(i);t.unshift(e.data),o(t),w("media")}else e.hasOwnProperty("message")&&tb("vibebp").addNotification({text:e.message})}))}}(e)}}),c&&c.length?wp.element.createElement("div",{className:"uploaded"},wp.element.createElement("strong",null,window.vibebp.translations.uploaded_media),wp.element.createElement("div",{className:"uploaded_files"},c.map((function(e,t){return wp.element.createElement("div",{className:"single_media",onClick:function(t){_(e)}},E(e))})))):"")):"")))};function ab(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ib(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ab(Object(n),!0).forEach((function(t){ob(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ab(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ob(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sb=wp.element,ub=(sb.createElement,sb.render,sb.useState),mb=sb.useEffect,pb=(sb.Fragment,sb.useContext,wp.data),db=(pb.dispatch,pb.select,function(e){var t=lb(ub(!1),2),n=t[0],r=t[1],a=lb(ub({}),2),i=a[0],o=a[1],l=lb(ub([]),2);l[0],l[1];mb((function(){e.hasOwnProperty("media")&&(e.field.value=e.media),o(e.field)}),[e.field]);return wp.element.createElement("div",{className:"media_wrapper"},i&&i.hasOwnProperty("value")&&i.value.hasOwnProperty("url")?wp.element.createElement("div",{className:"media_file"},wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var t=ib({},i);t.value={},o(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),function(){if(i.hasOwnProperty("value")&&i.value.hasOwnProperty("type"))switch(i.value.type){case"image":return wp.element.createElement("img",{src:i.value.url,className:"content_to_html_image"});case"video":return wp.element.createElement("video",{controls:!0,src:i.value.url,className:"content_to_html_video"});case"audio":return wp.element.createElement("audio",{controls:!0,src:i.value.url,className:"content_to_html_audio"});default:return i.value.hasOwnProperty("type")?wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,type:"application/pdf",src:i.value.url}):wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,src:i.value.url})}}()):"course_featured"==i.type?wp.element.createElement("div",{onClick:function(){r(!0)}},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-image"},wp.element.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),wp.element.createElement("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),wp.element.createElement("polyline",{points:"21 15 16 10 5 21"}))):"featured_video"==i.type?wp.element.createElement("div",{className:"featured_video",onClick:function(){r(!0)}},i.label,wp.element.createElement("span",{className:"vicon vicon-control-play"})):wp.element.createElement("div",{className:"vicon vicon-plus",onClick:function(){r(!0)}}),n?wp.element.createElement(rb,{type:e.type,close:function(){r(!1)},share:function(t){var n,r;n=t,(r=ib({},i)).value=n,o(r),e.update(r,e.fieldIndex,"fieldvaluechanged")}}):"")});function fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yb=wp.element,gb=(yb.createElement,yb.render,yb.useState),hb=yb.useEffect,_b=(yb.Fragment,yb.useContext,wp.data),Eb=(_b.dispatch,_b.select,function(e){var t=vb(gb({}),2),n=t[0],r=t[1],a=vb(gb([]),2);a[0],a[1];hb((function(){r(e.field)}),[e.field]);var i=function(t,a,i){if("fieldvaluechanged"==i){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fb(Object(n),!0).forEach((function(t){bb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);o.hasOwnProperty("value")||(o.value=[]),t.value.hasOwnProperty("url")?o.value.push(t.value):o.value.splice(a,1),r(o),e.update(o,e.fieldIndex,"fieldvaluechanged")}};return wp.element.createElement("div",{className:"multimedia"},wp.element.createElement("div",{className:"attachment"},wp.element.createElement(db,{field:{},fieldIndex:-1,update:i})),n.value&&n.value.length?wp.element.createElement("div",{className:"attachments"},n.value.map((function(e,t){return wp.element.createElement("div",{className:"attachment"},wp.element.createElement(db,{field:{},media:e,fieldIndex:t,update:i}))}))):"")});function Ob(e){return(Ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jb(Object(n),!0).forEach((function(t){Nb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xb=wp.element,Ab=(xb.createElement,xb.render,xb.useState),Ib=xb.useEffect,Cb=(xb.useContext,xb.Fragment,xb.RawHTML,function(e){var t=kb(Ab(!1),2),n=t[0],r=t[1],a=kb(Ab({}),2),i=a[0],o=a[1];Ib((function(){var t=Sb({},e.field);Xm(t.value)&&(t.value=Sb({},t.default)),o(t)}),[e.field]);var l=function(t){var n=Sb({},i);n.value=t,o(n),e.update(n,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"duration_field_wrapper"},n?wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("input",{type:"number",value:i.value&&i.value.hasOwnProperty("value")?i.value.value:"",onChange:function(e){return l(Sb(Sb({},i.value),{},{value:e.target.value}))},placeholder:window.vibebp.translations.duration_value}),wp.element.createElement("select",{value:i.value&&i.value.hasOwnProperty("parameter")?i.value.parameter:86400,onChange:function(e){l(Sb(Sb({},i.value),{},{parameter:e.target.value}))}},window.vibebp.duration.map((function(e){return wp.element.createElement("option",{value:e.value},e.label)}))),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){r(!n),i.value.hasOwnProperty("parameter")&&i.value.parameter||l(Sb(Sb({},i.value),{},{parameter:86400}))}})):Xm(i.value)?"number"==typeof i.default&&9999==i.default&&"object"==Ob(i.default)&&9999==i.default.value?wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("span",null,window.vibebp.translations.unlimited_duration),wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){r(!0),l({value:9999,parameter:86400})}})):wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("span",null,"object"==Ob(i.default)?wp.element.createElement("span",null,wp.element.createElement("span",null,i.default.value),wp.element.createElement("span",null,window.vibebp.duration[window.vibebp.duration.findIndex((function(e){return e.value==i.default.parameter}))].label)):wp.element.createElement("span",null,wp.element.createElement("span",null,i.default),wp.element.createElement("select",{onChange:function(e){l({value:i.default,parameter:e.target.value})}},window.vibebp.duration.map((function(e){return wp.element.createElement("option",{value:e.value},e.label)}))))),wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){return r(!0)}})):"object"==Ob(i.value)&&9999==i.value.value?wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("span",null,window.vibebp.translations.unlimited_duration),wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){r(!0),l({value:9999,parameter:86400})}})):wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("span",null,"object"==Ob(i.value)?wp.element.createElement("span",null,wp.element.createElement("span",null,i.value.value),wp.element.createElement("span",null,-1!==window.vibebp.duration.findIndex((function(e){return e.value==i.value.parameter}))?window.vibebp.duration[window.vibebp.duration.findIndex((function(e){return e.value==i.value.parameter}))].label:"")):wp.element.createElement("span",null,wp.element.createElement("span",null,i.value),wp.element.createElement("select",{onChange:function(e){l({value:i.default,parameter:e.target.value})}},window.vibebp.duration.map((function(e){return wp.element.createElement("option",{value:e.value},e.label)}))))),wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){return r(!0)}})))});function Tb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Db(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tb(Object(n),!0).forEach((function(t){Mb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ub=wp.element,Rb=(Ub.createElement,Ub.render,Ub.useState),Fb=Ub.useEffect,Hb=(Ub.useContext,Ub.Fragment),qb=(Ub.RawHTML,function(e){var t=Lb(Rb({}),2),n=t[0],r=t[1];Fb((function(){r(e.field)}),[e.field]);var a=function(t,n,r){"fieldvaluechanged"==r&&(e.hasOwnProperty("ufieldIndex")?e.update({field:t,index:n,ufieldIndex:e.ufieldIndex},"fieldvaluechanged"):e.update({field:t,index:n},"fieldvaluechanged")),"curriculumchanged"==r&&e.update({field:t,cindex:n},"curriculumchanged")};Fb((function(){e.field&&e.field.id&&document.addEventListener("wplms_custom_field_value_changed",(function(e){e.hasOwnProperty("detail")&&a(e.detail.field,e.detail.index,e.detail.action)}))}),[]);return wp.element.createElement(Hb,null,void 0!==n?wp.element.createElement("div",{className:"field_wrapper field_"+n.type+" field_"+n.id},wp.element.createElement("span",null,n.label&&"course_featured"!=n.type&&"next_button"!=n.type&&"prev_button"!=n.type&&"taxonomy"!=n.type&&"featured_video"!=n.type&&"group"!=n.type&&"forum"!=n.type?wp.element.createElement("label",null,n.label,n.desc?wp.element.createElement("a",{className:"tip",title:n.desc},wp.element.createElement("i",{className:"vicon vicon-help-alt"})):""):"",n.text?wp.element.createElement("strong",null,n.text):""),wp.element.createElement("div",{className:"field_value"},function(t,n,i){switch(t.type){case"title":return wp.element.createElement(Title,{field:t,fieldIndex:n,tabIndex:i,update:a});case"taxonomy":return wp.element.createElement(zf,{field:t,fieldIndex:n,tabIndex:i,update:a});case"course_featured":case"featured_image":return wp.element.createElement(db,{field:t,type:"image",fieldIndex:n,tabIndex:i,update:a});case"featured_video":return wp.element.createElement(db,{field:t,type:"video",fieldIndex:n,tabIndex:i,update:a});case"textarea":return wp.element.createElement(Bm,{field:t,fieldIndex:n,tabIndex:i,update:a});case"editor":return wp.element.createElement(Kd,{field:t,fieldIndex:n,tabIndex:i,update:a});case"unlimited_number":return wp.element.createElement(cp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"number":return wp.element.createElement(vp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"duration":return wp.element.createElement(Cb,{field:t,fieldIndex:n,tabIndex:i,update:a});case"radio":return wp.element.createElement("div",{className:"radio_group"},t.options.length?wp.element.createElement(Hb,null,t.options.map((function(e,i){return wp.element.createElement("div",{class:"radio_wrapper"},wp.element.createElement("div",{class:"switch"},wp.element.createElement("input",{type:"radio",selected:t.value==e.value,onChange:function(i){a(Db(Db({},t),{},{value:e.value}),n,"fieldvaluechanged"),r(Db(Db({},t),{},{value:e.value}))},id:t.id+"_"+i,name:t.id,value:e.value,checked:t.value==e.value&&"checked"}),wp.element.createElement("label",{class:"slider",for:t.id+"_"+i})),wp.element.createElement("label",null,e.label))}))):"");case"checkbox":return wp.element.createElement("div",{className:"radio_group"},t.options.length?wp.element.createElement(Hb,null,t.options.map((function(e,r){return wp.element.createElement("div",{className:"checkbox_wrapper"},wp.element.createElement("div",{className:"switch"},wp.element.createElement("input",{type:"checkbox",onChange:function(r){var i=Db({},t);i.hasOwnProperty("value")&&i.value.length||(i.value=[]),i.value.indexOf(e.value)>-1?i.value.splice(i.value.indexOf(e.value),1):i.value.push(e.value),a(i,n,"fieldvaluechanged")},id:t.id+"_"+r,name:t.id,value:e.value,checked:!!(Array.isArray(t.value)&&t.value.indexOf(e.value)>-1)&&"checked"}),wp.element.createElement("label",{class:"slider",for:t.id+"_"+r})),wp.element.createElement("label",null,e.label))}))):"");case"select":return wp.element.createElement(Tp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"selectmulticpt":case"courses":return wp.element.createElement(_f,{field:t,fieldIndex:n,tabIndex:i,update:a});case"off_schedule":case"multiselect":return wp.element.createElement(If,{field:t,fieldIndex:n,tabIndex:i,update:a});case"showhide":case"switch":case"yesno":case"conditionalswitch":case"reverseconditionalswitch":return wp.element.createElement(Jm,{field:t,fieldIndex:n,tabIndex:i,update:a});case"selectcpt":return wp.element.createElement(cf,{field:t,fieldIndex:n,tabIndex:i,update:a});case"text":return wp.element.createElement(Sp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"media":return wp.element.createElement(db,{field:t,type:"image",fieldIndex:n,tabIndex:i,update:a});case"multiattachments":return wp.element.createElement(Eb,{field:t,type:"image",fieldIndex:n,tabIndex:i,update:a});case"time":return wp.element.createElement(od,{field:t,fieldIndex:n,tabIndex:i,update:a});case"date":return wp.element.createElement(qp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"group":return wp.element.createElement(Groups,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:i,update:a});case"forum":return wp.element.createElement(Forums,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:i,update:a});case"repeatable":case"repeatable_count":return wp.element.createElement(qd,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:i,update:a});case"product":case"selectproduct":return wp.element.createElement(Td,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:i,update:a,group:e.group});default:var o=new CustomEvent("wplms_batches_custom_field",{detail:{field:t,index:n}});if(document.dispatchEvent(o),t&&t.hasOwnProperty("id"))return wp.element.createElement("div",{id:"wplms_batches_custom_field_"+t.id})}return""}(n,e.fieldIndex,e.tabIndex))):"")});function zb(e){return function(e){if(Array.isArray(e))return Zb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Gb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$b(Object(n),!0).forEach((function(t){Wb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Gb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gb(e,t){if(e){if("string"==typeof e)return Zb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zb(e,t):void 0}}function Zb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kb=wp.element,Xb=(Kb.createElement,Kb.useState),Yb=Kb.useEffect,Qb=Kb.Fragment,ev=(Kb.render,wp.data),tv=(ev.dispatch,ev.select),nv=function(e){var t=Vb(Xb(!1),2),n=t[0],r=t[1],a=Vb(Xb({avatar:{url:"",cropdata:""},name:"",description:"",status:"public",invite_status:"members",group_type:"",invitees:[],meta:[]}),2),i=a[0],o=a[1],l=Vb(Xb(""),2),c=l[0],s=l[1],m=Vb(Xb(""),2),p=m[0],d=m[1],f=Vb(Xb([]),2),b=f[0],v=f[1],w=Vb(Xb(!1),2),y=w[0],g=w[1],h=Vb(Xb(!0),2),_=h[0],E=h[1],O=Vb(Xb(!1),2),j=(O[0],O[1]),S=Vb(Xb(!1),2),N=S[0],k=(S[1],Vb(Xb([]),2)),P=(k[0],k[1]),x=Vb(Xb(null),2),A=x[0],I=x[1],C=Vb(Xb(null),2),T=C[0],D=C[1],M=Vb(Xb([]),2),L=M[0],J=M[1],U=Vb(Xb(!1),2),R=U[0],F=U[1],H=Vb(Xb(null),2),q=H[0],z=H[1],$=Vb(Xb(null),2),B=$[0],W=$[1],V=Vb(Xb(null),2),G=V[0],Z=V[1],K=Vb(Xb(null),2),X=K[0],Y=K[1],Q=Vb(Xb(null),2),ee=Q[0],te=Q[1];Yb((function(){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_group_desc_editor",content:e.hasOwnProperty("group")&&e.group.description?e.group.description:"",raw:e.hasOwnProperty("group")&&e.group.description_raw?e.group.description_raw:"",components:["editor"],updater:"vibe_group_desc"}});document.dispatchEvent(t)}),[]),Yb((function(){document.addEventListener("vibe_editor_content_update_vibe_group_desc",ne)}),[]);var ne=function(e){D({post_content:e.detail.raw_html,raw:e.detail.editor_content})};Yb((function(){if(e.hasOwnProperty("group")){var t={url:e.group.avatar,cropdata:""};e.group.avatar.length&&E(!1),o(Bb(Bb({},i),{},{id:e.group.id,name:e.group.name,description:e.group.description,status:e.group.status,avatar:t,invite_status:e.group.hasOwnProperty("invite_status")?e.group.invite_status:"members"}))}F(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/fetchcustomfields?force"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({group_id:e.hasOwnProperty("group")&&e.group&&e.group.id?e.group.id:null,token:tv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(F(!1),t.hasOwnProperty("fields")&&t.fields.length){J(t.fields);var n=Bb({},i);if(t.fields.map((function(e,t){e.value?n.meta.push({meta_key:e.id,meta_value:e.value}):n.meta.push({meta_key:e.id,meta_value:null})})),e.hasOwnProperty("group")){var r={url:e.group.avatar,cropdata:""};e.group.avatar.length&&E(!1),o(Bb(Bb({},n),{},{id:e.group.id,name:e.group.name,description:e.group.description,status:e.group.status,avatar:r}))}else o(n)}}))}),[e.group]),u((function(){if(window.helpdesk&&N.length>4){A&&A.abort();var e={},t=new AbortController;A&&(e={signal:t.signal}),I(t),j(!0),fetch("".concat(window.helpdesk.api.url,"/bbp/forums?nocache"),Bb(Bb({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify({s:N,token:tv("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){j(!1),P(e.data)}))}}),500,[N]),u((function(){if(p.length>3){g(!0),A&&A.abort();var e={},t=new AbortController;A&&(e={signal:t.signal}),I(t),fetch("".concat(window.vibebp.api.url,"/search?nocache"),Bb(Bb({method:"post"},e),{},{body:JSON.stringify({search:p,type:"user",token:tv("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){e.status&&(g(!1),Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),v(e.results)))}))}}),500,[p]);var re="button is-fullwidth is-primary is-rounded";n&&(re+=" is-loading");var ae=!0;e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("can_invite")&&!e.meta.can_invite&&(ae=!1);var ie=function(e,t){Bb({},i);if(e.hasOwnProperty("index"))if(console.log(e),"editor"==e.field.type){var n=L.filter((function(e){return"editor"==e.type})).findIndex((function(t){return t.id==e.field.id}));0==n&&z(e.field),1==n&&W(e.field),2==n&&Z(e.field),3==n&&Y(e.field),4==n&&te(e.field)}else{var r=zb(L);r[e.index]=e.field,J(r);var a=Bb({},i),l=a.meta.findIndex((function(t){return t.meta_key==e.field.id}));l>-1?a.meta[l].meta_value=e.field.value:a.meta.push({meta_key:e.field.id,meta_value:e.field.value}),o(a)}};return wp.element.createElement("div",{className:"vibebp_create_group create_form"},wp.element.createElement("div",{className:"create_form_head"},wp.element.createElement("div",{className:"left_side"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.newgroup(!1)}})),wp.element.createElement("div",{className:"right_side"})),wp.element.createElement("div",{className:"group_creation_steps"},wp.element.createElement("div",{className:"group_step"},wp.element.createElement("div",{className:"group_avatar"},i.avatar.url.length&&!_?wp.element.createElement(Qb,null,wp.element.createElement("img",{src:i.avatar.url}),wp.element.createElement("div",{onClick:function(){E(!0)},className:"vicon vicon-image"})):wp.element.createElement(Qb,null,wp.element.createElement(ra,{type:"image",crop:"1",show:function(){return E(!1)},update:function(e,t){s(e);var n=Bb({},i);n.avatar.cropdata=t,o(n)}}),wp.element.createElement("div",{onClick:function(){E(!1)},className:"vicon vicon-image"}))),wp.element.createElement("div",{className:"group_creation_step vibebp_form"},wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_name),wp.element.createElement("input",{type:"text",value:i.name,onChange:function(e){o(Bb(Bb({},i),{},{name:e.target.value}))}})),wp.element.createElement("div",{className:"group_description vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_description),wp.element.createElement("div",{className:"vibe_group_desc_editor"},wp.element.createElement("textarea",{onChange:function(e){o(Bb(Bb({},i),{},{description:e.target.value})),D(Bb(Bb({},T),{},{post_content:e.target.value}))},value:i.description}))))),wp.element.createElement("div",{className:"group_step vibebp_form"},Object.keys(window.vibebp.components.groups.type).length&&window.vibebp.components.groups.hasOwnProperty("type")?wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_type),wp.element.createElement("select",{onChange:function(e){o(Bb(Bb({},i),{},{group_type:e.target.value}))},value:i.group_type},wp.element.createElement("option",null,window.vibebp.translations.select_group_type),Object.keys(window.vibebp.components.groups.type).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.type[e])})))):"",wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_status),wp.element.createElement("select",{onChange:function(e){o(Bb(Bb({},i),{},{status:e.target.value}))},value:i.status},Object.keys(window.vibebp.components.groups.status).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.status[e])})))),wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_invitations),wp.element.createElement("select",{onChange:function(e){o(Bb(Bb({},i),{},{invite_status:e.target.value}))},value:i.invite_status},Object.keys(window.vibebp.components.groups.invite_status).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_status[e])})))),window.hasOwnProperty("wplmsschool")?wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_is_classroom),wp.element.createElement("div",{className:"switch"},i.meta.findIndex((function(e){return"is_classroom"==e.meta_key}))>-1&&i.meta[i.meta.findIndex((function(e){return"is_classroom"==e.meta_key}))].meta_value?wp.element.createElement("input",{type:"checkbox",id:"is_classroom",checked:!0,onClick:function(){var e=Bb({},i),t=i.meta.findIndex((function(e){return"is_classroom"==e.meta_key}));t>-1&&e.meta.splice(t,1),e.meta.push({meta_key:"is_classroom",meta_value:!1}),o(e)}}):wp.element.createElement("input",{type:"checkbox",id:"is_classroom",onClick:function(){var e=Bb({},i),t=i.meta.findIndex((function(e){return"is_classroom"==e.meta_key}));t>-1&&e.meta.splice(t,1),e.meta.push({meta_key:"is_classroom",meta_value:!0}),o(e)}}),wp.element.createElement("label",{for:"is_classroom",className:"slider"}))):""),wp.element.createElement("div",{className:"group_step vibebp_form"},R?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):L.length?L.map((function(t,n){return wp.element.createElement(qb,{field:t,fieldIndex:n,group:e.group,update:ie})})):""),ae?wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("div",{className:"recipients"},wp.element.createElement("label",null,window.vibebp.translations.invite_members),wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},i.invitees.map((function(e){return wp.element.createElement($n,{type:"user",click:function(){var t=Bb({},i);t.invitees.splice(t.invitees.indexOf(e),1),o(t)},id:{user_id:e}})}))),wp.element.createElement("div",{className:y?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:p,placeholder:window.vibebp.translations.search_member,onChange:function(e){d(e.target.value)}}))),b.length?wp.element.createElement("div",{className:"search_results"},b.map((function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){d("");var n=zb(b),r=Bb({},i);-1===r.invitees.indexOf(e.id)&&(r.invitees.push(e.id),o(r),n.splice(t,1),v(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""))):"",wp.element.createElement("a",{onClick:function(){r(!0);var t=Bb(Bb({},i),{},{description:T.post_content,description_raw:T.raw,editors:[q,B,G,X,ee],token:tv("vibebp").getToken()}),n=new FormData;n.append("body",JSON.stringify(t)),n.append("file",c[0]),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/create_update_group?upload"),{method:"post",body:n}).then((function(e){return e.json()})).then((function(t){r(!1),t.status&&e.newgroup(t.data)}))},className:re},window.vibebp.translations.create_group)))},rv=wp.element.Fragment,av=function(e){var t=e.items,n=e.update,r=e.access;return wp.element.createElement(rv,null,t&&t.length?wp.element.createElement("div",{className:"corousel_items Gallery_items_".concat(t.length)},t.map((function(e,t){var a=e.meta_id,i=e.meta_value;return wp.element.createElement("div",{className:"corousel_item",key:a},wp.element.createElement("img",{src:i.url}),r.can_add_members?wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){return n(t)}}):"")}))):"")};function iv(e){return function(e){if(Array.isArray(e))return mv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||uv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ov(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ov(Object(n),!0).forEach((function(t){cv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ov(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||uv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uv(e,t){if(e){if("string"==typeof e)return mv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mv(e,t):void 0}}function mv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pv=wp.element,dv=pv.useState,fv=pv.useEffect,bv=pv.Fragment,vv=wp.data,wv=vv.dispatch,yv=vv.select,gv=function(e){var t=sv(dv({delete:!1,data:!1,save:!1}),2),n=t[0],r=t[1],a=sv(dv(!1),2),i=a[0],o=a[1],l=sv(dv(e.Gallery),2),c=l[0],s=l[1],u=sv(dv(!1),2),m=u[0],p=u[1],d=sv(dv([]),2),f=d[0],b=d[1],v=sv(dv(!1),2),w=v[0],y=v[1];fv((function(){s(e.Gallery)}),[e.Gallery]),fv((function(){r(lv(lv({},n),{},{data:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/gallery?force"),{method:"post",body:JSON.stringify({group_id:e.group_id,meta_id:c.meta_id,token:yv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(lv(lv({},n),{},{data:!1})),e.status&&e.data&&b(e.data)})).catch((function(e){r(lv(lv({},n),{},{data:!0}))}))}),[c.meta_id]);return wp.element.createElement("div",{className:"portal group_side_bar_component __single_gallery"},wp.element.createElement("div",{className:"single_gallery_title"},e.access.can_add_members?wp.element.createElement(bv,null,i?wp.element.createElement("div",{className:"__create_form"},wp.element.createElement("div",{class:"input_field_wrapper"},wp.element.createElement("input",{value:c.meta_value,onChange:function(e){return s(lv(lv({},c),{},{meta_value:e.target.value}))},placeholder:window.vibebp.translations.gallery_title})),wp.element.createElement("div",{className:"__create_form_actions"},wp.element.createElement("a",{className:"button is-primary full".concat(n.edit?"is-loading":""),onClick:function(){r(lv(lv({},n),{},{edit:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/galleries/action?force"),{method:"post",body:JSON.stringify(lv(lv({},c),{},{group_id:e.group_id,action:"edit",token:yv("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(lv(lv({},n),{},{edit:!1})),o(!1),t.status&&t.data&&e.update(t.data,"edit"),t.hasOwnProperty("message")&&wv("vibebp").addNotification({text:t.message})})).catch((function(e){r(lv(lv({},n),{},{edit:!1}))}))}},window.vibebp.translations.save_changes),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(e){return o(!1)}}))):wp.element.createElement("div",{className:"gallery_title"},c.meta_value),wp.element.createElement("div",{className:"__actions"},wp.element.createElement("a",{className:"vicon vicon-more",onClick:function(e){return p(!m)}}),m?wp.element.createElement("div",{class:"action_container"},e.access.can_add_members?wp.element.createElement("span",{onClick:function(e){return y(!w)}},window.vibebp.translations.upload):"",wp.element.createElement("span",{onClick:function(e){return o(!i)}},window.vibebp.translations.edit),wp.element.createElement("span",{onClick:function(){r(lv(lv({},n),{},{delete:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/galleries/action?force"),{method:"post",body:JSON.stringify(lv(lv({},c),{},{group_id:e.group_id,action:"delete",token:yv("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(lv(lv({},n),{},{delete:!1})),t.status&&t.data&&e.update(t.data,"delete"),t.hasOwnProperty("message")&&wv("vibebp").addNotification({text:t.message})})).catch((function(e){r(lv(lv({},n),{},{delete:!0}))}))}},n.delete?"...":window.vibebp.translations.delete)):"")):wp.element.createElement("div",{className:"gallery_title"},c.meta_value)),wp.element.createElement("div",{className:"item_uploader_viewer"},w?wp.element.createElement(rb,{type:"image",close:function(){y(!1)},share:function(e){var t={meta_id:e.id,meta_value:{id:e.id,url:e.url}};b([t].concat(iv(f)))}}):"",wp.element.createElement("div",{className:"item_view"},wp.element.createElement(av,{access:e.access,items:f,update:function(e){var t=iv(f);t.splice(e,1),b(t)}}),!n.data&&e.access.can_add_members?wp.element.createElement("a",{className:"button is-primary full ".concat(n.save?"is-loading":""),onClick:function(){r(lv(lv({},n),{},{save:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/gallery/save?force"),{method:"post",body:JSON.stringify({items:f.map((function(e){return parseInt(e.meta_value.id)})),group_id:e.group_id,meta_id:c.meta_id,token:yv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(lv(lv({},n),{},{save:!1})),e.hasOwnProperty("message")&&wv("vibebp").addNotification({text:e.message})})).catch((function(e){r(lv(lv({},n),{},{save:!1}))}))}},wp.element.createElement("span",{className:"vicon vicon-save"}),window.vibebp.translations.save_changes):"")),n.data?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"")};function hv(e){return function(e){if(Array.isArray(e))return Nv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Sv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ev(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_v(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ov(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Sv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sv(e,t){if(e){if("string"==typeof e)return Nv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nv(e,t):void 0}}function Nv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kv=wp.element,Pv=(kv.createElement,kv.useState),xv=kv.useEffect,Av=kv.Fragment,Iv=(kv.render,wp.data),Cv=(Iv.dispatch,Iv.select),Tv=function(e){var t=jv(Pv([]),2),n=t[0],r=t[1],a=jv(Pv({data:!1,create:!1,access:!1}),2),i=a[0],o=a[1],l=jv(Pv(""),2),c=l[0],s=l[1],u=jv(Pv(e.access),2),m=u[0],p=(u[1],jv(Pv(!1),2)),d=p[0],f=p[1];xv((function(){o(Ev(Ev({},i),{},{data:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/galleries?force"),{method:"post",body:JSON.stringify({group_id:e.id,token:Cv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(Ev(Ev({},i),{},{data:!1})),e.status&&e.data&&r(e.data)})).catch((function(e){o(Ev(Ev({},i),{},{data:!0}))}))}),[e.id]);var b=function(e,t){r((function(n){switch(t){case"edit":n.splice(n.findIndex((function(t){return t.meta_id===e.meta_id})),1,e);break;case"delete":n.splice(n.findIndex((function(t){return t.meta_id===e.meta_id})),1)}return n}))};return wp.element.createElement(Av,null,m.can_add_members?wp.element.createElement("div",{className:"portal galleries_wrapper group_side_bar_component"},wp.element.createElement("h3",{className:"component_title"},window.vibebp.translations.galleries),d?wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{class:"input_field_wrapper"},wp.element.createElement("input",{value:c,onChange:function(e){return s(e.target.value)},placeholder:window.vibebp.translations.gallery_title})),c?wp.element.createElement(Av,null,wp.element.createElement("button",{className:"button is-primary full ".concat(i.create?"is-loading":""),onClick:function(){o(Ev(Ev({},i),{},{create:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/galleries/action?force"),{method:"post",body:JSON.stringify({action:"create",group_id:e.id,meta_value:c,token:Cv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(Ev(Ev({},i),{},{create:!1})),f(!1),e.status&&(s(""),r([e.data].concat(hv(n))))})).catch((function(e){o(Ev(Ev({},i),{},{create:!1}))}))}},window.vibebp.translations.add_gallery),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(e){return f(!1)}})):wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(e){return f(!1)}})):wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("a",{className:"button is-primary full",onClick:function(){return f(!0)}},window.vibebp.translations.add_gallery)),i.data?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):""):wp.element.createElement("div",{className:"portal"},i.data?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):""),n.length?n.map((function(t){return wp.element.createElement(gv,{group_id:e.id,key:t.meta_id,Gallery:t,update:b,access:m})})):"")};function Dv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dv(Object(n),!0).forEach((function(t){Lv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rv=wp.element,Fv=Rv.useState,Hv=Rv.useEffect,qv=Rv.Fragment,zv=wp.data,$v=zv.dispatch,Bv=zv.select,Wv=function(e){var t=Jv(Fv({delete:!1}),2),n=t[0],r=t[1],a=Jv(Fv(!1),2),i=a[0],o=a[1],l=Jv(Fv(e.announcement),2),c=l[0],s=l[1],u=Jv(Fv(!1),2),m=u[0],p=u[1],d=Jv(Fv(!1),2),f=d[0],b=d[1];Hv((function(){s(e.announcement)}),[e.announcement]);return wp.element.createElement("div",{className:"__single __single_announcement"},e.access.can_add_members?wp.element.createElement(qv,null,i?wp.element.createElement("div",{className:"__create_form"},wp.element.createElement("textarea",{value:c.meta_value,onChange:function(e){return s(Mv(Mv({},c),{},{meta_value:e.target.value}))}}),wp.element.createElement("div",{className:"__create_form_actions"},wp.element.createElement("a",{className:"button is-primary full".concat(n.edit?"is-loading":""),onClick:function(){r(Mv(Mv({},n),{},{edit:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/announcements/action?force"),{method:"post",body:JSON.stringify(Mv(Mv({},c),{},{group_id:e.group_id,action:"edit",token:Bv("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(Mv(Mv({},n),{},{edit:!1})),o(!1),t.status&&t.data&&e.update(t.data,"edit"),t.hasOwnProperty("message")&&$v("vibebp").addNotification({text:t.message})})).catch((function(e){r(Mv(Mv({},n),{},{edit:!1}))}))}},window.vibebp.translations.save_changes),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(e){o(!1)}}))):wp.element.createElement("div",{className:"__desc"},c.meta_value,c.meta_value.length>300?wp.element.createElement("span",{onClick:function(e){return b(!0)}},window.vibebp.translations.show_more):""),wp.element.createElement("div",{className:"__actions"},wp.element.createElement("a",{className:"vicon vicon-more",onClick:function(e){return p(!m)}}),m?wp.element.createElement("div",{class:"action_container"},wp.element.createElement("span",{onClick:function(e){return o(!i)}},window.vibebp.translations.edit),wp.element.createElement("span",{onClick:function(){r(Mv(Mv({},n),{},{delete:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/announcements/action?force"),{method:"post",body:JSON.stringify(Mv(Mv({},c),{},{group_id:e.group_id,action:"delete",token:Bv("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(Mv(Mv({},n),{},{delete:!1})),t.status&&t.data&&e.update(t.data,"delete"),t.hasOwnProperty("message")&&$v("vibebp").addNotification({text:t.message})})).catch((function(e){r(Mv(Mv({},n),{},{delete:!1}))}))}},n.delete?"...":window.vibebp.translations.delete)):"")):wp.element.createElement("div",{className:"__desc",dangerouslySetInnerHTML:{__html:c.meta_value}}),wp.element.createElement(aa,{open:f,onClose:function(){return b(!1)}},wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:c.meta_value}})))};function Vv(e){return function(e){if(Array.isArray(e))return Qv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Yv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gv(Object(n),!0).forEach((function(t){Kv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Yv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yv(e,t){if(e){if("string"==typeof e)return Qv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qv(e,t):void 0}}function Qv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ew=wp.element,tw=ew.useState,nw=ew.useEffect,rw=ew.Fragment,aw=wp.data.select,iw=function(e){var t=Xv(tw([]),2),n=t[0],r=t[1],a=Xv(tw({data:!1,create:!1,access:!1}),2),i=a[0],o=a[1],l=Xv(tw(""),2),c=l[0],s=l[1],u=Xv(tw(e.access),2),m=u[0],p=(u[1],Xv(tw(!1),2)),d=p[0],f=p[1],b=Xv(tw(0),2),v=b[0],w=b[1];nw((function(){o(Zv(Zv({},i),{},{data:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/announcements?force"),{method:"post",body:JSON.stringify({meta_value:c,group_id:e.id,action:"create",token:aw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(Zv(Zv({},i),{},{data:!1})),e.status&&e.data&&r(e.data)})).catch((function(e){o(Zv(Zv({},i),{},{data:!1}))}))}),[e.id]);var y=function(e,t){r((function(n){switch(t){case"edit":n.splice(n.findIndex((function(t){return t.meta_id===e.meta_id})),1,e);break;case"delete":n.splice(n.findIndex((function(t){return t.meta_id===e.meta_id})),1)}return n}))};return wp.element.createElement("div",{className:"portal announcements_wrapper group_side_bar_component"},wp.element.createElement("h3",{className:"component_title"},window.vibebp.translations.announcements,wp.element.createElement("a",{className:"button is-primary full",onClick:function(){return f(!d)},title:window.vibebp.translations.add_announcement},wp.element.createElement("span",{className:d?"vicon vicon-close":"vicon vicon-plus"}))),m.can_add_members&&d?wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("textarea",{value:c,onChange:function(e){return s(e.target.value)},placeholder:window.vibebp.translations.announcement_title}),wp.element.createElement("button",{className:"button is-primary full ".concat(i.create?"is-loading":""),onClick:function(){o(Zv(Zv({},i),{},{create:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/announcements/action?force"),{method:"post",body:JSON.stringify({meta_value:c,action:"create",group_id:e.id,token:aw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(Zv(Zv({},i),{},{create:!1})),e.status&&(f(!1),s(""),r([e.data].concat(Vv(n))))})).catch((function(e){o(Zv(Zv({},i),{},{create:!1}))}))}},window.vibebp.translations.add_announcement)):"",wp.element.createElement("div",{className:"portal_body"},n.length?wp.element.createElement("div",{className:"__all"},wp.element.createElement("div",{className:"all_announcements_wrapper"},n.map((function(t,n){return wp.element.createElement(rw,null,wp.element.createElement("input",{type:"radio",id:"announcement_".concat(n),name:"announcement_".concat(n),value:n,checked:n==v?"checked":""}),wp.element.createElement("div",{className:"announcement_wrapper"},wp.element.createElement(Wv,{group_id:e.id,key:t.meta_id,announcement:t,update:y,access:m})))}))),wp.element.createElement("div",{className:"announcement_dots_wrapper"},n.map((function(e,t){return wp.element.createElement("label",{class:v===t?"active":"",for:"announcement_".concat(t),onClick:function(e){return w(t)}})})))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_announcements)),i.data?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"")};function ow(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cw=wp.element,sw=(cw.createElement,cw.useState),uw=cw.useEffect,mw=cw.Fragment,pw=(cw.render,wp.data),dw=pw.dispatch,fw=pw.select,bw=function(e){var t=ow(sw(!0),2),n=t[0],r=t[1],a=ow(sw(null),2),i=a[0],o=a[1],l=ow(sw(!1),2),c=l[0],s=l[1],u=ow(sw(!1),2),m=u[0],p=u[1],d=ow(sw(null),2),f=d[0],b=d[1];uw((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/groups/group?client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"post",body:JSON.stringify({id:e.id,token:fw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(e),r(!1)})),fetch("".concat(window.vibebp.api.url,"/groups/group/is_member?client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"post",body:JSON.stringify({group_id:e.id,token:fw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){b(e.status)}))}),[e.id]);return wp.element.createElement("div",{className:"single_item_popup"},wp.element.createElement("div",{className:"header"},null!==f?f?wp.element.createElement("div",{className:"actions"},wp.element.createElement("a",{onClick:function(){s(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:"leave_group",members:[fw("vibebp").getUser().id],group_id:e.id,token:fw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&b(!1),e.hasOwnProperty("message")&&dw("vibebp").addNotification({text:e.message}),s(!1)}))},className:c?"small button is-primary is-loading":"small button is-primary"},c?"":window.vibebp.translations.leave_group),wp.element.createElement("a",{onClick:function(){e.loadMembership(e.id)},className:"small button is-primary"},window.vibebp.translations.view_membership)):window.vibebp.settings.show_join_button?wp.element.createElement("a",{onClick:function(){p(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:"join_group",members:[fw("vibebp").getUser().id],group_id:e.id,token:fw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&b(!0),e.hasOwnProperty("message")&&dw("vibebp").addNotification({text:e.message}),p(!1)}))},className:m?"small button is-primary is-loading":"small button is-primary"},m?"":window.vibebp.translations.join_group):wp.element.createElement("span",null):wp.element.createElement("span",null),wp.element.createElement("span",{className:"button small",onClick:function(){e.back()}},wp.element.createElement("span",{className:"vicon vicon-close"}),window.vibebp.translations.close)),n?wp.element.createElement("div",{className:"loader"},wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))):wp.element.createElement(mw,null,i.length?wp.element.createElement("div",{className:"member_card",dangerouslySetInnerHTML:{__html:i}}):""))};function vw(e){return(vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ww(Object(n),!0).forEach((function(t){gw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ww(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ew=wp.element,Ow=(Ew.createElement,Ew.useState),jw=Ew.useEffect,Sw=Ew.Fragment,Nw=(Ew.render,Ew.useRef),kw=wp.data,Pw=kw.dispatch,xw=kw.select,Aw=Math.round(100*Math.random()),Iw=function(e){var t=Nw(null),n=hw(Ow(!1),2),r=n[0],a=(n[1],hw(Ow(!1),2)),i=a[0],o=a[1],l=hw(Ow(""),2),c=(l[0],l[1],hw(Ow({}),2)),s=c[0],u=c[1],m=hw(Ow(null),2),p=m[0],d=m[1],f=hw(Ow(!1),2),b=f[0],v=(f[1],hw(Ow(!1),2)),w=v[0],y=v[1],g=hw(Ow([]),2),h=(g[0],g[1],hw(Ow(yw({},e.group)),2)),_=h[0],E=h[1],O=hw(Ow(!1),2),j=O[0],S=O[1],N=hw(Ow({}),2),k=N[0],P=N[1],x=hw(Ow(!1),2),A=x[0],I=x[1],C=hw(Ow(!1),2),T=C[0],D=C[1],M=hw(Ow({}),2),L=M[0],J=M[1];jw((function(){U()}),[]);var U=function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/").concat(_.id),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({context:"meta",token:xw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(e.status&&(P(e.data),e.hasOwnProperty("tabs")&&(u(e.tabs),d(Object.keys(e.tabs)[0])),e.hasOwnProperty("cover")&&e.cover.length)){var t=yw({},_);t.cover=e.cover,E(t)}}))};jw((function(){return document.addEventListener("vibebp_component_reload",U),function(){document.removeEventListener("vibebp_component_reload",U)}})),jw((function(){if("home"!==p)if(p&&p.indexOf("#")>-1){var e=window.location.href.split("#");Array.isArray(e)&&e.length>1&&(console.log(p.split("#")[1].split("&")[0].split("=")[1]),p.split("#")[1].split("&")[0].split("=")[1]&&(window.location.href+=e[0].activeTab,Pw("vibebp").setComponent(p.split("#")[1].split("&")[0].split("=")[1])))}else{var t=new CustomEvent("group_tab",{detail:{tab:p,group:_}});document.dispatchEvent(t)}}),[p]),jw((function(){_.id&&fetch("".concat(window.vibebp.api.url,"/groups/").concat(_.id,"/access-details?force"),{method:"post",body:JSON.stringify({token:xw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&e.data&&J(e.data)})).catch((function(e){"AbortError"!==e.name&&console.error("Uh oh, an error!",e)}))}),[_]);var R=function(e,t){return fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",body:JSON.stringify({action:e,members:t,group_id:_.id,token:xw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&E(yw(yw({},_),{},{id:_.id})),e.hasOwnProperty("message")&&Pw("vibebp").addNotification({text:e.message})}))},F={};return _.hasOwnProperty("cover")&&_.cover.length&&(F={background:"linear-gradient(rgba(0, 0, 0, 0.05),rgba(0, 0, 0, 0.3)) , url("+_.cover+")"}),wp.element.createElement(Sw,null,j?wp.element.createElement(nv,{group:_,newgroup:function(e){e?(E(e),S(!1)):S(!1)},meta:k}):T?wp.element.createElement(bw,{id:_.id,back:function(){D(!1)}}):wp.element.createElement("div",{className:"vibebp_full_group"},wp.element.createElement("div",{className:"group_head",style:F},wp.element.createElement("div",{className:"leftright_wrapper group_top"},wp.element.createElement("div",{className:"left_side"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.show()}})),wp.element.createElement("div",{className:"right_side"},wp.element.createElement("a",{onClick:function(){D(!0)},className:"small button "},window.vibebp.translations.view_as_public),window.vibebp.components.hasOwnProperty("groups")&&window.vibebp.components.groups.hasOwnProperty("cover")&&window.vibebp.components.groups.cover&&k&&k.hasOwnProperty("is_admin")&&k.is_admin?wp.element.createElement("label",{for:"fileupload_"+Aw,className:i?"small button is-primary is-loading":"small button is-primary"},i?"":window.vibebp.translations.change_cover,wp.element.createElement("input",{id:"fileupload_"+Aw,ref:t,type:"file",accept:"image/*",onChange:function(e){if(t.current.files[0].size<window.vibebp.settings.upload_limit){o(!0);var n={token:xw("vibebp").getToken(),item_id:_.id},r=new FormData;r.append("body",JSON.stringify(n)),r.append("file",t.current.files[0]),fetch("".concat(window.vibebp.api.url,"/component/cover"),{method:"post",body:r}).then((function(e){return e.json()})).then((function(e){if(o(!1),e.hasOwnProperty("data")&&e.data.hasOwnProperty("message")&&Pw("vibebp").addNotification({text:e.data.message}),e.success&&e.hasOwnProperty("data")){console.log(e.data),xw("vibebp").getUser().cover=e.data.url;var t=yw({},_);t.cover=e.data.url,E(t)}}))}else Pw("vibebp").addNotification({text:window.vibebp.translations.image_size_error})},style:{display:"none"}})):"",k&&k.hasOwnProperty("is_member")?k.hasOwnProperty("is_member")&&k.is_member?wp.element.createElement("a",{onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:"leave_group",members:[xw("vibebp").getUser().id],group_id:_.id,token:xw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){t.status&&e.show(),t.hasOwnProperty("message")&&Pw("vibebp").addNotification({text:t.message})}))},className:b?"small button is-primary is-loading":"small button is-primary"},b?"":window.vibebp.translations.leave_group):window.vibebp.settings.show_join_button?wp.element.createElement("a",{onClick:function(){y(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:"join_group",members:[xw("vibebp").getUser().id],group_id:_.id,token:xw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){t.status&&e.show(),t.hasOwnProperty("message")&&Pw("vibebp").addNotification({text:t.message}),y(!1)}))},className:w?"small button is-primary is-loading":"small button is-primary"},w?"":window.vibebp.translations.join_group):"":"",k&&k.hasOwnProperty("is_admin")&&k.is_admin?wp.element.createElement("a",{className:"button is-primary small",onClick:function(){S(!0)}},wp.element.createElement("span",{className:"vicon vicon-settings"})):"")),wp.element.createElement("div",{className:"group_bottom"},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:_.avatar})),wp.element.createElement("div",{className:"group_title"},wp.element.createElement("h1",{dangerouslySetInnerHTML:{__html:_.name}}),wp.element.createElement("div",{className:A?"group_description active":"group_description",onClick:function(){A&&I(!1)}},wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:_.description}}),!A&&_.hasOwnProperty("description")&&_.description.length>180?wp.element.createElement("span",{className:"more",onClick:function(){I(!0)}},window.vibebp.translations.more):"")))),r?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{className:"group_content "+p},Object.keys(s).length>1?wp.element.createElement("div",{className:"content_tabs_wrapper"},Object.keys(s).map((function(e){return wp.element.createElement("div",{className:p==e?"content_tab active":"content_tab",onClick:function(){d(e)}},wp.element.createElement("span",null,s[e]))}))):"",p&&"home"!=p?wp.element.createElement("div",{className:"group_content_wrapper"},wp.element.createElement("div",{id:p})):wp.element.createElement("div",{className:"leftright_wrapper"},k.hasOwnProperty("is_member")&&k.is_member?wp.element.createElement("div",{className:"left_side"},wp.element.createElement(Wi,{type:"groups",id:e.group.id})):"",wp.element.createElement("div",{className:"right_side"},L.can_add_members||L.can_view?wp.element.createElement(Sw,null,wp.element.createElement(iw,{access:L,type:"groups",id:_.id,object:_,memberActions:R}),wp.element.createElement(Tv,{access:L,type:"groups",id:_.id,object:_,memberActions:R})):"",wp.element.createElement(xm,{type:"groups",id:_.id,object:_,memberActions:R}),"object"===vw(k)?Object.keys(k).map((function(e){if("invite_status"!==e&&"last_activity"!==e&&"total_member_count"!==e){var t=new CustomEvent("meta_key",{detail:k[e]});return document.dispatchEvent(t),wp.element.createElement("div",{id:e})}})):"")))))},Cw=wp.element,Tw=(Cw.createElement,Cw.useState,Cw.useEffect,Cw.Fragment,Cw.render,wp.data),Dw=(Tw.dispatch,Tw.select,function(e){return wp.element.createElement("div",{className:"vibebp_group",onClick:function(){e.show()}},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:e.group.avatar})),wp.element.createElement("div",{className:"group_name"},wp.element.createElement("strong",null,e.group.name)))}),Mw=wp.element,Lw=(Mw.createElement,Mw.useState,Mw.useEffect,Mw.Fragment,Mw.render,wp.data),Jw=(Lw.dispatch,Lw.select,function(e){return wp.element.createElement("div",{className:"vibebp_group_invite"},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:e.invite.item.avatar})),wp.element.createElement("div",{className:"group_name"},wp.element.createElement("strong",null,e.invite.item.name),wp.element.createElement("span",null,window.vibebp.components.groups[e.invite.item.status])),wp.element.createElement("div",{className:"inviter"},wp.element.createElement($n,{type:"user",id:{user_id:e.invite.inviter_id}})),wp.element.createElement("div",{className:"group_invite_time"},wp.element.createElement(La,{time:e.invite.item.date_modified})),wp.element.createElement("div",{className:"group_actions"},wp.element.createElement("a",{className:"vicon vicon-check",onClick:function(){e.action(e.invite.item.id,"accept",e.invite.id)}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){e.action(e.invite.item.id,"reject",e.invite.id)}}),wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){e.action(e.invite.item.id,"delete",e.invite.id)}})))}),Uw=wp.element,Rw=(Uw.createElement,Uw.useState,Uw.useEffect,Uw.Fragment,Uw.render,wp.data),Fw=(Rw.dispatch,Rw.select,function(e){return wp.element.createElement("div",{className:"vibebp_group",onClick:function(){e.show()}},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:e.group.avatar}),e.group.hasOwnProperty("members")&&e.group.members&&e.group.members.members&&e.group.members.members.length?wp.element.createElement("div",{className:"group_members_wrapper"},wp.element.createElement("div",{className:"group_members"},wp.element.createElement(Bn,{user_ids:e.group.members.members.map((function(e){return e.ID}))},e.group.members.members.map((function(e,t){return wp.element.createElement($n,{type:"user",id:{user_id:e.ID}})})))),wp.element.createElement("span",null,e.group.members.count," ",window.vibebp.translations.members)):""),wp.element.createElement("div",{className:"group_details"},wp.element.createElement("div",{className:"group_meta"},wp.element.createElement("div",{className:"group_types"},e.group.hasOwnProperty("group_types")&&e.group.group_types.length?e.group.group_types.map((function(e,t){if(e.hasOwnProperty("labels")&&e.labels.hasOwnProperty("name"))return wp.element.createElement("span",null,e.labels.name)})):"")),wp.element.createElement("div",{className:"group_head"},wp.element.createElement("div",null,wp.element.createElement("strong",null,e.group.name),wp.element.createElement(La,{time:e.group.date_created})),wp.element.createElement("div",null,wp.element.createElement("span",{className:"status"},window.vibebp.components.groups.status[e.group.status])))))});function Hw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hw(Object(n),!0).forEach((function(t){zw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ww=wp.element,Vw=(Ww.createElement,Ww.useState),Gw=(Ww.useEffect,Ww.Fragment),Zw=(Ww.render,wp.data),Kw=(Zw.dispatch,Zw.select),Xw=function(e){var t=$w(Vw({group_type:"all"===window.vibebp.settings.group_type?"":window.vibebp.settings.group_type,full_avatar:window.vibebp.settings.full_avatar,per_page:window.vibebp.settings.groups_per_page,page:1,search_terms:"",orderby:window.vibebp.settings.order}),2),n=t[0],r=t[1],a=$w(Vw(!1),2),i=a[0],o=a[1],l=$w(Vw(0),2),c=l[0],s=l[1],m=$w(Vw(null),2),p=m[0],d=m[1],f=$w(Vw([]),2),b=f[0],v=f[1],w=$w(Vw(!1),2),y=w[0],g=w[1];return u((function(){g(!0),p&&p.abort();var e={},t=new AbortController;p&&(e={signal:t.signal}),d(t),fetch("".concat(window.vibebp.api.url,"/groups?client_id=").concat(window.vibebp.settings.client_id,"&force"),qw(qw({method:"post"},e),{},{body:JSON.stringify(qw(qw({},n),{},{token:Kw("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){g(!1),e.status&&(v(e.data.groups),document.dispatchEvent(new Event("vibebp_groups_loaded")),s(e.data.total))}))}),500,[n]),!1!==i?wp.element.createElement(bw,{id:b[i].id,back:function(){o(!1)},loadMembership:function(t){e.loadMembership(t)}}):wp.element.createElement("div",{className:"vibebp_groups_directory_wrappers"},wp.element.createElement("div",{className:"vibebp_main_head"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:n.search_terms,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=qw({},n);t.search_terms=e.target.value,r(t)}}))),wp.element.createElement("select",{onChange:function(e){var t=qw({},n);t.type=e.target.value,r(t)}},wp.element.createElement("option",{value:""},window.vibebp.translations.sort_groups),Object.keys(window.vibebp.components.groups.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.sorters[e])})))),wp.element.createElement("div",{className:"group_types_wrapper"},wp.element.createElement("div",{className:"group_types"},window.vibebp.settings.group_types&&Object.keys(window.vibebp.settings.group_types).length?wp.element.createElement(Gw,null,wp.element.createElement("span",{className:n.group_type?"":"active",onClick:function(){var e=qw({},n);delete e.group_type,r(e)}},window.vibebp.translations.all),Object.keys(window.vibebp.settings.group_types).map((function(e){return wp.element.createElement("span",{className:n.group_type===e?"active":"",onClick:function(){var t=qw({},n);t.group_type=e,r(t)}},window.vibebp.settings.group_types[e])}))):"")),wp.element.createElement("div",{className:"vibebp_groups_directory_main"},wp.element.createElement("div",{className:"vibebp_groups_directory_header"},wp.element.createElement("span",null,window.vibebp.settings.search_groups?wp.element.createElement("div",{className:"vibebp_groups_search"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:n.search_terms,onChange:function(e){r(qw(qw({},n),{},{search_terms:e.target.value}))}}),wp.element.createElement("span",{className:"vicon vicon-search"})):""),window.vibebp.settings.sort_groups?wp.element.createElement("div",{className:"vibebp_groups_sort"},wp.element.createElement("select",{value:n.orderby,onChange:function(e){r(qw(qw({},n),{},{orderby:e.target.value}))}},Object.keys(window.vibebp.group_sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.group_sorters[e])})))):""),wp.element.createElement("div",{className:"vibebp_all_groups "},y?wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c?b.map((function(e,t){return wp.element.createElement(Fw,{group:e,show:function(){o(t)}})})):wp.element.createElement("div",{className:"vibebp_message"},wp.element.createElement("p",null,window.vibebp.translations.no_groups_found))),c>n.per_page?wp.element.createElement("a",{className:"link",onClick:function(){r(qw(qw({},n),{},{page:n.page+1}))}},window.vibebp.translations.load_more):""))};function Yw(e){return function(e){if(Array.isArray(e))return ay(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ry(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ey(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qw(Object(n),!0).forEach((function(t){ty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ny(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ry(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ry(e,t){if(e){if("string"==typeof e)return ay(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ay(e,t):void 0}}function ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var iy=wp.element,oy=(iy.createElement,iy.useState),ly=iy.useEffect,cy=iy.Fragment,sy=(iy.render,wp.data),uy=sy.dispatch,my=sy.select,py=function(e){var t=ny(oy([]),2),n=t[0],r=t[1],a=ny(oy({page:1,orderby:"",accepted:"pending"}),2),i=a[0],o=a[1],l=ny(oy(""),2),c=(l[0],l[1]),s=ny(oy([]),2),m=s[0],p=s[1],d=ny(oy(!1),2),f=d[0],b=d[1],v=ny(oy(window.vibebp.components.groups.actions),2),w=(v[0],v[1],ny(oy([]),2)),y=w[0],g=w[1],h=ny(oy(!1),2),_=(h[0],h[1],ny(oy({mine:"unread",type:"",include:"",page:1,search_terms:"",label:""}),2)),E=_[0],O=_[1],j=ny(oy(!1),2),S=j[0],N=j[1],k=ny(oy(!1),2),P=k[0],x=k[1],A=ny(oy(!1),2),I=A[0],C=A[1],T=ny(oy(!1),2),D=T[0],M=T[1],L=ny(oy(!1),2),J=(L[0],L[1],ny(oy({text:"",color:"#000"}),2)),U=(J[0],J[1],ny(oy(""),2)),R=U[0],F=U[1],H=ny(oy(!1),2),q=H[0],z=H[1],$=ny(oy(null),2),B=$[0],W=$[1];ly((function(){var e=my("vibebp").getAction();if(e&&"view"==e){var t=my("vibebp").getId();t&&O(ey(ey({},E),{},{include:[t]}))}else E.include&&O(ey(ey({},E),{},{include:""}));var n=my("vibebp").getMenu().filter((function(e){return"groups"===e.parent}));n.map((function(e,t){-1===n.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&-1==n[0].class.indexOf("current-menu-item")&&n[0].class.push("current-menu-item")})),g(n),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),u((function(){if("invites"===R)b(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/").concat(R,"?").concat(encodeURIComponent(JSON.stringify(ey({},i)))),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(ey(ey({},i),{},{token:my("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(b(!1),e.status)if(P){var t=Yw(n);e.data.invites.map((function(e){t.push(e)})),r(ngroups),x(!1),t.length<e.data.total?N(!0):N(!1)}else r(e.data.invites),e.data.invites.length<e.data.total?N(!0):N(!1);else e.hasOwnProperty("message")&&c(e.message),r([])}));else{var e=ey({},E);e.token=my("vibebp").getToken();var t=my("vibebp").getUser();e.user_id=t.id,B&&B.abort();var a={},o=new AbortController;B&&(a={signal:o.signal}),W(o),b(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"?").concat(E.search_terms.length?"nocache":encodeURIComponent(JSON.stringify(ey(ey({},E),{},{search_terms:""})))),ey(ey({method:"post"},a),{},{body:JSON.stringify(e)})).then((function(e){return e.json()})).then((function(t){if(b(!1),t.status){if(P){var n=Yw(m);t.data.groups.map((function(e){n.push(e)})),p(n),x(!1),n.length<t.data.total?N(!0):N(!1)}else p(t.data.groups),e.include&&M(0),t.data.groups.length<t.data.total?N(!0):N(!1);t.hasOwnProperty("can_create_groups")&&z(t.can_create_groups)}else p([])}))}}),500,[E,i,R]);var V=function(){O(ey(ey({},E),{},{page:1}))};ly((function(){return document.addEventListener("vibebp_component_reload",V),function(){document.removeEventListener("vibebp_component_reload",V)}}));var G=function(e,t,a){var i=Yw(n);fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/invite/").concat(e),{method:"post",body:JSON.stringify({token:my("vibebp").getToken(),action:t})}).then((function(e){return e.json()})).then((function(e){e.status&&(i.splice(n.findIndex((function(e){return e.id===a})),1),r(i))}))};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.groups.label),window.vibebp.settings.show_groups_dir?wp.element.createElement("a",{className:"button is-primary new_mail "+("all-groups"==R?"active":""),onClick:function(){F("all-groups")}},window.vibebp.components.groups.all):"",y.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:n,onClick:function(n){var r=ey({},E);r.filter=e.css_id,r.page=1,M(!1),C(!1),E.css_id!==r.filter&&O(r),F(e.css_id);var a=Yw(y),i=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[i].class.splice(a[i].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),g(a)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"all-groups"===R?wp.element.createElement(Xw,{loadMembership:function(e){var t=m.findIndex((function(t,n){return t.id===e}));t>-1&&(M(t),uy("vibebp").setAction("view"),uy("vibebp").setId(e),F(""))}}):I?wp.element.createElement(nv,{newgroup:function(e){if(e){var t=Yw(m);t.unshift(e),p(t);var n="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"?").concat(encodeURIComponent(JSON.stringify(ey(ey({},E),{},{search_terms:""}))));localforage.getItem(n).then((function(e){var r=JSON.parse(e);r.data.groups=t,localforage.setItem(n,JSON.stringify(r))})),C(!1),M(0)}else C(!1)}}):!1!==D?wp.element.createElement(Iw,{group:m[D],show:function(){M(!1),O(ey(ey({},E),{},{include:""})),uy("vibebp").setId(!1),uy("vibebp").setAction(!1)}}):wp.element.createElement(cy,null,wp.element.createElement("div",{className:"vibebp_main_head"},"invites"===R?wp.element.createElement(cy,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:i.search_terms,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=ey({},i);t.search_terms=e.target.value,o(t)}})),wp.element.createElement("div",null,wp.element.createElement("select",{onChange:function(e){var t=ey({},i);t.accepted=e.target.value,o(t)}},Object.keys(window.vibebp.components.groups.invite_type).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_type[e])}))),wp.element.createElement("select",{onChange:function(e){var t=ey({},i);t.orderby=e.target.value,o(t)}},Object.keys(window.vibebp.components.groups.invite_sort).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_sort[e])}))))):wp.element.createElement(cy,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:E.search_terms,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=ey({},E);t.search_terms=e.target.value,O(t)}})),wp.element.createElement("select",{onChange:function(e){var t=ey({},E);t.type=e.target.value,O(t)}},Object.keys(window.vibebp.components.groups.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.sorters[e])}))))),f?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"invites"===R?wp.element.createElement("div",{className:"group_invites"},n.length||f?wp.element.createElement(cy,null,n.length?n.map((function(e,t){return wp.element.createElement(Jw,{invite:e,action:G})})):""):wp.element.createElement(cy,null,wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_groups_found))):wp.element.createElement("div",{className:"grouplist"},m.length||f?wp.element.createElement(cy,null,wp.element.createElement("div",{className:"vibebp_groups"},q?wp.element.createElement("div",{className:"vibebp_groups"},wp.element.createElement("div",{className:"new_group",onClick:function(){C(!0)}},wp.element.createElement("i",{className:"vicon vicon-plus"}))):"",m.length?m.map((function(e,t){return wp.element.createElement(Dw,{group:e,show:function(){M(t),uy("vibebp").setAction("view"),uy("vibebp").setId(e.id)}})})):""),S?wp.element.createElement("a",{className:"link",onClick:function(){var e=ey({},E);e.page=E.page+1,x(!0),O(e)}},window.vibebp.translations.more):""):wp.element.createElement(cy,null,wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_groups_found),q?wp.element.createElement("div",{className:"vibebp_groups"},wp.element.createElement("div",{className:"new_group",onClick:function(){C(!0)}},wp.element.createElement("i",{className:"vicon vicon-plus"}))):"")))))};function dy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dy(Object(n),!0).forEach((function(t){by(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function by(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yy=wp.element,gy=(yy.createElement,yy.useState),hy=(yy.useEffect,yy.Fragment),_y=(yy.render,wp.data),Ey=_y.dispatch,Oy=_y.select,jy=function(e){var t=vy(gy(!1),2),n=t[0],r=t[1],a=vy(gy(window.vibebp.translations.save_changes),2),i=a[0],o=a[1],l=vy(gy("email"),2),c=l[0],s=l[1],u=Oy("vibebp").getUser().email,m=vy(gy({email:u,pwd:"",pass1:"",pass2:""}),2),p=m[0],d=m[1],f=vy(gy(!1),2),b=f[0],v=f[1];return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.account_email)),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:"settings_tabs"},wp.element.createElement("a",{className:"setting_tab "+("email"==c?"active":""),onClick:function(){s("email")}},window.vibebp.translations.change_email),wp.element.createElement("a",{className:"setting_tab "+("password"==c?"active":""),onClick:function(){s("password")}},window.vibebp.translations.change_password),wp.element.createElement("a",{className:"setting_tab "+("cleardata"==c?"active":""),onClick:function(){s("cleardata")}},window.vibebp.translations.clear_data),!Oy("vibebp").getUser().caps.hasOwnProperty("edit_posts")&&window.vibebp.settings.delete_account?wp.element.createElement("a",{className:"setting_tab "+("delete_account"==c?"active":""),onClick:function(){s("delete_account")}},window.vibebp.translations.delete_account):""),wp.element.createElement("div",{className:"vibebp_form tab_content"},"email"==c?wp.element.createElement(hy,null,wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.account_email),wp.element.createElement("input",{type:"email",onChange:function(e){d(fy(fy({},p),{},{email:e.target.value}))},value:p.email}),p.email!==u?wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.confirm_old_password),wp.element.createElement("input",{type:"password",value:p.pwd,onChange:function(e){d(fy(fy({},p),{},{pwd:e.target.value}))}})):"")):"password"==c?wp.element.createElement(hy,null,wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.change_password),wp.element.createElement("input",{type:"password",value:p.pass1,onChange:function(e){d(fy(fy({},p),{},{pass1:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.repeat_new_password),wp.element.createElement("input",{type:"password",value:p.pass2,onChange:function(e){d(fy(fy({},p),{},{pass2:e.target.value}))}}))):"cleardata"==c?wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.clear_saved_data),wp.element.createElement("a",{onClick:function(){v(!0);var e=localforage.createInstance({name:"vibebp_stale_requests",storeName:"user"}),t=localforage.createInstance({name:"vibebp_stale_requests",storeName:"global"});e.clear(),t.clear(),localforage.clear().then((function(){v(!1),Ey("vibebp").addNotification({text:window.vibebp.translations.data_cleared}),document.dispatchEvent(new Event("vibebp_logout"))}))},className:b?"button is-primary is-loading":"button is-primary"},window.vibebp.translations.clear_data)):"",wp.element.createElement("a",{className:n?"button is-primary is-loading":"button is-primary",onClick:function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/save?post"),{method:"post",body:JSON.stringify(fy(fy({},p),{},{token:Oy("vibebp").getToken(),type:c}))}).then((function(e){return e.json()})).then((function(e){r(!1),"delete_account"==c&&Ey("vibebp").logout(),o(e.message),setTimeout((function(){o(window.vibebp.translations.save_changes)}),3e3)}))}},i))))};function Sy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ny(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ny(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ny(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ky=wp.element,Py=(ky.createElement,ky.useState),xy=ky.useEffect,Ay=ky.Fragment,Iy=(ky.render,wp.data),Cy=(Iy.dispatch,Iy.select),Ty=function(e){var t=Sy(Py(!0),2),n=t[0],r=t[1],a=Sy(Py({status:"",label:"",exports:"",message:"",submessage:""}),2),i=a[0],o=a[1],l=Sy(Py(!1),2),c=l[0],s=l[1];xy((function(){u()}),[]),xy((function(){return document.addEventListener("vibebp_component_reload",u),function(){document.removeEventListener("vibebp_component_reload",u)}}));var u=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/export_data"),{method:"post",body:JSON.stringify({token:Cy("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),o(e)}))};return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.export_data_settings)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(Ay,null,i.hasOwnProperty("exports")&&i.exports.length?wp.element.createElement(Ay,null,wp.element.createElement("div",{className:"export_data_items",dangerouslySetInnerHTML:{__html:i.exports}})):"",i.hasOwnProperty("message")&&i.message.length?wp.element.createElement("div",null,wp.element.createElement("div",{className:"export_data_message vbp_message",dangerouslySetInnerHTML:{__html:i.message}})):"",i.hasOwnProperty("can_make_new_request")&&i.can_make_new_request?wp.element.createElement("div",null,wp.element.createElement("a",{className:c?"button is-primary is-loading make_new_export_request":"button is-primary make_new_export_request",onClick:function(){s(!0),fetch("".concat(window.vibebp.api.url,"/settings/export_data/request"),{method:"post",body:JSON.stringify({token:Cy("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){s(!1),u()}))}},i.label," ")):"",i.hasOwnProperty("report_link")&&i.report_link?wp.element.createElement("div",null,wp.element.createElement("a",{className:"link make_new_export_download",href:i.report_link,target:"__blank"},i.label," ")):"")))};function Dy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function My(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ly(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uy=wp.element,Ry=(Uy.createElement,Uy.useState),Fy=Uy.useEffect,Hy=Uy.Fragment,qy=(Uy.render,wp.data),zy=(qy.dispatch,qy.select),$y=function(e){var t=Ly(Ry(!1),2),n=t[0],r=t[1],a=Ly(Ry({}),2),i=a[0],o=a[1];Fy((function(){l()}),[]);var l=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/email"),{method:"post",body:JSON.stringify({token:zy("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),o(e)}))};Fy((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}}));var c=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dy(Object(n),!0).forEach((function(t){My(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);n[e].value=t,o(n),fetch("".concat(window.vibebp.api.url,"/settings/email/set"),{method:"post",body:JSON.stringify({token:zy("vibebp").getToken(),setting:e,value:t})}).then((function(e){return e.json()})).then((function(e){}))};return wp.element.createElement("div",{class:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.send_email_notice)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?wp.element.createElement(Hy,null,Object.keys(i).map((function(e){return wp.element.createElement("div",{className:"setting"},wp.element.createElement("label",null,i[e].label),wp.element.createElement("div",{className:"switch"},"yes"==i[e].value?wp.element.createElement("input",{type:"checkbox",id:e,checked:!0,onClick:function(){return c(e,"no")}}):wp.element.createElement("input",{type:"checkbox",id:e,onClick:function(){return c(e,"yes")}}),wp.element.createElement("label",{for:e,className:"slider"})))}))):""))};function By(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zy=wp.element,Ky=(Zy.createElement,Zy.useState),Xy=Zy.useEffect,Yy=Zy.Fragment,Qy=(Zy.render,wp.data),eg=(Qy.dispatch,Qy.select),tg=function(e){var t=Vy(Ky(!1),2),n=t[0],r=t[1],a=Vy(Ky({}),2),i=a[0],o=a[1];Xy((function(){l()}),[]);var l=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/fields"),{method:"post",body:JSON.stringify({token:eg("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),o(e)}))};Xy((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}}));var c=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?By(Object(n),!0).forEach((function(t){Wy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):By(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);n.fields[n.fields.findIndex((function(t){return t.id===e.id}))].visibility=t,o(n),fetch("".concat(window.vibebp.api.url,"/xprofile/fields/setvisibility?post"),{method:"post",body:JSON.stringify({token:eg("vibebp").getToken(),field_id:e.id,visibility:t})}).then((function(e){return e.json()})).then((function(e){}))};return wp.element.createElement("div",{class:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.visibility_settings)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?wp.element.createElement(Yy,null,i.groups.map((function(e){return wp.element.createElement("div",{className:"setting_group"},wp.element.createElement("label",null,e.name),i.fields.filter((function(t){return t.group_id===e.id})).map((function(e){return wp.element.createElement("div",{className:"setting_field"},wp.element.createElement("strong",null,e.name),wp.element.createElement("select",{value:e.visibility,onChange:function(t){return c(e,t.target.value)}},Object.keys(window.vibebp.components.xprofile.visibility).map((function(t){return wp.element.createElement("option",{value:t,selected:e.visibility==t},window.vibebp.components.xprofile.visibility[t])}))))})))}))):""))};var ng=wp.element,rg=(ng.createElement,ng.useState,ng.useEffect,ng.Fragment,ng.render,wp.data);rg.dispatch,rg.select;function ag(e){return function(e){if(Array.isArray(e))return lg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||og(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ig(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||og(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function og(e,t){if(e){if("string"==typeof e)return lg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lg(e,t):void 0}}function lg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cg=wp.element,sg=(cg.createElement,cg.useState),ug=cg.useEffect,mg=cg.Fragment,pg=(cg.render,wp.data),dg=pg.dispatch,fg=pg.select,bg=function(e){var t=ig(sg(!0),2),n=t[0],r=t[1],a=ig(sg(!1),2),i=a[0],o=a[1];ug((function(){l()}),[]);ug((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}}));var l=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/logins/get?force"),{method:"post",body:JSON.stringify({token:fg("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.status&&o(e.data),r(!1)}))};return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.active_sessions)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(mg,null,wp.element.createElement("div",{className:"my-logins"},i.map((function(e,t){return wp.element.createElement("div",{className:"login_val"},wp.element.createElement("h4",{className:"login_date"},new Date(1e3*parseInt(e.login_time)).toString()),wp.element.createElement("div",{className:"login_details"},wp.element.createElement("div",{className:"info"}," ",wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-world"}),(n=e.usr,r="",/Opera[\/\s](\d+\.\d+)/.test(n)?r=window.vibebp.settings.browser_names.opera:/MSIE (\d+\.\d+);/.test(n)?r=window.vibebp.settings.browser_names.msie:/Navigator[\/\s](\d+\.\d+)/.test(n)?r=window.vibebp.settings.browser_names.netscape:/Chrome[\/\s](\d+\.\d+)/.test(n)?r=window.vibebp.settings.browser_names.chrome:/Safari[\/\s](\d+\.\d+)/.test(n)?(r=window.vibebp.settings.browser_names.safari,/Version[\/\s](\d+\.\d+)/.test(n),new Number(RegExp.$1)):/Firefox[\/\s](\d+\.\d+)/.test(n)&&(r=window.vibebp.settings.browser_names.firefox),r)," ",window.vibebp.translations.on," ",function(e){var t="Unknown";return-1!=e.indexOf("Windows NT 10.0")&&(t=window.vibebp.settings.os_names.win_10),-1!=e.indexOf("Windows NT 6.3")&&(t=window.vibebp.settings.os_names.win_81),-1!=e.indexOf("Windows NT 6.2")&&(t=window.vibebp.settings.os_names.win_8),-1!=e.indexOf("Windows NT 6.1")&&(t=window.vibebp.settings.os_names.win_7),-1!=e.indexOf("Windows NT 6.0")&&(t=window.vibebp.settings.os_names.win_vista),-1!=e.indexOf("Windows NT 5.1")&&(t=window.vibebp.settings.os_names.win_xp),-1!=e.indexOf("Windows NT 5.0")&&(t=window.vibebp.settings.os_names.win_2000),-1!=e.indexOf("Mac")&&(t=window.vibebp.settings.os_names.mac_os),-1!=e.indexOf("X11")&&(t=window.vibebp.settings.os_names.unix),-1!=e.indexOf("Linux")&&(t=window.vibebp.settings.os_names.linux),-1!=e.indexOf("Android")&&(t=window.vibebp.settings.os_names.android),/(iPhone|iPad|iPod)/.test(e)&&(t=window.vibebp.settings.os_names.iphone),t}(e.usr))),wp.element.createElement("div",{className:"login_action"},wp.element.createElement("a",{className:"remove_device vicon vicon-trash",title:window.vibebp.translations.remove_device,onClick:function(t){var n;n=e,fetch("".concat(window.vibebp.api.url,"/settings/logins/remove?post"),{method:"post",body:JSON.stringify({token:fg("vibebp").getToken(),login:n})}).then((function(e){return e.json()})).then((function(e){var t=ag(i);t.splice(t.findIndex((function(e){return e.vibebp_token_key===n.vibebp_token_key})),1),o(t),e.hasOwnProperty("message")&&e.message.length&&dg("vibebp").addNotification({text:e.message,icon:"vicon vicon-check"})}))}}))));var n,r}))))))};function vg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yg=wp.element,gg=(yg.createElement,yg.useState),hg=yg.useEffect,_g=(yg.Fragment,yg.render,wp.data),Eg=_g.dispatch,Og=_g.select,jg=function(e){var t=vg(gg(!0),2),n=t[0],r=t[1],a=vg(gg(!1),2),i=a[0],o=a[1];hg((function(){fetch("".concat(window.vibebp.api.url,"/wall/whocanpost/get?force"),{method:"post",body:JSON.stringify({token:Og("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.value&&e.value.length&&o(e.value),r(!1)}))}),[]);return wp.element.createElement("div",{className:"portal"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{className:"details"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.wall_settings)),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:"form form-field"},wp.element.createElement("label",null,window.vibebp.translations.wall_settings),wp.element.createElement("select",{onChange:function(e){!function(e){o(e.target.value),e.target.value&&fetch("".concat(window.vibebp.api.url,"/wall/whocanpost/set?post"),{method:"post",body:JSON.stringify({token:Og("vibebp").getToken(),value:e.target.value})}).then((function(e){return e.json()})).then((function(e){Eg("vibebp").addNotification({text:e.message})}))}(e)}},window.vibebp.components.wall.who_can_post&&Object.keys(window.vibebp.components.wall.who_can_post).length?Object.keys(window.vibebp.components.wall.who_can_post).map((function(e){return wp.element.createElement("option",{value:e,selected:i===e},window.vibebp.components.wall.who_can_post[e])})):"")))))};function Sg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ng(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ng(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ng(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kg=wp.element,Pg=(kg.createElement,kg.useState),xg=(kg.useEffect,kg.Fragment,kg.render,wp.data),Ag=xg.dispatch,Ig=xg.select,Cg=function(e){var t=Sg(Pg(!1),2),n=t[0],r=t[1],a=Sg(Pg(!1),2),i=a[0],o=a[1];return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"details"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.delete_account)),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("a",{className:n?"button is-primary danger is-loading":"button is-primary danger",onClick:function(){o(!0)}},window.vibebp.translations.delete_account)),wp.element.createElement(aa,{open:i,onClose:function(){return o(!1)}},wp.element.createElement("div",{className:"content"},window.vibebp.translations.sure_delete_account,wp.element.createElement("div",{className:"action_buttons"},wp.element.createElement("a",{className:"button is-primary",onClick:function(e){o(!1),r(!0),fetch("".concat(window.vibebp.api.url,"/settings/deleteaccount?post"),{method:"post",body:JSON.stringify({token:Ig("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&document.dispatchEvent(new Event("vibebp_logout")),Ag("vibebp").addNotification({text:e.message})}))}},window.vibebp.translations.yes),wp.element.createElement("a",{className:"button",onClick:function(){return o(!1)}},window.vibebp.translations.no))))))};function Tg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mg=wp.element,Lg=(Mg.createElement,Mg.useState),Jg=Mg.useEffect,Ug=(Mg.Fragment,Mg.render,wp.data),Rg=(Ug.dispatch,Ug.select),Fg=function(e){var t=Tg(Lg(!1),2),n=t[0],r=t[1];return Jg((function(){var e=new CustomEvent("vibebp_profile_settings");document.dispatchEvent(e),document.querySelector("body").classList.value.includes("withsidebar")&&document.querySelector("body").classList.remove("withsidebar"),fetch("".concat(window.vibebp.api.url,"/settings/candeleteaccount?force"),{method:"post",body:JSON.stringify({token:Rg("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(e.status)}))}),[]),wp.element.createElement("div",{className:"profile_settings"},wp.element.createElement(jy,null),wp.element.createElement(tg,null),wp.element.createElement($y,null),wp.element.createElement(Ty,null),wp.element.createElement(bg,null),wp.element.createElement(jg,null),n?wp.element.createElement(Cg,null):"",window.vibebp.settings.profile_settings.map((function(e){return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:e.label}})),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:e.key})))})))},Hg=wp.element,qg=(Hg.createElement,Hg.useState,Hg.useEffect,Hg.Fragment),zg=(Hg.render,wp.data),$g=(zg.dispatch,zg.select,function(e){return wp.element.createElement("div",{className:"vibebp_wc_full_order"},wp.element.createElement("div",{className:"vibebp_wc_order_header"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:e.back}),wp.element.createElement("span",{className:"order_status "+e.order.status},window.vibebp.components.shop.order_statuses["wc-"+e.order.status])),wp.element.createElement("div",{className:"vibebp_order_details"},wp.element.createElement("div",{className:"vibebp_order_main"},wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_number),"#",e.order.order_number),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_date),e.order.created_at),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_status),wp.element.createElement("span",{className:"order_status "+e.order.status},window.vibebp.components.shop.order_statuses["wc-"+e.order.status])),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_amount),e.order.currency," ",e.order.total),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_payment_method),e.order.payment_details.method_title)),wp.element.createElement("div",{className:"vibebp_order_line_items"},e.order.line_items.length?e.order.line_items.map((function(e){return wp.element.createElement("div",{className:"vibebp_order_line_item"},wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.item_name),e.name," x ",e.quantity),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.item_total),e.subtotal," ","0.00"!==e.subtotal_tax?wp.element.createElement("span",{className:"subtotal_tax"},"[",e.subtotal_tax,"]"):""))})):""),e.order.fee_lines.length||e.order.shipping_lines.length||e.order.coupon_lines.length?wp.element.createElement("div",{className:"vibebp_order_extra_items"},e.order.coupon_lines.length?wp.element.createElement(qg,null,wp.element.createElement("strong",null,window.vibebp.translations.coupons_applied),e.order.coupon_lines.map((function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.code),wp.element.createElement("span",null,e.amount))}))):"",e.order.shipping_lines.length?wp.element.createElement(qg,null,wp.element.createElement("strong",null,window.vibebp.translations.shipping_rates),e.order.shipping_lines.map((function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.method_title),wp.element.createElement("span",null,e.total))}))):"",e.order.fee_lines.length?wp.element.createElement(qg,null,wp.element.createElement("strong",null,window.vibebp.translations.fees),e.order.fee_lines.map((function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.method_title),wp.element.createElement("span",null,e.total))}))):""):"",wp.element.createElement("div",{className:"vibebp_addresses"},wp.element.createElement("div",{className:"vibebp_billing_address"},wp.element.createElement("strong",null,window.vibebp.translations.billing_address),wp.element.createElement("span",null,e.order.billing_address.first_name," ",e.order.billing_address.last_name),wp.element.createElement("span",null,e.order.billing_address.email," ",e.order.billing_address.phone),e.order.billing_address.company.length?wp.element.createElement("span",null,e.order.billing_address.company):"",wp.element.createElement("span",null,e.order.billing_address.address_1),e.order.billing_address.address_2.length?wp.element.createElement("span",null,e.order.billing_address.address_2):"",wp.element.createElement("span",null,e.order.billing_address.city," ",e.order.billing_address.state," ",e.order.billing_address.country," ",e.order.billing_address.pincode)),e.order.shipping_address.first_name.length?wp.element.createElement("div",{className:"vibebp_shipping_address"},wp.element.createElement("strong",null,window.vibebp.translations.shipping_address),wp.element.createElement("span",null,e.order.shipping_address.first_name," ",e.order.shipping_address.last_name),wp.element.createElement("span",null,e.order.shipping_address.email," ",e.order.shipping_address.phone),e.order.shipping_address.company.length?wp.element.createElement("span",null,e.order.shipping_address.company):"",wp.element.createElement("span",null,e.order.shipping_address.address_1),e.order.shipping_address.address_2.length?wp.element.createElement("span",null,e.order.shipping_address.address_2):"",wp.element.createElement("span",null,e.order.shipping_address.city," ",e.order.shipping_address.state," ",e.order.shipping_address.country," ",e.order.shipping_address.pincode)):"")))});function Bg(e){return function(e){if(Array.isArray(e))return Xg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Kg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wg(Object(n),!0).forEach((function(t){Gg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Kg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kg(e,t){if(e){if("string"==typeof e)return Xg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xg(e,t):void 0}}function Xg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yg=wp.element,Qg=(Yg.createElement,Yg.useState),eh=Yg.useEffect,th=Yg.Fragment,nh=(Yg.render,Yg.useRef),rh=wp.data,ah=(rh.dispatch,rh.select),ih=function(e){var t=Zg(Qg(!1),2),n=t[0],r=t[1],a=Zg(Qg({page:1,order_date:"",status:"wc-completed",limit:window.vibebp.components.shop.per_page}),2),i=a[0],o=a[1],l=Zg(Qg(!1),2),c=l[0],s=l[1],u=Zg(Qg(!1),2),m=u[0],p=u[1],d=Zg(Qg([]),2),f=d[0],b=d[1],v=Zg(Qg([]),2),w=v[0],y=v[1],g=Zg(Qg(!1),2),h=g[0],_=g[1],E=Zg(Qg(!1),2),O=(E[0],E[1],nh());eh((function(){if(O&&O.current&&"function"==typeof flatpickr&&(!f.length||f.length&&f.length>1)){var e={dateFormat:"m/d/Y",mode:"range",defaultDate:f,onChange:function(e){if(e&&e.length>1){b(e);var t=Vg({},i);t.order_date={start_date:e[0].getTime(),end_date:e[e.length-1].getTime()},o(t)}}};flatpickr(O.current,e)}}),[f]),eh((function(){var e=Vg({},i);e.token=ah("vibebp").getToken(),r(!0),fetch("".concat(window.vibebp.api.url,"/wc/orders?force"),{method:"post",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status){if(m){if(e.orders.length){var t=Bg(w);e.orders.map((function(e){t.push(e)})),y(t)}p(!1)}else y(e.orders),s(!0);e.orders.length<i.limit&&s(!1)}}))}),[i]);var j=function(){o(Vg({},i))};return eh((function(){return document.addEventListener("vibebp_component_reload",j),function(){document.removeEventListener("vibebp_component_reload",j)}})),wp.element.createElement("div",{className:"vibebp_shop_orders"},wp.element.createElement("div",{className:"vibebp_shop_orders_header vibebp_form vibebp_main_head"},wp.element.createElement("select",{value:i.timeline,onChange:function(e){o(Vg(Vg({},i),{},{timeline:e.target.value,page:1}))}},Object.keys(window.vibebp.components.shop.order_timelines).map((function(e){return wp.element.createElement("option",{selected:i.timeline==e,value:e},window.vibebp.components.shop.order_timelines[e])}))),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("div",{className:"date"},wp.element.createElement("input",{type:"text",ref:O}),i.order_date?wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){b([]);var e=Vg({},i);e.order_date=!1,o(e)}}):"")),wp.element.createElement("select",{value:i.status,onChange:function(e){o(Vg(Vg({},i),{},{status:e.target.value,page:1}))}},wp.element.createElement("option",null,window.vibebp.translations.select_order_status),Object.keys(window.vibebp.components.shop.order_statuses).map((function(e){return wp.element.createElement("option",{selected:i.status==e,value:e},window.vibebp.components.shop.order_statuses[e])})))),n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):h?wp.element.createElement($g,{order:h,back:function(){_(!1)}}):w.length?wp.element.createElement(th,null,w.map((function(e){var t=e[0];return wp.element.createElement("div",{className:"vibebp_wc_order",onClick:function(){_(t)}},wp.element.createElement("div",{className:"vibebp_order_details"},wp.element.createElement("a",{className:"vibebp_order_number link",href:t.view_order_url,target:"_blank"},wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_number),"#",t.order_number),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_date),t.created_at),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_status),wp.element.createElement("span",{className:"order_status "+t.status},window.vibebp.components.shop.order_statuses["wc-"+t.status])),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_quantity),t.total_line_items_quantity),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_amount),t.currency," ",t.total)))})),c?wp.element.createElement("a",{className:"link",onClick:function(){p(!0),o(Vg(Vg({},i),{},{page:i.page+1}))}},window.vibebp.components.shop.translations.load_more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_orders))};function oh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ch=wp.element,sh=(ch.createElement,ch.useState),uh=ch.useEffect,mh=(ch.Fragment,ch.render,wp.data),ph=(mh.dispatch,mh.select),dh=function(e){var t=oh(sh(!1),2),n=t[0],r=t[1],a=oh(sh([]),2),i=a[0],o=a[1];return uh((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/wc/downloads?force"),{method:"post",body:JSON.stringify({token:ph("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&o(e.downloads)}))}),[]),wp.element.createElement("div",{className:"vibebp_wc_downloads"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i.length?i.map((function(e){return wp.element.createElement("div",{className:"vibebp_wc_download"},wp.element.createElement("strong",null,e.download_name),wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.product_name),e.product_name),e.downloads_remaining?wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.remaining_downloads),e.downloads_remaining):"",e.access_expires?wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.access_expires),e.access_expires):"",wp.element.createElement("a",{href:e.file.file,target:"_blank",className:"button is-primary"},wp.element.createElement("span",{className:"vicon vicon-download"})," ",window.vibebp.translations.download))})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_downloads))};function fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yh=wp.element,gh=(yh.createElement,yh.useState),hh=yh.useEffect,_h=(yh.Fragment,yh.render,wp.data),Eh=_h.dispatch,Oh=_h.select,jh=function(e){var t=vh(gh(!1),2),n=t[0],r=t[1],a=vh(gh({}),2),i=a[0],o=a[1],l=vh(gh(),2),c=l[0],s=l[1],m=vh(gh(!1),2),p=m[0],d=m[1];hh((function(){f()}),[]);var f=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/wc/addresses?force"),{method:"post",body:JSON.stringify({token:Oh("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&o(e.addresses)}))};return hh((function(){return document.addEventListener("vibebp_component_reload",f),function(){document.removeEventListener("vibebp_component_reload",f)}})),u((function(){if(p){var e=c.split("-");fetch("".concat(window.vibebp.api.url,"/wc/addresses/update?post"),{method:"post",body:JSON.stringify({token:Oh("vibebp").getToken(),address_type:e[0],field:e[1],value:i[e[0]][e[1]].value})}).then((function(e){return e.json()})).then((function(e){d(!1),e.status||e.hasOwnProperty("message")&&Eh("vibebp").addNotification({text:e.message})}))}}),500,[i]),wp.element.createElement("div",{className:"vibebp_wc_addresses"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?Object.keys(i).map((function(e){return wp.element.createElement("div",{className:"vibebp_wc_address"},wp.element.createElement("strong",null,window.vibebp.translations[e]),Object.keys(i[e]).map((function(t){return wp.element.createElement("div",{className:"vibebp_wc_address_field"},wp.element.createElement("span",{onClick:function(){s(c!==e+"-"+t&&e+"-"+t)}},i[e][t].label,c===e+"-"+t?wp.element.createElement("i",null,window.vibebp.translations.cancel):wp.element.createElement("span",{className:"vicon vicon-pencil"})),c===e+"-"+t?wp.element.createElement("div",{className:p?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:i[e][t].value,onChange:function(n){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fh(Object(n),!0).forEach((function(t){bh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);r[e][t].value=n.target.value,o(r),d(!0)}})):wp.element.createElement("span",null,i[e][t].value))})))})):"")};function Sh(e){return function(e){if(Array.isArray(e))return Ah(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||xh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ph(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||xh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xh(e,t){if(e){if("string"==typeof e)return Ah(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ah(e,t):void 0}}function Ah(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ih=wp.element,Ch=(Ih.createElement,Ih.useState),Th=Ih.useEffect,Dh=(Ih.Fragment,Ih.render,wp.data),Mh=(Dh.dispatch,Dh.select),Lh=function(e){var t=Ph(Ch({}),2),n=t[0],r=t[1],a=Ph(Ch([]),2),i=a[0],o=a[1],l=Ph(Ch(""),2),c=l[0],s=l[1];return Th((function(){var e=Mh("vibebp").getMenu().filter((function(e){return"shop"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.shop.label),i.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nh(Object(n),!0).forEach((function(t){kh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);l.filter=e.css_id,l.page=1,n.css_id!==l.filter&&r(l),s(e.css_id);var c=Sh(i),u=c.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),o(c)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"downloads"==c?wp.element.createElement(dh,null):"edit-address"==c?wp.element.createElement(jh,null):wp.element.createElement(ih,null)))};function Jh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rh=wp.element,Fh=(Rh.createElement,Rh.useState),Hh=Rh.useEffect,qh=Rh.Fragment,zh=(Rh.render,wp.data),$h=zh.dispatch,Bh=zh.select,Wh=function(e){var t=Jh(Fh(!1),2),n=t[0],r=t[1],a=Jh(Fh({}),2),i=a[0],o=a[1],l=Jh(Fh({}),2),c=l[0],s=l[1];return Hh((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/pmpro/memberships"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:Bh("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&o(e.data),e.hasOwnProperty("message")&&$h("vibebp").addNotification({text:e.message}),e.hasOwnProperty("all_levels_page")&&s(e.all_levels_page)}))}),[]),wp.element.createElement("div",{className:"vibebp_pmpro_memberships"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(qh,null,i.length?wp.element.createElement("table",{className:"memberships table"},wp.element.createElement("thead",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.level)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.billing)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.expiration)))),wp.element.createElement("tbody",null,i.map((function(e,t){return wp.element.createElement("tr",{className:"membership"},wp.element.createElement("td",null,wp.element.createElement("h3",{dangerouslySetInnerHTML:{__html:e.name}}),wp.element.createElement("div",{className:"actions"},e.hasOwnProperty("change_link")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.change_link},window.vibebp.components.pmpro.translations.change):"",e.hasOwnProperty("cancel_link")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.cancel_link},window.vibebp.components.pmpro.translations.cancel," "):"",e.hasOwnProperty("renew")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.renew},window.vibebp.components.pmpro.translations.renew):"")),e.hasOwnProperty("billing_html")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.billing_html}}):"",e.hasOwnProperty("expiration_html")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.expiration_html}}):"")})))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.components.pmpro.translations.no_memberships),c.length?wp.element.createElement("a",{target:"_blank",href:c},window.vibebp.components.pmpro.translations.view_all_levels):""))};function Vh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zh=wp.element,Kh=(Zh.createElement,Zh.useState),Xh=Zh.useEffect,Yh=(Zh.Fragment,Zh.render,wp.data),Qh=(Yh.dispatch,Yh.select),e_=function(e){var t=Vh(Kh(!1),2),n=t[0],r=t[1],a=Vh(Kh({}),2),i=(a[0],a[1]),o=Qh("vibebp").getUser();return Xh((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/pmpro/account"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:Qh("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&i(e.data)}))}),[]),wp.element.createElement("div",{className:"vibebp_pmpro_account"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("table",{className:"table",style:{width:"auto"}},wp.element.createElement("tbody",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,window.vibebp.components.pmpro.translations.username),wp.element.createElement("td",null,o.username)),wp.element.createElement("tr",null,wp.element.createElement("td",null,window.vibebp.components.pmpro.translations.email),wp.element.createElement("td",null,o.email)))))};function t_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r_=wp.element,a_=(r_.createElement,r_.useState),i_=r_.useEffect,o_=r_.Fragment,l_=(r_.render,wp.data),c_=l_.dispatch,s_=l_.select,u_=function(e){var t=t_(a_(!1),2),n=t[0],r=t[1],a=t_(a_({}),2),i=a[0],o=a[1],l=t_(a_({}),2);l[0],l[1];i_((function(){r(!0),c()}),[]);var c=function(){fetch("".concat(window.vibebp.api.url,"/pmpro/invoices"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:s_("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&o(e.data),e.hasOwnProperty("message")&&c_("vibebp").addNotification({text:e.message})}))};return i_((function(){return document.addEventListener("vibebp_component_reload",c),function(){document.removeEventListener("vibebp_component_reload",c)}})),wp.element.createElement("div",{className:"vibebp_pmpro_invoices"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(o_,null,i.length?wp.element.createElement("table",{className:"memberships table"},wp.element.createElement("thead",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.date)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.level)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.amount)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.status)))),wp.element.createElement("tbody",null,i.map((function(e,t){return wp.element.createElement("tr",{className:"membership"},wp.element.createElement("td",null,e.hasOwnProperty("date")?wp.element.createElement("a",{target:"_blank",className:"",href:e.invoice_link},e.date):""),e.hasOwnProperty("level")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.level}}):"",e.hasOwnProperty("amount")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.amount}}):"",e.hasOwnProperty("status")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.status}}):"")})))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.components.pmpro.translations.no_invoices)))};function m_(e){return function(e){if(Array.isArray(e))return v_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||b_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b_(e,t){if(e){if("string"==typeof e)return v_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v_(e,t):void 0}}function v_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w_=wp.element,y_=(w_.createElement,w_.useState),g_=w_.useEffect,h_=(w_.Fragment,w_.render,wp.data),__=(h_.dispatch,h_.select),E_=function(e){var t=f_(y_({}),2),n=t[0],r=t[1],a=f_(y_([]),2),i=a[0],o=a[1],l=f_(y_(""),2),c=l[0],s=l[1];return g_((function(){var e=__("vibebp").getMenu().filter((function(e){return"memberships"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&(e[n].class.push("current-menu-item"),""==c&&s(e[n].css_id))})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.pmpro.label),i.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p_(Object(n),!0).forEach((function(t){d_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);l.filter=e.css_id,l.page=1,n.css_id!==l.filter&&r(l),s(e.css_id);var c=m_(i),u=c.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),o(c)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"memberships"==c?wp.element.createElement(Wh,null):"account"==c?wp.element.createElement(e_,null):"invoices"==c?wp.element.createElement(u_,null):""))};function O_(e){return function(e){if(Array.isArray(e))return x_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||P_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j_(Object(n),!0).forEach((function(t){N_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||P_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P_(e,t){if(e){if("string"==typeof e)return x_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x_(e,t):void 0}}function x_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A_=wp.element,I_=A_.useState,C_=A_.useEffect,T_=wp.data,D_=T_.dispatch,M_=T_.select,L_=function(e){var t=k_(I_([]),2),n=t[0],r=t[1],a=k_(I_({search:"",page:1}),2),i=a[0],o=a[1],l=k_(I_(!1),2),c=l[0],s=l[1],m=k_(I_(!0),2),p=m[0],d=m[1],f=k_(I_(null),2),b=f[0],v=f[1];C_((function(){o({search:"",page:1,user_id:e.user_id}),r([])}),[e.user_id]),u((function(){var t=S_({},i);t.token=M_("vibebp").getToken(),b&&b.abort();var a={},o=new AbortController;b&&(a={signal:o.signal}),v(o),e.user_id&&(t=S_(S_({},t),{},{user_id:e.user_id})),d(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.search.length?"nocache":encodeURIComponent(JSON.stringify(S_(S_({},i),{},{search:""}))),"&force"),S_(S_({method:"post"},a),{},{headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(t)})).then((function(e){return e.json()})).then((function(e){d(!1),e.status?(r([].concat(O_(n),O_(e.data.activities))),s(e.data.has_more_items)):e.hasOwnProperty("message")&&D_("vibebp").addNotification({text:e.message})}))}),500,[i]);var w=O_(n);return i.hasOwnProperty("search")&&i.search.length&&(w=n.filter((function(e){return e.action.indexOf(i.search)>-1||e.content.indexOf(i.search)>-1}))),i.hasOwnProperty("sorter")&&i.sorter.length&&(w=n.filter((function(e){return e.type==i.sorter>-1}))),wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:function(e){var t=S_({},i);t.search=e.target.value,t.page=1,o(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){return selectActivityType(e.target.value)}},Object.keys(window.vibebp.components.activity.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.activity.sorters[e])}))))),wp.element.createElement("div",{className:"portal_body"},w.length?wp.element.createElement("div",{className:"activity_list"},w.map((function(e){return wp.element.createElement(Ci,{activity:e,rootActivityId:e.id,update:function(){},noedit:!0})}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found),p?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",c?wp.element.createElement("a",{className:"link",onClick:function(){var e=S_({},i);e.page=i.page+1,o(e)}},window.vibebp.translations.more):""))},J_=(0,wp.element.createContext)({});var U_=wp.element;U_.useState,U_.useEffect,U_.useRef,U_.Fragment,wp.data.dispatch;function R_(e){return function(e){if(Array.isArray(e))return G_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||V_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F_(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function H_(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){F_(i,r,a,o,l,"next",e)}function l(e){F_(i,r,a,o,l,"throw",e)}o(void 0)}))}}function q_(){return(q_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z_(Object(n),!0).forEach((function(t){B_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||V_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V_(e,t){if(e){if("string"==typeof e)return G_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G_(e,t):void 0}}function G_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z_(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var K_=wp.element,X_=K_.useState,Y_=(K_.useEffect,K_.Fragment),Q_=K_.useContext,eE=wp.data,tE=eE.dispatch,nE=eE.select,rE=function(e){var t=Q_(J_).menu,n=W_(X_(!1),2),r=n[0],a=n[1],i=W_(X_({email:"",password:"",role:"",member_types:[],tags:[],image:{}}),2),o=i[0],l=i[1],c=W_(X_(e.create_type?e.create_type:"create"),2),s=c[0],u=c[1],m=W_(X_([]),2),p=m[0],d=m[1],f=function(e){if(!e.length)return!1;var t=[];return e.length<window.vibebp.settings.password_length&&t.push(window.vibebp.translations.password_6_chars),e.search(/[a-z]/i)<0&&t.push(window.vibebp.translations.password_one_letter),e.search(/[0-9]/)<0&&t.push(window.vibebp.translations.password_digit),e.search(/[A-Z]/)<0&&t.push(window.vibebp.translations.password_uppercase),e.search(/[!@#$%^&*]/)<0&&t.push(window.vibebp.translations.special_char),t};return wp.element.createElement("div",{className:"vibebp_form vibe_register_users_wrapper"},e.hasOwnProperty("hidetabs")?"":wp.element.createElement("div",{class:"buttons has-addons create_user_type"},wp.element.createElement("button",{className:"create"===s?"button is-success is-selected":"button",onClick:function(){return u("create")}},window.vibebp.translations.create_user," "),wp.element.createElement("button",{className:"csv"===s?"button is-success is-selected":"button",onClick:function(){return u("csv")}},window.vibebp.translations.bulk_upload)),wp.element.createElement("div",{className:"create_user_wrapper"},s?wp.element.createElement(Y_,null,"csv"===s?wp.element.createElement(aE,q_({fields:p},e)):"",wp.element.createElement("div",{style:{display:"create"===s?"block":"none"}},wp.element.createElement("div",{className:"vibe_register_user_header"},wp.element.createElement("div",null,wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.enter_email),wp.element.createElement("input",{type:"email",value:o.email,onChange:function(e){return l($_($_({},o),{},{email:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.enter_password),wp.element.createElement("input",{type:"password",value:o.password,onChange:function(e){return l($_($_({},o),{},{password:e.target.value}))}})))),wp.element.createElement("div",{className:"vibe_register_user_body"},t?wp.element.createElement(Y_,null,t.types?wp.element.createElement("div",{className:"member_tags_wrapper vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.select_member_types),wp.element.createElement("div",{className:"member_tags"},Object.keys(t.types).map((function(e){var n=t.types[e].db_id,r=o.member_types.includes(n);return wp.element.createElement("span",{className:"member_tag ".concat(r?"active":""),style:{color:"inherit",border:"1px solid var(--border)"},key:n,onClick:function(){var e=$_({},o);e.member_types.includes(n)?e.member_types.splice(e.member_types.indexOf(n),1):e.member_types.push(n),l(e)}},t.types[e].labels.name)})))):"",t.tags&&t.tags.length?wp.element.createElement("div",{className:"member_tags_wrapper vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.select_tags),wp.element.createElement("div",{className:"member_tags"},t.tags.map((function(e){var t=e.name,n=e.term_id,r=e.color,a=o.tags.includes(n);return wp.element.createElement("span",{className:"member_tag ".concat(a?"active":""),key:n,style:{background:r},onClick:function(){var e=$_({},o);e.tags.includes(n)?e.tags.splice(e.tags.indexOf(n),1):e.tags.push(n),l(e)}},t)})))):""):"",wp.element.createElement(Yo,{user_id:0,update:function(e){d(e.fields)}}),wp.element.createElement("a",{className:r?"button is-primary is-loading":"button is-primary",onClick:function(){if(t=o.email,/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t)){var t,n=f(o.password);0===n.length?(a(!0),fetch("".concat(window.vibebp.api.url,"/members/create-users?nocache"),{method:"post",body:JSON.stringify($_($_({},e),{},{users:[o],is_single:!0,token:nE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){a(!1),t.hasOwnProperty("message")&&tE("vibebp").addNotification({text:t.message}),t.status&&(e.update(),e.close())}))):n.map((function(e){tE("vibebp").addNotification({text:e})}))}else tE("vibebp").addNotification({text:window.vibebp.translations.email_not_valid})}},window.vibebp.translations.create_account)))):""))},aE=function(e){var t=W_(X_(),2),n=t[0],r=t[1],a=W_(X_({file:!1,saving:!1}),2),i=a[0],o=a[1],l=W_(X_([]),2),c=(l[0],l[1]),s=W_(X_(0),2),u=s[0],m=s[1],p=function(){var t=H_(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m(0),(a=new FileReader).onload=function(){var t=H_(regeneratorRuntime.mark((function t(n){var a,l,c,s,u,p,d,b,v,w,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target.result,!(l=(l=f(a)).filter((function(e){return""!==e[0].value||" "!==e[0].value}))).length){t.next=43;break}o($_($_({},i),{},{saving:!0})),c=0,s=B_({},Symbol.asyncIterator,(function(){return{i:0,next:function(){var t=this;if(this.i<l.length){var n=l[this.i],r={email:n[0].value,password:n[1].value,tags:n[2].value?n[2].value.split("&"):"",member_types:n[3].value?n[3].value.split("&"):""},a=[],i=0;return n.map((function(t,n){n>3&&(a.push({id:e.fields[i].id,value:t.value}),i++)})),r.fields=a,fetch("".concat(window.vibebp.api.url,"/members/create-users?nocache"),{method:"post",body:JSON.stringify($_($_({},e),{},{users:[r],token:nE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(){return{value:t.i++,done:!1}}))}return Promise.resolve({done:!0})}}})),u=!0,p=!1,t.prev=9,b=Z_(s);case 11:return t.next=13,b.next();case 13:return v=t.sent,u=v.done,t.next=17,v.value;case 17:if(w=t.sent,u){t.next=27;break}w,c++,100===(y=100*c/l.length)&&(o($_($_({},i),{},{saving:!1})),r(""),m(0),tE("vibebp").addNotification({text:window.vibebp.translations.all_registered}),e.update()),m(y);case 24:u=!0,t.next=11;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(9),p=!0,d=t.t0;case 33:if(t.prev=33,t.prev=34,u||null==b.return){t.next=38;break}return t.next=38,b.return();case 38:if(t.prev=38,!p){t.next=41;break}throw d;case 41:return t.finish(38);case 42:return t.finish(33);case 43:case"end":return t.stop()}}),t,null,[[9,29,33,43],[34,,38,42]])})));return function(e){return t.apply(this,arguments)}}(),a.readAsText(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return wp.element.createElement("div",{className:"vibep_csv_register_wrapper"},wp.element.createElement("div",{className:"vibep_csv_register"},wp.element.createElement("label",null,n?wp.element.createElement("span",{onClick:function(){return r("")}},n.name,wp.element.createElement("span",null,window.vibebp.translations.deselect_csv)):wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.select_csv),wp.element.createElement("input",{type:"file",onChange:function(e){r(e.target.files[0])},accept:".csv"})))),i.saving?wp.element.createElement("progress",{className:"progress is-primary",style:{height:"10px"},value:u,max:"100"},u,"%"):"",wp.element.createElement("div",{className:"csv_actions"},n&&e.fields&&e.fields.length?wp.element.createElement("a",{className:"button is-primary ".concat(i.saving?"is-loading":""),onClick:p},window.vibebp.translations.upload,wp.element.createElement("span",{className:"vicon vicon-upload"})):"",n?"":e.fields&&e.fields.length?wp.element.createElement("a",{className:"button is-primary",title:"sample",onClick:function(){c(e.fields);var t=R_(e.fields),n=window.vibebp.translations.create_members_csv,r={email:window.vibebp.translations.email,password:window.vibebp.translations.password,tags:window.vibebp.translations.member_tags_comma,member_types:window.vibebp.translations.member_types_comma},a=[{email:"sample@gmail.com",password:"######",tags:"t1&t2",member_types:"slug-1|slug-2"}];t.map((function(e){r["field_".concat(e.id)]=e.name})),t.map((function(e){var t="";e.options?(e.options.map((function(n,r){t=r!==e.options.length-1?t+n.name+"/":t+n.name})),a[0]["field_".concat(e.id)]=t):a[0]["field_".concat(e.id)]=t})),d(r,a,n)}},window.vibebp.translations.download," ",wp.element.createElement("span",{className:"vicon vicon-download"})):wp.element.createElement("div",{className:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))))};function iE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iE(Object(n),!0).forEach((function(t){lE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uE=wp.element,mE=uE.useState,pE=uE.useEffect,dE=wp.data,fE=dE.select,bE=dE.dispatch,vE=function(e){var t=cE(mE([]),2),n=t[0],r=t[1],a=cE(mE(!1),2),i=a[0],o=a[1];return pE((function(){if(e.user_id){o(!0);var t={user_id:e.user_id},n="?args=".concat(encodeURIComponent(JSON.stringify(oE({},t))));fetch("".concat(window.vibebp.api.url,"/members/stats").concat(n),{method:"post",body:JSON.stringify(oE(oE({},t),{},{token:fE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){o(!1),e.status?r(e.data):e.hasOwnProperty("message")&&bE("vibebp").addNotification({text:e.message})}))}}),[e.user_id]),wp.element.createElement("div",{className:"stats_wrapper"},n.length?wp.element.createElement("table",{className:"all_stats_table"},n.map((function(e){var t=e.key,n=e.type,r=e.label,a=e.value;return wp.element.createElement("tr",{key:t},wp.element.createElement("td",null,r),"timestamp"!==n?wp.element.createElement("td",null,a):wp.element.createElement("td",null,wp.element.createElement(Ja,{timestamp:a})))}))):"",i?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"")};function wE(e){return function(e){if(Array.isArray(e))return OE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||EE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yE(Object(n),!0).forEach((function(t){hE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||EE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EE(e,t){if(e){if("string"==typeof e)return OE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OE(e,t):void 0}}function OE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jE=wp.element,SE=jE.useState,NE=jE.useEffect,kE=jE.Fragment,PE=wp.data,xE=PE.select,AE=PE.dispatch,IE={menu:!1,edit:!1,view:!1,activity:!1,create_member:!1,stats:!1},CE=!1,TE=function(e){var t,n,r=Object.keys(xE("vibebp").getUser().caps).indexOf("manage_options")>-1||(window.vibebp.settings.create_member&&Object.keys(xE("vibebp").getUser().caps).indexOf(window.vibebp.settings.create_member))>-1,a=_E(SE({menu:!1,members:!1}),2),i=a[0],o=a[1],l=_E(SE(!1),2),c=l[0],s=l[1],m=_E(SE(!1),2),p=m[0],d=m[1],f=_E(SE([]),2),b=f[0],v=f[1],w=_E(SE({taxonomies:[],paged:1,s:"",orderby:"",order:"ASC"}),2),y=w[0],g=w[1],h=_E(SE([]),2),_=h[0],E=h[1],O=_E(SE(!1),2),j=O[0],S=O[1],N=_E(SE(null),2),k=N[0],P=N[1],x=_E(SE(IE),2),A=x[0],I=x[1],C=_E(SE("list"),2),T=C[0],D=C[1],M=_E(SE([]),2),L=M[0],J=M[1],U=_E(SE(!1),2),R=U[0],F=U[1],H=_E(SE(!1),2),q=H[0],z=H[1],$=_E(SE(""),2),B=$[0],W=$[1],V=_E(SE({tax:"",terms:[]}),2),G=V[0],Z=V[1],K=_E(SE({color:"#28B888",name:"",tax:""}),2),X=K[0],Y=K[1],Q=_E(SE(!1),2),ee=Q[0],te=Q[1],ne=_E(SE(!1),2),re=(ne[0],ne[1],_E(SE(""),2)),ae=(re[0],re[1],_E(SE(!1),2)),ie=ae[0],oe=ae[1],le=_E(SE(""),2),ce=le[0],se=le[1],ue=_E(SE(!1),2),me=ue[0],pe=ue[1],de=_E(SE(""),2),fe=de[0],be=de[1];NE((function(){if(A.view)return document.querySelector(".vibebp_myprofile")&&document.querySelector(".vibebp_myprofile").classList.add("popup_active"),function(){document.querySelector(".vibebp_myprofile.popup_active")&&document.querySelector(".vibebp_myprofile").classList.remove("popup_active")}}),[A.view]),NE((function(){CE=!0,fetch("".concat(window.vibebp.api.url,"/members/taxonomies?force"),{method:"post",body:JSON.stringify({token:xE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){CE=!1,e.status&&e.data&&v(e.data),e.hasOwnProperty("message")&&AE("vibebp").addNotification({text:e.message})})).catch((function(e){CE=!1})),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),NE((function(){A.hasOwnProperty("edit")&&A.edit&&(oe(!0),fetch("".concat(window.vibebp.api.url,"/members/getUserSlug?force"),{method:"post",body:JSON.stringify({user_id:A.edit,token:xE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){oe(!1),e.status?(se(e.slug),be(e.link)):AE("vibebp").setNotification({text:e.message})})))}),[A]);var ve=function(e){E(e)};u((function(){we()}),500,[y]),NE((function(){return document.addEventListener("vibebp_component_reload",we),function(){document.removeEventListener("vibebp_component_reload",we)}}));var we=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];k&&k.abort();var t=new AbortController,n=k?{signal:t.signal}:{};P(t);var r=gE({},y),a=r.s.length?"?force":"?args=".concat(encodeURIComponent(JSON.stringify(gE(gE({},r),{},{s:""}))));e&&(a="?force");var l=1==r.paged?[]:wE(_);ve(l),o(gE(gE({},i),{},{members:!0})),fetch("".concat(window.vibebp.api.url,"/members/all").concat(a," "),gE(gE({method:"post"},n),{},{body:JSON.stringify(gE(gE({},y),{},{token:xE("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){if(o(gE(gE({},i),{},{members:!1})),e.status){l=1===y.paged?[]:wE(_);var t=[].concat(wE(l),wE(e.members));S(t.length<parseInt(e.total)),ve(t)}})).catch((function(e){o(gE(gE({},i),{},{members:!1})),P(null),console.error("Uh oh, an error!",e)}))},ye=function(){s(!0),fetch("".concat(window.vibebp.api.url,"/members/create-tax?post"),{method:"post",body:JSON.stringify({tax:gE({},X),token:xE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(e.status){var t=wE(b),n=t.findIndex((function(t){return t.type==e.data.taxonomy}));n>-1&&(t[n].value[e.data.slug]=e.data),v(t)}e.hasOwnProperty("message")&&AE("vibebp").addNotification({text:e.message})})).catch((function(e){s(!1),console.error("Uh oh, an error!",e)}))},ge=function(e,t){var n=gE(gE({},y),{},{paged:1});return n.taxonomies.length?-1==n.taxonomies.findIndex((function(t){return t.tax==e}))?(n.taxonomies.push({tax:e,term_ids:[t]}),void g(n)):(-1==n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.indexOf(t)?n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.push(t):(n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.splice(n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.indexOf(t),1),n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.length||n.taxonomies.splice(n.taxonomies.findIndex((function(t){return t.tax==e})),1)),void g(n)):(n.taxonomies=[],n.taxonomies.push({tax:e,term_ids:[t]}),void g(n))},he=function(){d(!0);var e={member_ids:L.map((function(e){return e.id})),tax:G.tax,term_ids:G.terms,action:B},t="?args=".concat(encodeURIComponent(JSON.stringify(gE({},e))));fetch("".concat(window.vibebp.api.url,"/members/assignTerms").concat(t),{method:"post",body:JSON.stringify(gE(gE({},e),{},{token:xE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){d(!1),Z({tax:"",terms:[]}),e.status&&we(!0),e.hasOwnProperty("message")&&AE("vibebp").addNotification({text:e.message})}))};NE((function(){R&&AE("vibebp").addNotification({text:window.vibebp.translations.select_users})}),[R]);return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.members_detail.label),r?wp.element.createElement("a",{class:"button is-primary new_mail",onClick:function(){I(gE(gE({},IE),{},{create_member:!0}))}},window.vibebp.translations.create_member):"",b.length?b.map((function(e,t){return wp.element.createElement("div",{className:"member_types_wrapper "+e.type},wp.element.createElement("strong",null,e.label),e.value?Object.keys(e.value).map((function(n){var r,a,i,o,l,c=(null===(r=y.taxonomies)||void 0===r?void 0:r.findIndex((function(t){return t.tax==e.type})))>-1&&(null===(a=y.taxonomies[y.taxonomies.findIndex((function(t){return t.tax==e.type}))])||void 0===a||null===(i=a.term_ids)||void 0===i?void 0:i.indexOf(b[t].value[n].term_id))>-1;return wp.element.createElement("a",{className:"menu-child ".concat(c?"current-menu-item":""),key:b[t].value[n].term_id,onClick:function(){ge(e.type,b[t].value[n].term_id)}},e.value[n].color?wp.element.createElement("span",{style:{background:e.value[n].color}},wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:(null===(o=b[t].value[n].name)||void 0===o?void 0:o.length)?b[t].value[n].name:b[t].value[n].labels?b[t].value[n].labels.name:""}})):b[t].value[n].labels?wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:b[t].value[n].labels.name}}):(null===(l=b[t].value[n].name)||void 0===l?void 0:l.length)?wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:b[t].value[n].name}}):"")})):"",r?wp.element.createElement("a",{className:"link",onClick:function(){ee==e.type?te(!1):(te(e.type),Y(gE(gE({},X),{},{tax:e.type})))}},ee==e.type?window.vibebp.translations.cancel:window.vibebp.translations.add_new):"",ee==e.type?wp.element.createElement(kE,null,CE?wp.element.createElement("div",{className:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):ee?wp.element.createElement("div",{className:"create_member_tax"},wp.element.createElement("input",{type:"text",value:X.name,placeholder:window.vibebp.translations.tax_name,onChange:function(e){return Y(gE(gE({},X),{},{name:e.target.value}))}}),wp.element.createElement("input",{type:"color",value:X.color,onChange:function(e){return Y(gE(gE({},X),{},{color:e.target.value}))}}),X.name?wp.element.createElement("a",{className:"button is-primary vicon vicon-plus ".concat(c?"is-loading":""),onClick:ye}):""):""):"")})):"")),wp.element.createElement("div",{className:"vibebp_main members_crm"},wp.element.createElement("div",{className:"vibebp_all_members"},wp.element.createElement("div",{className:"vibebp_all_members_header"},wp.element.createElement("div",{className:"vibebp_search_field"},wp.element.createElement("input",{type:"text",value:y.s,onChange:function(e){g(gE(gE({},y),{},{s:e.target.value,paged:1}))},placeholder:window.vibebp.translations.search}),wp.element.createElement("span",{className:"vicon vicon-search"})),wp.element.createElement("div",{className:"member_sorter"},wp.element.createElement("div",{className:"member_display_type"},wp.element.createElement("span",{className:"vicon vicon-menu ".concat("list"==T?"active":""),onClick:function(){return D("list")}}),wp.element.createElement("span",{className:"vicon vicon-layout-grid2 ".concat("grid"==T?"active":""),onClick:function(){return D("grid")}})),wp.element.createElement("div",{className:"vibebp_sort_by"},wp.element.createElement("select",{value:y.orderby,onChange:function(e){g(gE(gE({},y),{},{orderby:e.target.value,paged:1}))}},window.vibebp.components.members_detail.sorters.map((function(e){return wp.element.createElement("option",{value:e.value},e.label)})))),wp.element.createElement("div",{className:"vibebp_sort_by"},wp.element.createElement("span",null,wp.element.createElement("span",{className:"ASC"==y.order?"vicon vicon-angle-up active":"vicon vicon-angle-up",onClick:function(){g(gE(gE({},y),{},{order:"ASC",paged:1}))}}),wp.element.createElement("span",{className:"DESC"==y.order?"vicon vicon-angle-down active":"vicon vicon-angle-down",onClick:function(){g(gE(gE({},y),{},{order:"DESC",paged:1}))}}))))),wp.element.createElement("div",{className:"bulk_action_wrapper"},wp.element.createElement("div",{className:"bulk_handler"},wp.element.createElement("div",{onClick:function(){return F(!R)},className:"checkbox"},wp.element.createElement("input",{type:"checkbox",checked:R}),wp.element.createElement("label",null,window.vibebp.translations.bulk_actions)),R?wp.element.createElement("div",{className:"selected_users"},L&&L.length?q?wp.element.createElement(kE,null,L.map((function(e,t){return wp.element.createElement("span",{className:"selected_user",onClick:function(){var e=wE(L);e.splice(t,1),J(e)}},wp.element.createElement("span",null,e.name))})),wp.element.createElement("span",{className:"link",onClick:function(){return J([])}},window.vibebp.translations.clearall)):wp.element.createElement("span",{className:"expand_option",onClick:function(){return z(!0)}},"".concat(L.length," "),window.vibebp.translations.user_selected):""):""),R&&L&&L.length?wp.element.createElement("div",{className:"bulk_action_options"},wp.element.createElement("select",{value:B,onChange:function(e){Z({tax:"",terms:[]}),W(e.target.value)}},wp.element.createElement("option",{value:""},window.vibebp.translations.select_action),wp.element.createElement("option",{value:"add_tax"},window.vibebp.translations.add_tax),wp.element.createElement("option",{value:"remove_tax"},window.vibebp.translations.remove_tax),window.vibebp.components.members_detail.settings.bulk_actions.map((function(e){return wp.element.createElement("option",{value:e.key},e.label)}))),"add_tax"==B||"remove_tax"==B?wp.element.createElement("div",null,wp.element.createElement("select",{value:G.tax,onChange:function(e){return Z({tax:e.target.value,terms:[]})}},wp.element.createElement("option",null,window.vibebp.translations.select_tax),b.map((function(e){return wp.element.createElement("option",{value:e.type},e.label)}))),G.tax?wp.element.createElement("div",{className:"member_tags_wrapper"},wp.element.createElement("div",{className:"member_tags"},Object.values(b[b.findIndex((function(e){return e.type==G.tax}))].value).map((function(e){var t,n,r=G.terms.indexOf(e.term_id)>-1;return wp.element.createElement("span",{className:"member_tag ".concat(r?"active":""),key:e.term_id,style:e.color?{background:e.color}:{},onClick:function(){var t=gE({},G);r?t.terms.splice(G.terms.indexOf(e.term_id),1):t.terms.push(e.term_id),Z(t)}},(null===(t=e.labels)||void 0===t?void 0:t.length)?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.labels.name}}):(null===(n=e.name)||void 0===n?void 0:n.length)?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.name}}):"N.A "+e.term_id)})))):"",(null===(t=G.terms)||void 0===t?void 0:t.length)?wp.element.createElement("a",{className:"button is-primary ".concat(p?"is-loading":""),onClick:he},window.vibebp.translations.apply):""):"send_message"===B?wp.element.createElement("div",null,wp.element.createElement(Gc,{messaging_users:L.map((function(e){return e.id})),cancel:function(){return W("")},update:function(){}})):window.vibebp.components.members_detail.settings.bulk_actions.findIndex((function(e){return e.key==B}))>-1&&window.vibebp.components.members_detail.settings.bulk_actions[window.vibebp.components.members_detail.settings.bulk_actions.findIndex((function(e){return e.key==B}))].hasOwnProperty("options")?wp.element.createElement("div",null,null===(n=window.vibebp.components.members_detail.settings.bulk_actions[window.vibebp.components.members_detail.settings.bulk_actions.findIndex((function(e){return e.key==B}))].options)||void 0===n?void 0:n.map((function(e){return wp.element.createElement("span",{onClick:function(){var t,n=gE({},G);(null==G||null===(t=G.terms)||void 0===t?void 0:t.length)&&G.terms.findIndex((function(t){return t.key==e.key}))>-1?(n.terms.splice(G.terms.findIndex((function(t){return t.key==e.key})),1),n.tax="remove"):(n.tax="add",n.terms.push(e)),Z(n)}},wp.element.createElement("span",{className:G.terms.findIndex((function(t){return t.key==e.key}))>-1?"vicon vicon-check":""}),wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.label}}))})),bulkTags.length?wp.element.createElement("a",{className:"button is-primary ".concat(p?"is-loading":""),onClick:he},window.vibebp.translations.apply):""):""):""),wp.element.createElement("div",{className:"members_wrapper ".concat("grid"==T?"member_grid":"members_list")},_&&_.length?_.map((function(e,t){var n,r,a=L.findIndex((function(t){return t.id===e.ID}));return wp.element.createElement("div",{className:"member_detail ".concat(R&&a>-1?"selected":""," ").concat(A.view==e.ID||A.stats==e.ID||A.activity==e.ID||A.edit==e.ID?"active":""),key:e.ID},wp.element.createElement("div",{className:"member_info",onClick:function(){if(R){var t=wE(L);-1===a?t.push({name:e.display_name,id:e.ID}):t.splice(a,1),J(t)}}},wp.element.createElement("span",{className:"member_info_wrapper"},wp.element.createElement("img",{className:"avatar",src:e.image}),wp.element.createElement("span",null,e.display_name))),b.length?b.map((function(n){return wp.element.createElement("div",{className:n.type+"_wrapper"},e.tax[n.type].length?e.tax[n.type].map((function(e){var r,a,i;return wp.element.createElement(DE,{remove:function(){return function(e,t,n){var r,a=wE(_),i=wE(_),o=null===(r=a[e].tax[t])||void 0===r?void 0:r.findIndex((function(e){return e.term_id===n}));o>-1&&(a[e].tax[t].splice(o,1),E(a));var l={member_ids:[a[e].ID],term_ids:[n],tax:t,action:"remove_tax"},c="?args=".concat(encodeURIComponent(JSON.stringify(gE({},l))));fetch("".concat(window.vibebp.api.url,"/members/assignTerms").concat(c),{method:"post",body:JSON.stringify(gE(gE({},l),{},{token:xE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){e.status||E(i),e.hasOwnProperty("message")&&AE("vibebp").addNotification({text:e.message})})).catch((function(e){E(i),console.error("Uh oh, an error!",e)}))}(t,n.type,e.term_id)},color:e.color,name:"bp_member_type"==e.taxonomy&&(null===(r=b[0])||void 0===r||null===(a=r.value[e.slug])||void 0===a||null===(i=a.labels)||void 0===i?void 0:i.name)?b[0].value[e.slug].labels.name:e.name,set:function(){ge(n.type,e.term_id)}})})):"")})):"",wp.element.createElement("div",{className:"member_tags_wrapper"},(null===(n=b[1])||void 0===n||null===(r=n.value)||void 0===r?void 0:r.length)?Object.keys(b[1].value).map((function(e){var t;null===(t=b[1].value[e])||void 0===t||t.color})):""),wp.element.createElement("div",{className:"member_extra"},wp.element.createElement("span",{className:"vicon vicon-info-alt ".concat(A.view==e.ID?"active":""),onClick:function(){I(gE(gE({},IE),{},{view:e.ID}))}}),wp.element.createElement("span",{className:"vicon vicon-pencil ".concat(A.edit==e.ID?"active":""),onClick:function(){I(gE(gE({},IE),{},{edit:e.ID}))}}),wp.element.createElement("span",{className:"vicon vicon-pulse ".concat(A.activity==e.ID?"active":""),onClick:function(){I(gE(gE({},IE),{},{activity:e.ID}))}}),wp.element.createElement("span",{className:"vicon vicon-bar-chart ".concat(A.stats==e.ID?"active":""),onClick:function(){I(gE(gE({},IE),{},{stats:e.ID}))}})))})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_members)),i.members?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",j?wp.element.createElement("a",{className:"link",onClick:function(){g(gE(gE({},y),{},{paged:y.paged+1}))}},window.vibebp.translations.more):""),Object.values(A).some((function(e){return e}))?wp.element.createElement("div",{className:A.view?"vibebp_single_member_view_wrapper popout":"vibebp_single_member_view_wrapper"},A.view?wp.element.createElement("span",{onClick:function(){return I(IE)}}):"",wp.element.createElement("div",{className:"vibebp_single_member_view"},wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){return I(IE)},title:window.vibebp.translations.cancel}),A.edit?wp.element.createElement("div",null,wp.element.createElement(Sl,{user_id:A.edit}),wp.element.createElement("div",{className:"additional_controls"},wp.element.createElement("a",{href:fe,target:"_blank"},wp.element.createElement("span",{className:"vicon vicon-link"})),wp.element.createElement("span",{onClick:function(e){return pe(!me)},className:me?"vicon vicon-close":"vicon vicon-settings"}),wp.element.createElement("div",{className:"change_slug"},me?wp.element.createElement("div",{className:"slugchange_panel_wrapper"},ce.length?wp.element.createElement("input",{type:"text",value:ce,onChange:function(e){return se(e.target.value)}}):"",wp.element.createElement("a",{className:"button",onClick:function(){oe(!0),fetch("".concat(window.vibebp.api.url,"/members/saveUserSlug?force"),{method:"post",body:JSON.stringify({user_id:A.edit,userSlug:ce,token:xE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){oe(!1),e.status&&(se(e.slug),be(e.link)),AE("vibebp").setNotification({text:e.message})}))}},wp.element.createElement("span",{className:ie?"vicon vicon-reload":"vicon vicon-save"}))):"")),wp.element.createElement(Yo,{user_id:A.edit})):A.view?wp.element.createElement(Ro,{user_id:A.view}):A.activity?wp.element.createElement(L_,{user_id:A.activity}):A.create_member?wp.element.createElement(rE,{close:function(){I(IE)},update:function(){g(gE(gE({},y),{},{orderby:"user_registered",order:"DESC"}))}}):A.stats?wp.element.createElement(vE,{user_id:A.stats}):"")):""))},DE=function(e){var t=e.remove,n=e.color,r=e.name,a=e.set,i=_E(SE(!1),2),o=i[0],l=i[1];return wp.element.createElement("span",{onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},className:"tax_item",style:n?{background:n,color:"#fff"}:{}},wp.element.createElement("span",{onClick:a},r),wp.element.createElement("span",{style:{display:o?"block":"none"},className:"vicon vicon-close",onClick:t}))};function ME(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var JE=wp.element,UE=(JE.createElement,JE.useState),RE=JE.useEffect,FE=(JE.Fragment,JE.render,wp.data),HE=(FE.dispatch,FE.select),qE=function(e){var t=ME(UE(),2),n=t[0],r=t[1],a=ME(UE({}),2),i=a[0],o=a[1],l=ME(UE({}),2),c=l[0],s=l[1],u=ME(UE({}),2),m=u[0],p=u[1];return RE((function(){if(e.page){var t=e.page.split("__");fetch("".concat(window.vibebp.api.url,"/getPost/?force"),{method:"post",body:JSON.stringify({post_type:t[1],id:t[2],token:HE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(e.content),o(e.scripts),p(e.styles),s(e.objects)}))}}),[e.page]),RE((function(){c&&Object.keys(c).map((function(e){window[e]=c[e]}))}),[c]),RE((function(){i&&Object.keys(i).map((function(e){var t=document.createElement("script");t.src=i[e],t.id=e,document.body.appendChild(t),t.onload=function(){setTimeout((function(){document.dispatchEvent(new CustomEvent(e+"_loaded"))}),300)}}))}),[i]),RE((function(){m&&Object.keys(m).map((function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=m[e],t.type="text/css",t.id=e,document.head.appendChild(t)}))}),[m]),wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:n}})};function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zE(Object(n),!0).forEach((function(t){BE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return VE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var GE=wp.element,ZE=(GE.createElement,GE.useState),KE=GE.useEffect,XE=GE.Fragment,YE=(GE.render,GE.useRef,wp.data),QE=(YE.dispatch,YE.select,function(e){var t=WE(ZE({}),2),n=t[0],r=t[1],a=WE(ZE(),2),i=a[0],o=a[1],l=WE(ZE({}),2),c=l[0],s=l[1],u=WE(ZE(!1),2),m=(u[0],u[1],WE(ZE(!1),2)),d=m[0],f=m[1],b=WE(ZE(!1),2),v=b[0],w=b[1],y=WE(ZE("left_point"),2),g=y[0],h=y[1];KE((function(){s(e.tour),localforage.getItem("tour_"+c.id).then((function(e){e&&s($E($E({},c),{},{currentStep:e}))}))}),[e.tour]),KE((function(){v&&clearInterval(v);var e=setInterval((function(){if(!(d||!i||c.currentStep<0||c.currentStep>=c.steps.length)&&document.querySelector(c.steps[c.currentStep].selector)){document.querySelector(c.steps[c.currentStep].selector).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});var e=document.querySelector(c.steps[c.currentStep].selector).getBoundingClientRect(),t=document.querySelector(".tour_step").getBoundingClientRect();t.height||(t.height=200);var n={},a=0;e.top>t.height&&e.left>t.width/2?(n.top=e.top-t.height,n.left=e.left-t.width/2,h("bottom_point")):e.top>t.height/2&&(window.innerWidth-e.right>t.width||e.left>t.width)?(n.top=e.top-t.height/2+e.height/2,window.innerWidth-e.right>t.width?(h("left_point"),n.left=e.right):e.left>t.width&&(h("right_point"),n.left=e.left-t.width)):window.innerHeight-e.bottom>t.height&&window.innerWidth-e.right>t.width/2&&e.left>t.width/2?(n.top=e.bottom,n.left=e.left-t.width/2,h("top_point")):window.innerHeight-e.bottom>t.height/2&&(window.innerWidth-e.right>t.width||e.left>t.width)?(n.top=e.bottom-t.height/2+e.height/2,window.innerWidth-e.right>t.width?(h("left_point"),n.left=e.right):e.left>t.width&&(h("right_point"),n.left=e.left-t.width)):window.innerWidth-e.right>320?(n.left=e.right+20,n.top=e.top,h("left_point")):e.left>320?(n.left=e.left-20,n.top=e.top,h("no_point")):e.top>t.height?(n.left=0,n.top=e.top-t.height,h("no_point")):e.bottom>t.height?(n.left=0,n.top=e.bottom,h("no_point")):a++,2==a&&(n.top=(window.innerHeight-t.height)/2,n.left=(window.innerWidth-t.width)/2,h("bottom_point")),document.querySelector(c.steps[c.currentStep].selector).addEventListener(c.steps[c.currentStep].action,O),console.log("#1"),r(n)}}),800);return w(e),function(){_()}}),[c.currentStep]),KE((function(){c.currentStep>-1&&c.currentStep<c.steps.length&&c.steps[c.currentStep].hasOwnProperty("action")&&c.steps[c.currentStep].action&&("view"==c.steps[c.currentStep].action?c.steps[c.currentStep].action=!1:document.querySelector(c.steps[c.currentStep].selector)&&document.querySelector(c.steps[c.currentStep].selector).addEventListener(c.steps[c.currentStep].action,O))}),[c.currentStep]);var _=function(){v&&(clearInterval(v),w(!1))},E=function(){clearInterval(v),w(!1),e.stop(),localforage.removeItem("tour_"+c.id)},O=function(){var t=c.currentStep+1,n=t+1,r=$E({},c);t>=c.steps.length?(r=$E($E({},r),{},{currentStep:t,progress:100}),t==c.steps.length-1&&(r=$E($E({},r),{},{currentStep:t,progress:100})),e.update(r)):(r.currentStep=t,r.progress=100*n/c.steps.length),c.currentStep,s(r)};return wp.element.createElement("div",{className:"tourstep_wrapper"},c&&Object.keys(c).length&&c.hasOwnProperty("steps")?wp.element.createElement(XE,null,-1===c.currentStep?wp.element.createElement("div",{className:"tour_steps_wrapper"},wp.element.createElement("span",{className:"tour_steps_background"}),wp.element.createElement("div",{className:"tour_step",ref:function(e){return o(e)}},wp.element.createElement("span",{className:"tour_subtitle"},window.vibebp.translations.step," ",c.currentStep+1," / ",c.steps.length," ",wp.element.createElement(p,{progress:c.progress,size:"xs"})),wp.element.createElement("h3",null,c.title," "),wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:c.description}}),wp.element.createElement("div",{className:"tour_step_actions"},wp.element.createElement("a",{className:"button is-primary",onClick:O},window.vibebp.translations.start_tour),wp.element.createElement("a",{className:"link",onClick:E},window.vibebp.translations.cancel)))):c.currentStep>=0&&c.currentStep<=c.steps.length-1?wp.element.createElement("div",{className:"tour_step step_"+c.currentStep+" "+g,ref:function(e){return o(e)},style:n},wp.element.createElement("div",{className:"tourstep"},wp.element.createElement("span",{className:"tour_subtitle"},window.vibebp.translations.step," ",c.currentStep+1," / ",c.steps.length," ",wp.element.createElement(p,{progress:c.progress,size:"xs"})),wp.element.createElement("h3",null,c.steps[c.currentStep].title),wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:c.steps[c.currentStep].description}}),wp.element.createElement("div",{className:"tour_step_actions"},wp.element.createElement("span",null,wp.element.createElement("a",{className:"button small is-danger",onClick:E},wp.element.createElement("span",{className:"vicon vicon-control-stop"})),d?wp.element.createElement("a",{className:"vicon vicon-control-play",onClick:function(){f(!1)}}):wp.element.createElement("a",{className:"vicon vicon-control-pause",onClick:function(){f(!0),localforage.setItem("tour_"+c.id,c.currentStep)}})),wp.element.createElement("span",null,c.currentStep>0?wp.element.createElement("a",{className:"vicon vicon-arrow-left",onClick:function(){var t=c.currentStep-1,n=t-1,r=$E({},c);r=$E($E({},r),{},{currentStep:t,progress:100*n/c.steps.length}),e.update(r),s(r)}}):"",!c.steps[c.currentStep].action&&c.currentStep<=c.steps.length-1?wp.element.createElement("a",{className:"button small is-success",onClick:O},wp.element.createElement("span",{className:"vicon vicon-arrow-right"})):"")))):wp.element.createElement("div",{className:"tour_steps_wrapper"},wp.element.createElement("span",{className:"tour_steps_background"}),wp.element.createElement("div",{className:"tour_step"},wp.element.createElement("span",{className:"tour_subtitle"},window.vibebp.translations.step," ",c.currentStep," / ",c.steps.length," ",wp.element.createElement(p,{progress:c.progress,size:"xs"})),wp.element.createElement("h3",{dangerouslySetInnerHTML:{__html:window.vibebp.translations.tour_complete}}),wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:window.vibebp.translations.thank_you}}),wp.element.createElement("div",{className:"tour_step_actions"},wp.element.createElement("a",{className:"button is-primary",onClick:E},window.vibebp.translations.end_tour))))):"")});function eO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(n),!0).forEach((function(t){nO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return aO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var iO=wp.element,oO=(iO.createElement,iO.useState),lO=iO.useEffect,cO=(iO.Fragment,iO.render,wp.data),sO=(cO.dispatch,cO.select,function(e){var t=rO(oO(e.tour),2),n=t[0],r=t[1],a=rO(oO(!1),2),i=a[0],o=a[1];lO((function(){r(tO(tO({},e.tour),{},{progress:0,currentStep:-1}))}),[e.tour]);lO((function(){i?document.querySelector("body").classList.add("tour_active"):document.querySelector("body").classList.remove("tour_active")}),[i]);return wp.element.createElement("div",{className:"tour"},wp.element.createElement("div",{className:"tour_snap",onClick:function(t){t.preventDefault(),o(!0),e.tourActivated(!0)}},wp.element.createElement("h3",{className:"tour_title",dangerouslySetInnerHTML:{__html:n.title}}),wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:n.description}})),wp.element.createElement(p,{progress:n.progress,size:"xs"}),i?ReactDOM.createPortal(wp.element.createElement(QE,{tour:n,update:function(t){return function(t){e.update(tO(tO({},n),t))}(t)},stop:function(){e.tourActivated(-2),o(!1)}}),document.querySelector("#tour_wrapper")):"")});function uO(e){return function(e){if(Array.isArray(e))return dO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||pO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||pO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pO(e,t){if(e){if("string"==typeof e)return dO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dO(e,t):void 0}}function dO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fO=wp.element,bO=(fO.createElement,fO.useState),vO=fO.useEffect,wO=fO.Fragment,yO=(fO.render,wp.data),gO=yO.dispatch,hO=yO.select,_O=function(e){var t=mO(bO(!1),2),n=t[0],r=t[1],a=mO(bO(-2),2),i=a[0],o=a[1],l=mO(bO(0),2),c=l[0],s=l[1],u=mO(bO([]),2),m=u[0],p=u[1],d=mO(bO(""),2),f=d[0],b=d[1];hO("vibebp").getUser();vO((function(){if(!document.querySelector("#tour_wrapper")){var e=document.createElement("div");e.setAttribute("id","tour_wrapper"),document.querySelector("body").appendChild(e)}}),[]),vO((function(){i>-2?(r(!0),fetch("".concat(window.vibebp.api.url,"/getCurrentComponentTours?force"),{method:"post",body:JSON.stringify({token:hO("vibebp").getToken(),component:hO("vibebp").getComponent()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status?(p(e.tours),s(e.count)):p([]),e.hasOwnProperty("message")&&gO("vibebp").addNotification({text:e.message})}))):b("")}),[i]);var v=[];return v=f.length?m.filter((function(e){return e.title.toLowerCase().indexOf(f.toLowerCase())>-1})):uO(m),wp.element.createElement("div",{className:"tours_wrapper"},wp.element.createElement("a",{className:"".concat(i>-2?"active":""," ").concat(n?"vicon-reload":"vicon-help-alt"," vicon"),onClick:function(){o(-2==i?-1:-2)},title:window.vibebp.translations.get_help},m.length&&i>-1?wp.element.createElement("span",null,m[i].title):""),i>-2&&c?wp.element.createElement("div",{className:"tours_list"},wp.element.createElement("div",{className:"tours_list_header"},wp.element.createElement("span",null," ",(window.vibebp.components[hO("vibebp").getComponent()]&&window.vibebp.components[hO("vibebp").getComponent()].label?window.vibebp.components[hO("vibebp").getComponent()].label:"")+" "+window.vibebp.translations.tours),m.length>8?wp.element.createElement("div",{className:"vbp_search_field"},wp.element.createElement("input",{type:"text",value:f,placeholder:window.vibebp.translations.search_text,onChange:function(e){return b(e.target.value)}}),wp.element.createElement("span",{className:"vicon vicon-search"})):""),wp.element.createElement(wO,null,v.map((function(e,t){return wp.element.createElement(sO,{tour:e,update:function(e){var n=uO(m);n[t]=e,p(n)},tourActivated:function(t){o(t>-1?m.findIndex((function(t){return t.id==e.id})):-2)}})}))),c>m.length?wp.element.createElement("span",null,c-m.length," ",window.vibebp.translations.more_tours):""):"")};const{createElement:EO,useState:OO,useEffect:jO,Fragment:SO,render:NO}=wp.element,{dispatch:kO,select:PO}=wp.data,xO=(e,t,n,r,a,i)=>{document.cookie=e+"="+escape(t)+(n?"; expires="+n:"")+(r?"; path="+r:"")+(a?"; domain="+a:window.location.hostname)+(i?"; secure":"")},AO=e=>{var t=" "+document.cookie,n=" "+e+"=",r=null,a=0,i=0;return t.length>0&&-1!=(a=t.indexOf(n))&&(a+=n.length,-1==(i=t.indexOf(";",a))&&(i=t.length),r=unescape(t.substring(a,i))),r};var IO=e=>{const[t,n]=OO(e.time),[r,a]=OO(""),i=()=>{let n=0,r=0,i=Math.floor((t-(new Date).getTime())/1e3);i>60&&(n=Math.floor(i/60),n=n<10?"0"+n.toString():n.toString()),r=Math.floor(i%60).toString().padStart(2,"0"),r=r<10?"0"+r.toString():r.toString(),i<=0?(a(window.vibebp_cart.translations.timeout),e.removeItem()):a(n+":"+r)};return jO(()=>{let e=setInterval(i,1e3);return()=>{clearInterval(e)}},[]),React.createElement("span",{className:"clock"},r)};const{createElement:CO,useState:TO,useEffect:DO,Fragment:MO,useRef:LO}=wp.element,{dispatch:JO,select:UO}=wp.data;var RO=e=>{const[t,n]=TO(!1),[r,a]=TO(!1),[i,o]=TO([]),[l,c]=TO({});DO(()=>{setTimeout(()=>{n(!0)},200);return()=>{n(!1)}},[]),DO(()=>(s(),document.addEventListener("vibebp_cart_updated",s),()=>{document.removeEventListener("vibebp_cart_updated",s)}),[]);const s=()=>{a(!0),fetch(`${window.vibebp_cart.api.get}?client_id=${window.vibebp.settings.client_id}&force`,{method:"get"}).then(e=>e.json()).then(e=>{c(e);let t=[];e.hasOwnProperty("items")&&e.items.length&&e.items.map(e=>{-1==t.findIndex(t=>t.key==e.id)&&t.push({key:e.id,title:e.name,quantity:e.quantity,price:{currency_prefix:e.totals.currency_prefix,currency_suffix:e.totals.currency_suffix,amount:e.totals.line_subtotal}})});let n=AO("appointment_products");n&&(n=JSON.parse(n)),Array.isArray(n)&&n.length&&n.map(e=>{let n,r="";e.price.currency_html.indexOf(e.price.amount)?n=e.price.currency_html.replace(e.price.amount,""):r=e.price.currency_html.replace(e.price.amount,""),t.push({key:e.id,id:e.id,title:e.title+"["+e.appointment_id+"]",expiry:e.expiry,image:e.image,price:{currency_prefix:n,currency_suffix:r,amount:e.price.amount}})});let r=AO("cart_items");r&&(r=JSON.parse(r)),Array.isArray(r)&&r.length&&r.map(e=>{let n,r="";e.price.currency_html.indexOf(e.price.amount)?n=e.price.currency_html.replace(e.price.amount,""):r=e.price.currency_html.replace(e.price.amount,""),t.push({key:e.id,id:e.id,title:e.title,image:e.image,price:{currency_prefix:n,currency_suffix:r,amount:e.price.amount}})}),localforage.setItem("cart_item_count",t.length),document.dispatchEvent(new Event("vibebp_update_cart")),o(t),a(!1)})},u=e=>{fetch(`${window.vibebp_cart.api.remove_item}?client_id=${window.vibebp.settings.client_id}&force`,{method:"pos",body:JSON.stringify({key:e})}).then(e=>e.json()).then(e=>{console.log(e)});let t=AO("appointment_products");if(t&&(t=JSON.parse(t),t.findIndex(t=>t.id==e)>-1)){t.splice(t.findIndex(t=>t.id==e),1);let n="/";n="undefined"==typeof VIBEAPPOINTMENTS?window.vibebp_cart.settings.cookiepath:VIBEAPPOINTMENTS.settings.cookiepath,xO("appointment_products",JSON.stringify(t),new Date((new Date).setMinutes((new Date).getMinutes()+15)).toUTCString(),n,window.location.hostname)}let n=AO("cart_items");n&&(n=JSON.parse(n),n.findIndex(t=>t.id==e)>-1&&(n.splice(n.findIndex(t=>t.id==e),1),xO("cart_items",JSON.stringify(n),new Date((new Date).setMinutes((new Date).getMinutes()+15)).toUTCString(),window.vibebp_cart.settings.cookiepath,window.location.hostname)))},m=(e,t)=>{fetch(`${window.vibebp_cart.api.update_item}?client_id=${window.vibebp.settings.client_id}&force`,{method:"post",body:JSON.stringify({key:e,quantity:t})}).then(e=>e.json()).then(e=>{})};return React.createElement("div",{className:"vibebp_body_wrapper"},React.createElement("span",{className:"vibebp_close",onClick:e.close}),React.createElement("div",{className:t?"vibebp_cart_wrapper active":"vibebp_cart_wrapper"},React.createElement("div",{className:"vibebp_cart"},React.createElement("strong",null,window.vibebp_cart.translations.cart,React.createElement("span",{className:"vicon vicon-close",onClick:e.close})),React.createElement("div",{className:"vibebp_cart_body"},r?"...":i.length?i.map((e,t)=>React.createElement("div",{className:"cart_item_wrapper",key:t},React.createElement("div",{className:"cart_item"},e.image?React.createElement("img",{src:e.image,className:"image"}):React.createElement("svg",{className:"image",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),React.createElement("path",{d:"M4.828 21l-.02.02-.021-.02H2.992A.993.993 0 012 20.007V3.993A1 1 0 012.992 3h18.016c.548 0 .992.445.992.993v16.014a1 1 0 01-.992.993H4.828zM20 15V5H4v14L14 9l6 6zm0 2.828l-6-6L6.828 19H20v-1.172zM8 11a2 2 0 110-4 2 2 0 010 4z"})),React.createElement("span",{className:"cart_item_title"},React.createElement("span",{dangerouslySetInnerHTML:{__html:e.title}}),e.hasOwnProperty("desc")?React.createElement("span",{dangerouslySetInnerHTML:{__html:e.desc}}):"",e.hasOwnProperty("price")?React.createElement("span",null,e.price.amount):"",e.hasOwnProperty("expiry")?React.createElement(IO,{time:new Date(e.expiry).getTime(),removeItem:()=>u(e.key)}):""),e.hasOwnProperty("quantity")?React.createElement("span",{className:"quantity"},e.quantity>0?React.createElement("span",{className:"vicon vicon-minus",onClick:n=>{let r=[...i];r[t].quantity--,r[t].quantity<=0?(r.splice(t,1),u(e.key)):m(e.key,r[t].quantity),o(r)}}):React.createElement("span",null),React.createElement("span",null,e.quantity),React.createElement("span",{className:"vicon vicon-plus",onClick:()=>{let n=[...i];n[t].quantity++,o(n),m(e.key,n[t].quantity)}})):"",React.createElement("span",{className:"vicon vicon-trash",onClick:()=>{let n=[...i];n.splice(t,1),o(n),u(e.key)}})))):React.createElement("span",{className:"vbp_error"},window.vibebp_cart.translations.cart_no_items)),React.createElement("div",{className:"vibebp_cart_footer"},i.length?React.createElement(MO,null,window.vibebp_cart.settings.hasOwnProperty("continue_shopping_link")&&window.vibebp_cart.settings.continue_shopping_link?React.createElement("a",{href:window.vibebp_cart.settings.continue_shopping_link,className:"button is-success"},window.vibebp_cart.translations.continue_shopping):React.createElement("a",{onClick:e.close,className:"button is-success"},window.vibebp_cart.translations.continue_shopping),i.filter(e=>"credits"==e.type).length?React.createElement("a",{className:"button is-primary"},window.vibebp_cart.translations.complete_purchase_via_credits):React.createElement("a",{href:window.vibebp_cart.settings.cart+"?"+Math.round(1e4*Math.random()),className:"button is-primary"},window.vibebp_cart.translations.view_cart)):React.createElement("a",{className:"button",onClick:e.close},React.createElement("span",{className:"vicon vicon-close"})," ",window.vibebp_cart.translations.close)))))};const{createElement:FO,useState:HO,useEffect:qO,Fragment:zO,useRef:$O}=wp.element,{dispatch:BO,select:WO}=wp.data;var VO=e=>{const[t,n]=HO(!1),[r,a]=HO(0),i=()=>{n(!0)},o=()=>{localforage.getItem("cart_item_count").then(e=>{a(e)})};return qO(()=>(o(),document.addEventListener("vibebp_update_cart",o),document.addEventListener("vibebp_show_cart",i),()=>{document.removeEventListener("vibebp_show_cart",i),document.removeEventListener("vibebp_update_cart",o)}),[]),React.createElement("span",{className:"vibebp_cart"},React.createElement("svg",{onClick:()=>n(!0),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{fill:"currentColor",d:"M4 6.414L.757 3.172l1.415-1.415L5.414 5h15.242a1 1 0 01.958 1.287l-2.4 8a1 1 0 01-.958.713H6v2h11v2H5a1 1 0 01-1-1V6.414zM6 7v6h11.512l1.8-6H6zm-.5 16a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm12 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3z"})),r?React.createElement("span",null,r):"",t?ReactDOM.createPortal(React.createElement(RO,{close:e=>{n(!1)}}),document.body):"")};function GO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ZO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var KO=wp.element,XO=(KO.createElement,KO.useState),YO=KO.useEffect,QO=KO.Fragment,ej=(KO.render,KO.useContext),tj=KO.useRef,nj=wp.data,rj=nj.dispatch,aj=nj.select,ij=function(e){var t=GO(XO(window.vibebp.components.default_component),2),n=t[0],r=t[1],a=GO(XO(!1),2),i=(a[0],a[1],GO(XO([]),2)),o=i[0],l=i[1],c=GO(XO(0),2),s=c[0],u=c[1],m=GO(XO(0),2),p=m[0],d=m[1],f=GO(XO(!1),2),b=f[0],v=f[1],w=GO(XO(!1),2),y=w[0],g=w[1],h=GO(XO(!1),2),_=h[0],E=h[1],O=GO(XO([]),2),j=O[0],S=O[1],N=GO(XO(aj("vibebp").getUser()),2),k=N[0],P=N[1],x=GO(XO(aj("vibebp").getToken()),2),A=x[0],I=x[1],C=GO(XO({}),2),T=(C[0],C[1],GO(XO(!1),2)),D=T[0],M=T[1],L=GO(XO(!0),2),J=L[0],U=L[1],R=ej(In),F=GO(XO(null),2),H=(F[0],F[1]),q=tj(null);YO((function(){J||-1!=document.querySelector("body").classList.contains("dark_vibebp")?document.querySelector("body").classList.remove("dark_vibebp"):document.querySelector("body").classList.add("dark_vibebp")}),[J]),YO((function(){window.vibebp.dark_mode&&(U(!1),R.update("dark",!0))}),[]),YO((function(){document.addEventListener("userLoaded",(function(){A||(I(aj("vibebp").getToken()),P(aj("vibebp").getUser()))})),A&&(document.addEventListener("component_loaded",(function(e){r(e.detail.component)})),aj("vibebp").getData("loggedinMenu")?S(aj("vibebp").getData("loggedinMenu")):fetch("".concat(window.vibebp.api.url,"/loggedinmenu"),{method:"post",body:JSON.stringify({token:A})}).then((function(e){return e.json()})).then((function(e){e.status&&(rj("vibebp").setData("loggedinMenu",e.menu),S(e.menu))})))}),[]),YO((function(){setTimeout((function(){l(aj("vibebp").getNotifications()),d(p+1),u(aj("vibebp").getNotifications().length)}),5e3)}),[p]),YO((function(){window.innerWidth<1280?(g(!0),-1==document.querySelector("body").classList.contains("leftsidebar_minimised")&&document.querySelector("body").classList.add("leftsidebar_minimised")):(g(!1),document.querySelector("body").classList.contains("leftsidebar_minimised")>-1&&document.querySelector("body").classList.remove("leftsidebar_minimised")),window.addEventListener("resize",(function(){window.innerWidth<1280?(g(!0),-1==document.querySelector("body").classList.contains("leftsidebar_minimised")&&document.querySelector("body").classList.add("leftsidebar_minimised")):(g(!1),document.querySelector("body").classList.contains("leftsidebar_minimised")>-1&&document.querySelector("body").classList.remove("leftsidebar_minimised"))}))}),[]);YO((function(){if(D){var e=localforage.createInstance({name:"vibebp_last_requests"}),t=[];e.iterate((function(e,n,r){n&&n.length&&navigator.onLine&&t.push(localforage.removeItem(n))})).then((function(){Promise.all(t).then((function(){M(!1),document.dispatchEvent(new Event("vibebp_component_reload"))}))}))}}),[D]),YO((function(){if(q){var e=new Draggabilly(document.querySelector(".profile_grid"),{axis:"y",handle:".drag_to_refresh"});H(e),e.on("dragStart",(function(){})),e.on("dragMove",(function(e,t,n){n.y>=90&&(D||M(0))})),e.on("dragEnd",(function(){e.setPosition(0,0),0==D?(console.log("now true"),M(!0)):M(!1)}))}}),[q]);return A?wp.element.createElement("div",{className:"profile_grid",ref:q},wp.element.createElement("div",{className:"profile_grid_header"},wp.element.createElement("div",{className:"start_block"},window.vibebp.profile_grid_promo&&window.vibebp.profile_grid_promo.length?wp.element.createElement("div",{className:"profile_grid_promo",dangerouslySetInnerHTML:{__html:window.vibebp.profile_grid_promo}}):"","dashboard"==n?wp.element.createElement("div",{className:"dashboard_intro"},wp.element.createElement("h4",null,wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:window.vibebp.translations.hello}}),","),wp.element.createElement("h3",null,k.displayname," 👋")):wp.element.createElement("span",{onClick:function(){g(!y),y?document.querySelector("body").classList.remove("leftsidebar_minimised"):document.querySelector("body").classList.add("leftsidebar_minimised")}},wp.element.createElement("span",{className:y?window.innerWidth<480?"vicon vicon-angle-down":"vicon vicon-angle-right":window.innerWidth<480?"vicon vicon-angle-up":"vicon vicon-angle-left"}),wp.element.createElement("span",null,y?window.vibebp.translations.show_panel:window.vibebp.translations.hide_panel)),wp.element.createElement("div",{className:"drag_to_refresh"},wp.element.createElement("span",{title:window.vibebp.translations.drag_to_refresh},D?wp.element.createElement("div",{class:"lds-ripple"},wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("span",{className:"vicon vicon-reload"})))),wp.element.createElement("div",{className:"end_block"},function(){if(window.vibebp.settings.hasOwnProperty("custom_header_items")&&window.vibebp.settings.custom_header_items.length){var e=[];return window.vibebp.settings.custom_header_items.map((function(t){var n=new CustomEvent("vibebp_custom_header_items_"+t,{detail:{div:t}});document.dispatchEvent(n),e.push(wp.element.createElement("div",{className:t}))})),e}}(),window.vibebp.settings.cart?wp.element.createElement("span",{className:"vibebp-cart"},wp.element.createElement(VO,null)):"",wp.element.createElement(_O,null),wp.element.createElement("div",{className:"notifications",onClick:function(){v(!b),u(0)}},s?wp.element.createElement("span",{className:"count"},s):"",wp.element.createElement("span",{className:"vicon vicon-bell"}),b&&o.length?wp.element.createElement("div",{className:"notification_list"},o.map((function(e){return aj("vibebp").removeNotification(e),wp.element.createElement("div",{className:"notification_item"},wp.element.createElement("span",{className:e.hasOwnProperty("icon")?e.icon:"vicon vicon-alert"}),e.hasOwnProperty("sub")?wp.element.createElement("span",null,e.sub):"",wp.element.createElement("span",null,e.text))}))):""),"slick"==window.vibebp.settings.customizer.theme?wp.element.createElement(QO,null,J?wp.element.createElement("div",{className:"menu_item",onClick:function(){U(!1),R.update("dark",!0),setHovered(!hovered)}},wp.element.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:window.vibebp.icons.dark_mode}})):wp.element.createElement("div",{className:"menu_item",onClick:function(){U(!0),R.update("dark",!1)}},wp.element.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:window.vibebp.icons.light_mode}}))):wp.element.createElement(QO,null,wp.element.createElement("div",{className:"user",onClick:function(){return E(!_)}},wp.element.createElement($n,{type:"user",id:{user_id:aj("vibebp").getUser().id}}),_?wp.element.createElement("div",{className:"vibebp_profile_menu_wrapper"},wp.element.createElement("div",{className:"vibebp_profile_usermenu_content"},j.length?j.map((function(e){return wp.element.createElement("span",{className:e.classes.join(" "),onClick:function(){return function(e){e.classes.indexOf("bp-menu")>-1?(r(e.css_id),rj("vibebp").setComponent(e.css_id)):window.location.href=e.url}(e)},dangerouslySetInnerHTML:{__html:e.title}})})):"",wp.element.createElement("span",{onClick:function(){rj("vibebp").logout()}},wp.element.createElement("span",{className:"vicon vicon-power-off"}),window.vibebp.translations.logout))):""),wp.element.createElement(An,null)))),"dashboard"===n?wp.element.createElement($r,null):"activity"===n?wp.element.createElement(Wi,{type:"personal"}):"wall"===n?wp.element.createElement(Wi,{type:"public"}):"wallet"===n?wp.element.createElement(Po,null):"profile"===n?wp.element.createElement(Gl,null):"notifications"===n?wp.element.createElement(dc,null):"messages"===n?wp.element.createElement(Cs,null):"friends"===n?wp.element.createElement(Au,null):"groups"===n?wp.element.createElement(py,null):"settings"===n?wp.element.createElement(Fg,null):"followers"===n?wp.element.createElement(dm,null):"shop"===n?wp.element.createElement(Lh,null):"memberships"===n?wp.element.createElement(E_,null):"members_detail"===n?wp.element.createElement(TE,null):-1!==n.indexOf("post_type")?wp.element.createElement(qE,{page:n}):wp.element.createElement("div",{id:n+"_component"})):wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))};function oj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oj(Object(n),!0).forEach((function(t){cj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mj=wp.element,pj=(mj.createElement,mj.useState),dj=(mj.useEffect,mj.Fragment,mj.render,wp.data),fj=(dj.dispatch,dj.select,function(e){var t=sj(pj({dark:!1,widgets:[]}),2),n=t[0],r=t[1];return wp.element.createElement(In.Provider,{value:lj(lj({},n),{},{update:function(e,t){var a=lj({},n);"remove"===e?delete a[t]:a[e]=t,r(a)}})},wp.element.createElement("div",{className:n.dark?"vibebp_myprofile dark_theme "+window.vibebp.style:"vibebp_myprofile "+window.vibebp.style},wp.element.createElement(Bn,{user_ids:[e.user.id]},wp.element.createElement(ar,null),wp.element.createElement(ij,null)),wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:"<style>span.vibebp-login{z-index:-1}</style>"}})))});n(0),n(1);function bj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wj=wp.element,yj=(wj.createElement,wj.useState),gj=wj.useEffect,hj=wj.Fragment,_j=wj.render,Ej=wp.data,Oj=(Ej.dispatch,Ej.select),jj=function(e){var t=bj(yj({}),2),n=t[0],r=t[1];return gj((function(){document.addEventListener("userLoaded",(function(){var e=Oj("vibebp").getUser();document.querySelector("body#vibeapp")||document.querySelector("body").classList.contains("page")&&!document.querySelector("body").classList.contains("profile")||document.querySelector("body").classList.contains("my-profile")&&parseInt(e.id)===parseInt(window.vibebp.user_id)?(r(e),document.querySelector("body").classList.add("vibebp_my_profile")):document.querySelector("body").classList.remove("vibebp_my_profile")})),document.getElementById("vibebp_member").classList.add("loaded")}),[]),wp.element.createElement(hj,null,n&&Object.keys(n).length?wp.element.createElement(fj,{user:n}):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:e.def}}))};document.getElementById("vibebp_member")&&!document.getElementById("vibebp_member").classList.contains("loaded")&&_j(wp.element.createElement(jj,{def:document.getElementById("vibebp_member").innerHTML}),document.getElementById("vibebp_member")),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("vibebp_member")&&!document.getElementById("vibebp_member").classList.contains("loaded")&&_j(wp.element.createElement(jj,{def:document.getElementById("vibebp_member").innerHTML}),document.getElementById("vibebp_member"))}),!1)}]);