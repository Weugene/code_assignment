!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,c,o=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t);var i=wp.element,c=(i.createElement,i.useState),o=i.useEffect,l=(i.Fragment,i.render,wp.data),u=(l.dispatch,l.select,function(e,t,n,r,a,i){document.cookie=e+"="+escape(t)+(n?"; expires="+n:"")+(r?"; path="+r:"")+(a?"; domain="+a:window.location.hostname)+(i?"; secure":"")}),s=function(e){var t=" "+document.cookie,n=" "+e+"=",r=null,a=0,i=0;return t.length>0&&-1!=(a=t.indexOf(n))&&(a+=n.length,-1==(i=t.indexOf(";",a))&&(i=t.length),r=unescape(t.substring(a,i))),r},p=function(e){var t=r(c(e.time),2),n=t[0],a=(t[1],r(c(""),2)),i=a[0],l=a[1],u=function(){var t=0,r=0,a=Math.floor((n-(new Date).getTime())/1e3);a>60&&(t=(t=Math.floor(a/60))<10?"0"+t.toString():t.toString()),r=(r=Math.floor(a%60).toString().padStart(2,"0"))<10?"0"+r.toString():r.toString(),a<=0?(l(window.vibebp_cart.translations.timeout),e.removeItem()):l(t+":"+r)};return o((function(){var e=setInterval(u,1e3);return function(){clearInterval(e)}}),[]),wp.element.createElement("span",{className:"clock"},i)};function m(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,c,o=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return o}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=wp.element,y=(v.createElement,v.useState),b=v.useEffect,h=v.Fragment,_=(v.useRef,wp.data),g=(_.dispatch,_.select,function(e){var t=f(y(!1),2),n=t[0],r=t[1],a=f(y(!1),2),i=a[0],c=a[1],o=f(y([]),2),l=o[0],d=o[1],w=f(y({}),2),v=(w[0],w[1]);b((function(){setTimeout((function(){r(!0)}),200);return function(){r(!1)}}),[]),b((function(){return _(),document.addEventListener("vibebp_cart_updated",_),function(){document.removeEventListener("vibebp_cart_updated",_)}}),[]);var _=function(){c(!0),fetch("".concat(window.vibebp_cart.api.get,"?client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"get"}).then((function(e){return e.json()})).then((function(e){v(e);var t=[];e.hasOwnProperty("items")&&e.items.length&&e.items.map((function(e){-1==t.findIndex((function(t){return t.key==e.id}))&&t.push({key:e.id,title:e.name,quantity:e.quantity,price:{currency_prefix:e.totals.currency_prefix,currency_suffix:e.totals.currency_suffix,amount:e.totals.line_subtotal}})}));var n=s("appointment_products");n&&(n=JSON.parse(n)),Array.isArray(n)&&n.length&&n.map((function(e){var n,r="";e.price.currency_html.indexOf(e.price.amount)?n=e.price.currency_html.replace(e.price.amount,""):r=e.price.currency_html.replace(e.price.amount,""),t.push({key:e.id,id:e.id,title:e.title+"["+e.appointment_id+"]",expiry:e.expiry,image:e.image,price:{currency_prefix:n,currency_suffix:r,amount:e.price.amount}})}));var r=s("cart_items");r&&(r=JSON.parse(r)),Array.isArray(r)&&r.length&&r.map((function(e){var n,r="";e.price.currency_html.indexOf(e.price.amount)?n=e.price.currency_html.replace(e.price.amount,""):r=e.price.currency_html.replace(e.price.amount,""),t.push({key:e.id,id:e.id,title:e.title,image:e.image,price:{currency_prefix:n,currency_suffix:r,amount:e.price.amount}})})),localforage.setItem("cart_item_count",t.length),document.dispatchEvent(new Event("vibebp_update_cart")),d(t),c(!1)}))},g=function(e){fetch("".concat(window.vibebp_cart.api.remove_item,"?client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"pos",body:JSON.stringify({key:e})}).then((function(e){return e.json()})).then((function(e){console.log(e)}));var t=s("appointment_products");if(t&&(t=JSON.parse(t)).findIndex((function(t){return t.id==e}))>-1){t.splice(t.findIndex((function(t){return t.id==e})),1);var n="/";n="undefined"==typeof VIBEAPPOINTMENTS?window.vibebp_cart.settings.cookiepath:VIBEAPPOINTMENTS.settings.cookiepath,u("appointment_products",JSON.stringify(t),new Date((new Date).setMinutes((new Date).getMinutes()+15)).toUTCString(),n,window.location.hostname)}var r=s("cart_items");r&&(r=JSON.parse(r)).findIndex((function(t){return t.id==e}))>-1&&(r.splice(r.findIndex((function(t){return t.id==e})),1),u("cart_items",JSON.stringify(r),new Date((new Date).setMinutes((new Date).getMinutes()+15)).toUTCString(),window.vibebp_cart.settings.cookiepath,window.location.hostname))},E=function(e,t){fetch("".concat(window.vibebp_cart.api.update_item,"?client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"post",body:JSON.stringify({key:e,quantity:t})}).then((function(e){return e.json()})).then((function(e){}))};return wp.element.createElement("div",{className:"vibebp_body_wrapper"},wp.element.createElement("span",{className:"vibebp_close",onClick:e.close}),wp.element.createElement("div",{className:n?"vibebp_cart_wrapper active":"vibebp_cart_wrapper"},wp.element.createElement("div",{className:"vibebp_cart"},wp.element.createElement("strong",null,window.vibebp_cart.translations.cart,wp.element.createElement("span",{className:"vicon vicon-close",onClick:e.close})),wp.element.createElement("div",{className:"vibebp_cart_body"},i?"...":l.length?l.map((function(e,t){return wp.element.createElement("div",{className:"cart_item_wrapper",key:t},wp.element.createElement("div",{className:"cart_item"},e.image?wp.element.createElement("img",{src:e.image,className:"image"}):wp.element.createElement("svg",{className:"image",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},wp.element.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),wp.element.createElement("path",{d:"M4.828 21l-.02.02-.021-.02H2.992A.993.993 0 012 20.007V3.993A1 1 0 012.992 3h18.016c.548 0 .992.445.992.993v16.014a1 1 0 01-.992.993H4.828zM20 15V5H4v14L14 9l6 6zm0 2.828l-6-6L6.828 19H20v-1.172zM8 11a2 2 0 110-4 2 2 0 010 4z"})),wp.element.createElement("span",{className:"cart_item_title"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.title}}),e.hasOwnProperty("desc")?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.desc}}):"",e.hasOwnProperty("price")?wp.element.createElement("span",null,e.price.amount):"",e.hasOwnProperty("expiry")?wp.element.createElement(p,{time:new Date(e.expiry).getTime(),removeItem:function(){return g(e.key)}}):""),e.hasOwnProperty("quantity")?wp.element.createElement("span",{className:"quantity"},e.quantity>0?wp.element.createElement("span",{className:"vicon vicon-minus",onClick:function(n){var r=m(l);r[t].quantity--,r[t].quantity<=0?(r.splice(t,1),g(e.key)):E(e.key,r[t].quantity),d(r)}}):wp.element.createElement("span",null),wp.element.createElement("span",null,e.quantity),wp.element.createElement("span",{className:"vicon vicon-plus",onClick:function(){var n=m(l);n[t].quantity++,d(n),E(e.key,n[t].quantity)}})):"",wp.element.createElement("span",{className:"vicon vicon-trash",onClick:function(){var n=m(l);n.splice(t,1),d(n),g(e.key)}})))})):wp.element.createElement("span",{className:"vbp_error"},window.vibebp_cart.translations.cart_no_items)),wp.element.createElement("div",{className:"vibebp_cart_footer"},l.length?wp.element.createElement(h,null,window.vibebp_cart.settings.hasOwnProperty("continue_shopping_link")&&window.vibebp_cart.settings.continue_shopping_link?wp.element.createElement("a",{href:window.vibebp_cart.settings.continue_shopping_link,className:"button is-success"},window.vibebp_cart.translations.continue_shopping):wp.element.createElement("a",{onClick:e.close,className:"button is-success"},window.vibebp_cart.translations.continue_shopping),l.filter((function(e){return"credits"==e.type})).length?wp.element.createElement("a",{className:"button is-primary"},window.vibebp_cart.translations.complete_purchase_via_credits):wp.element.createElement("a",{href:window.vibebp_cart.settings.cart+"?"+Math.round(1e4*Math.random()),className:"button is-primary"},window.vibebp_cart.translations.view_cart)):wp.element.createElement("a",{className:"button",onClick:e.close},wp.element.createElement("span",{className:"vicon vicon-close"})," ",window.vibebp_cart.translations.close)))))});function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,c,o=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=wp.element,N=(O.createElement,O.useState),x=O.useEffect,k=(O.Fragment,O.useRef,wp.data),A=(k.dispatch,k.select,function(e){var t=E(N(!1),2),n=t[0],r=t[1],a=E(N(0),2),i=a[0],c=a[1],o=function(){r(!0)},l=function(){localforage.getItem("cart_item_count").then((function(e){c(e)}))};return x((function(){return l(),document.addEventListener("vibebp_update_cart",l),document.addEventListener("vibebp_show_cart",o),function(){document.removeEventListener("vibebp_show_cart",o),document.removeEventListener("vibebp_update_cart",l)}}),[]),wp.element.createElement("span",{className:"vibebp_cart"},wp.element.createElement("svg",{onClick:function(){return r(!0)},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},wp.element.createElement("path",{fill:"currentColor",d:"M4 6.414L.757 3.172l1.415-1.415L5.414 5h15.242a1 1 0 01.958 1.287l-2.4 8a1 1 0 01-.958.713H6v2h11v2H5a1 1 0 01-1-1V6.414zM6 7v6h11.512l1.8-6H6zm-.5 16a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm12 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3z"})),i?wp.element.createElement("span",null,i):"",n?ReactDOM.createPortal(wp.element.createElement(g,{close:function(e){r(!1)}}),document.body):"")}),I=(n(0),wp.element),M=(I.createElement,I.useState,I.useEffect,I.Fragment,I.render),j=wp.data;j.dispatch,j.select;document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".vibebp-cart")&&M(wp.element.createElement(A,null),document.querySelector(".vibebp-cart"))}))}]);