!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var r=(0,wp.element.createContext)({events:[],update:function(){}});function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=wp.element,u=(c.createElement,c.useState),s=c.useEffect,p=(c.Fragment,c.render,c.useRef),f=wp.data,m=(f.dispatch,f.select),d=function(e){var t=l(u(""),2),n=t[0],r=t[1];return s((function(){var t="",n="";switch(e.type){case"friends":n="user",t=e.id.item_id;break;case"group":n="group",t=e.id.item_id;break;case"activity":n="user",t=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":n="user",t=e.id.user_id;break;default:n=e.type,t=e.id.item_id}localforage.getItem(n+"_"+t).then((function(t){null!==t?r(JSON.parse(t)):fetch("".concat(window.vibebp.api.url,"/avatar"),{method:"post",body:JSON.stringify({type:e.type,ids:e.id,token:m("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&(localforage.setItem(e.key,JSON.stringify(e.value)),r(e.value))}))}))}),[]),"member"==e.type?wp.element.createElement("span",{className:"vibebp_member"},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}),wp.element.createElement("span",null,n.name)):"user_tip"==e.type?wp.element.createElement("span",{className:"vibebp_member tip",title:n.name},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name})):"name"==e.type?wp.element.createElement("span",null,n.name):wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name})},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=p(Date.now());s((function(){var n=setTimeout((function(){Date.now()-r.current>=t&&(e(),r.current=Date.now())}),t-(Date.now()-r.current));return function(){clearTimeout(n)}}),[t].concat(a(n)))};function y(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))if(n){for(var r=0;r<t.length;r++)if(t[r][n]===e[n])return r}else for(var a=0;a<t.length;a++)if(t[a].id===e.id)return a;return-1}function w(e,t){return new Promise((function(n,r){var a="",l="";if("js"==t?(a="text/javascript",l="script"):"css"==t&&(a="text/css",l="style"),a||r("type not defined"),document.getElementById(e))n(!0);else{var i=document.createElement(l);i.setAttribute("id",e),i.setAttribute("type",a),i.setAttribute("src",e),void 0!==i&&(i.addEventListener&&i.addEventListener("load",(function(){!function(e){console.log("loadFunc",e)}(e),n(!0)}),!1),document.getElementsByTagName("head")[0].appendChild(i))}}))}var g=function(e){var t=[];return e.map((function(e){var n={};if(e.id&&(n.id=e.id),e.post_title&&(n.title=e.hasOwnProperty("postfix")?e.post_title+e.postfix:e.post_title),e.hasOwnProperty("meta")&&Array.isArray(e.meta)&&e.meta.length){var r=e.meta.findIndex((function(e){return"recurring"==e.meta_key}));r>-1&&e.meta[r].meta_value?(n.groupId=n.id,"daysOfWeek"==e.meta[r].meta_value.recurring?n.daysOfWeek=e.meta[r].meta_value.daysOfWeek:"everyDay"==e.meta[r].meta_value.recurring&&(n.daysOfWeek=[0,1,2,3,4,5,6]),e.meta.map((function(e){e.meta_key&&e.meta_value&&("start"==e.meta_key?(n.nstart=e.meta_value,n.startTime=new Date(e.meta_value).getHours()+":"+new Date(e.meta_value).getMinutes(),n.startRecur=new Date(e.meta_value)):"end"==e.meta_key?(n.nend=e.meta_value,n.endTime=new Date(e.meta_value).getHours()+":"+new Date(e.meta_value).getMinutes(),n.endRecur=new Date(e.meta_value)):"color"==e.meta_key&&(n.color=e.meta_value))}))):e.meta.map((function(e){e.meta_key&&e.meta_value&&("start"==e.meta_key?n.start=e.meta_value:"end"==e.meta_key?n.end=e.meta_value:"color"==e.meta_key&&(n.color=e.meta_value))}))}t.push(n)})),t},h=function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var n="",r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=wp.element,P=(S.createElement,S.render,S.useState),x=S.useEffect,k=(S.useContext,S.Fragment,S.RawHTML,function(e){var t=_(P({}),2),n=t[0],r=t[1];x((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"switch"},"S"==n.value?wp.element.createElement("input",{type:"checkbox",id:n.id,checked:!0,onClick:function(){return a("H")}}):wp.element.createElement("input",{type:"checkbox",id:n.id,onClick:function(){return a("S")}}),wp.element.createElement("label",{for:n.id,className:"slider"}))});function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=wp.element,T=(D.createElement,D.render,D.useState),M=D.useEffect,U=(D.useContext,D.Fragment,D.RawHTML,function(e){var t=A(T(e.field),2),n=t[0],r=t[1];M((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"textarea_field"},wp.element.createElement("textarea",{id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default},n.value))});function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=wp.element,H=($.createElement,$.render,$.useState),G=$.useEffect,z=($.useContext,$.Fragment,$.RawHTML,function(e){var t=F(H(!1),2),n=t[0],r=t[1],a=F(H({}),2),l=a[0],i=a[1];G((function(){var t=J({},e.field);y(e.field.value)&&!y(e.field.default)&&(t.value=e.field.default),i(t)}),[e.field]);return wp.element.createElement("div",{className:"number"},n||9999!==l.value?wp.element.createElement("input",{type:"number",id:l.id,value:l.value,onChange:function(t){return function(t){var n=J({},l);n.value=t.target.value,i(n),e.update(n,e.fieldIndex,"fieldvaluechanged")}(t)},placeholder:l.default}):wp.element.createElement("span",{onClick:function(){return r(!n)}},window.vibecal.translations.unlimited))});function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B=wp.element,Q=(B.createElement,B.render,B.useState),X=B.useEffect,Y=(B.useContext,B.Fragment,B.RawHTML,function(e){var t=V(Q({}),2),n=t[0],r=t[1];X((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"number"},wp.element.createElement("input",{type:"number",id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default}))});function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=wp.element,le=(ae.createElement,ae.render,ae.useState),ie=ae.useEffect,oe=(ae.useContext,ae.Fragment,ae.RawHTML,function(e){var t=ne(le({}),2),n=t[0],r=t[1];ie((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id},wp.element.createElement("input",{type:"text",id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default}))});function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fe=wp.element,me=(fe.createElement,fe.render,fe.useState),de=fe.useEffect,ve=(fe.useContext,fe.useRef,fe.Fragment,fe.RawHTML,function(e){var t=se(me(e.field),2),n=t[0],r=t[1];de((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id},wp.element.createElement("input",{type:"text",className:"text_field",onChange:function(e){a(e.target.value)},placeholder:n.default,value:n.value}))});function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=wp.element,Oe=(he.createElement,he.render,he.useState),Ee=he.useEffect,_e=(he.useContext,he.Fragment,he.RawHTML,function(e){var t=we(Oe({}),2),n=t[0],r=t[1];Ee((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"select"},wp.element.createElement("select",{id:n.id,onChange:function(e){return a(e)}},n.options&&n.options.length?n.options.map((function(e,t){var r=!1;return e.value==n.value&&(r=!0),wp.element.createElement("option",{value:e.value,selected:r},e.label)})):""))});function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ke=wp.element,Ie=(ke.createElement,ke.render,ke.useState),Ne=ke.useEffect,Ae=(ke.useContext,ke.Fragment,ke.RawHTML,function(e){var t=Pe(Ie(e.field),2),n=t[0],r=t[1];Ne((function(){r(e.field)}),[e.field]);var a=function(t,a,l){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);console.log(t,a,l),i.value=new Date(a).getTime(),r(i),e.update(i,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"date"},wp.element.createElement("label",null,n.label),wp.element.createElement("input",{type:"text",ref:function(e){e&&flatpickr(e,{altInput:!0,defaultDate:parseInt(n.value),enableTime:!0,onChange:a})}}))});function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ue=wp.element,Re=Ue.useState,Je=Ue.useEffect,Le=function(e){var t=Te(Re({}),2),n=t[0],r=t[1];Je((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id,style:{width:"20px",height:"20px"}},wp.element.createElement("input",{type:"color",id:n.id,value:n.value,onChange:function(e){return a(e)},style:{height:"40px"}}))};function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qe=wp.element,Ke=(qe.createElement,qe.useState),Ve=qe.useEffect,Ze=(qe.Fragment,qe.render,wp.data),Be=(Ze.dispatch,Ze.select,function(e){var t=Ge(Ke(!0),2),n=t[0],r=t[1],a=Ge(Ke(e.field),2),l=a[0],i=a[1],o=Ge(Ke(),2),c=o[0],u=o[1],s=Ge(Ke(),2),p=s[0],f=s[1],m=Ge(Ke(),2),d=m[0],y=m[1],b=Ge(Ke(),2),w=b[0],g=b[1],h=Ge(Ke(""),2),O=h[0],E=h[1],_=Ge(Ke([]),2),j=_[0],S=_[1];v((function(){e.update(l,e.fieldIndex,"fieldvaluechanged")}),500,[l.value]),Ve((function(){i(e.field)}),[e.field]),v((function(){if(!n){var e=new google.maps.places.AutocompleteService;O.length&&e.getQueryPredictions({input:O},(function(e,t){if(t==google.maps.places.PlacesServiceStatus.OK){var n=[];e.forEach((function(e){n.push(e.description)})),S(n)}}))}}),500,[O]),Ve((function(){if(c)if(window.hasOwnProperty("google")&&window.google.hasOwnProperty("maps")){var e={lat:-34.397,lng:150.644},t={zoom:16,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,imageDefaultUI:!0},n=new google.maps.Map(c,t);f(n);var a=new google.maps.Marker({map:n,position:e,animation:google.maps.Animation.DROP});y(a),r(!1),g(new google.maps.Geocoder)}else{var l=window.document.createElement("script");l.src="https://maps.googleapis.com/maps/api/js?key=".concat(window.vibebp.settings.google_maps_api_key,"&libraries=places"),l.async=!0,window.document.body.appendChild(l),l.addEventListener("load",(function(){var e={lat:-34.397,lng:150.644},t={zoom:16,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,imageDefaultUI:!0},n=new google.maps.Map(c,t);f(n);var a={url:window.vibebp.settings.map_marker,size:new google.maps.Size(51,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,30)},l=new google.maps.Marker({map:n,position:e,animation:google.maps.Animation.DROP,draggable:!0,icon:a});y(l),r(!1),g(new google.maps.Geocoder)}))}}),[c]),Ve((function(){n||(l.value||x(),window.google.maps.event.addListener(d,"dragend",(function(e){(new google.maps.Geocoder).geocode({location:e.latLng},(function(e,t){"OK"==t&&(p.setCenter(e[0].geometry.location),i($e($e({},l),{},{value:{lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng(),address:e[0].formatted_address,zipcode:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("postal_code")}))].long_name,city:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("locality")}))].long_name,country:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("country")}))].long_name}})))}))})))}),[n]);var P=function(){w&&(new google.maps.Geocoder).geocode({address:O},(function(e,t){"OK"==t&&(p.setCenter(e[0].geometry.location),d.setPosition(e[0].geometry.location)),S([])}))},x=function(){console.log("...locating"),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var t=$e({},l);t.value=[e.coords.latitude,e.coords.longitude],i(t);var n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);p.setCenter(n),d.setPosition(n)})):fetch("http://ip-api.com/json",{method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=$e({},l);t.value={lat:e.lat,lng:e.lng},i(t);new google.maps.LatLng(e.lat,e.lng);w&&w.geocode({location:{lat:e.lat,lng:e.lng}}).then((function(e){console.log(e)}),(function(e){console.error(e)}))}))};return wp.element.createElement("div",{className:"vibebp_profile_field location"},wp.element.createElement("div",{className:"search_me"},wp.element.createElement("span",{className:"vicon vicon-target",onClick:x}),wp.element.createElement("input",{type:"text",value:O,onChange:function(e){E(e.target.value)}}),O.length?wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){E(""),S([])}}):"",wp.element.createElement("span",{className:O.length?"vicon vicon-search is_active":"vicon vicon-search",onClick:P})),j.length?wp.element.createElement("div",{className:"vibebp_autocomplete_results"},j.map((function(e){return wp.element.createElement("div",{className:"vibebp_autocomplete_result",onClick:function(){E(e),S([]),P()}},e)}))):"",wp.element.createElement("div",{className:"google_map_locator"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",wp.element.createElement("div",{ref:function(e){e&&!c&&u(e)},style:{height:"400px",width:"100%"}})),l&&l.value&&"object"===Fe(l.value)?wp.element.createElement("div",{className:"google_map_details"},wp.element.createElement("textarea",{placeholder:window.vibebp.translations.address,onChange:function(e){i($e($e({},l),{},{value:$e($e({},l.value),{},{address:e.target.value})}))},value:l.value.hasOwnProperty("address")?l.value.address:""}),wp.element.createElement("div",{className:"gmap_fields"},wp.element.createElement("input",{type:"text",onChange:function(e){i($e($e({},l),{},{value:$e($e({},l.value),{},{zipcode:e.target.value})}))},placeholder:window.vibebp.translations.zipcode,value:l.value.hasOwnProperty("zipcode")?l.value.zipcode:""}),wp.element.createElement("input",{type:"text",onChange:function(e){i($e($e({},l),{},{value:$e($e({},l.value),{},{city:e.target.value})}))},placeholder:window.vibebp.translations.city,value:l.value.hasOwnProperty("city")?l.value.city:""}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.country,value:l.value.hasOwnProperty("country")?l.value.country:""}))):"")});function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){if(e){if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rt=wp.element,at=(rt.createElement,rt.render,rt.useState),lt=rt.useEffect,it=(rt.useContext,rt.useRef,rt.Fragment),ot=(rt.RawHTML,wp.data),ct=ot.select,ut=(ot.dispatch,function(e){var t=et(at(e.field),2),n=t[0],r=t[1],a=et(at({}),2),l=a[0],i=a[1],o=et(at([]),2),c=o[0],u=o[1],s=et(at(!1),2),p=s[0],f=s[1];lt((function(){r(e.field),e.field.hasOwnProperty("value")&&e.field.value.length&&u(Ye(e.field.value))}),[e.field]),lt((function(){fetch("".concat(window.vibecal.api.url,"/event/label/all_labels"),{method:"post",body:JSON.stringify({token:ct("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&i(e.data)}))}),[]);var m=function(t){u(t);var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);r.value=Ye(t),e.update(r,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id},wp.element.createElement(it,null,wp.element.createElement(it,null,c&&c.length?wp.element.createElement("div",{className:"added_labels"},c.map((function(e){var t=Object.keys(l).findIndex((function(t){return t==e}));return t>-1?wp.element.createElement("span",null,wp.element.createElement("span",null,l[Object.keys(l)[t]].label),wp.element.createElement("span",{onClick:function(){return function(e){var t=Ye(c),n=c.findIndex((function(t){return t==e}));n>-1&&t.splice(n,1),m(t)}(e)},className:"vicon vicon-trash"})):""}))):""),wp.element.createElement("a",{className:p?"button small is-danger":"button small is-primary",onClick:function(){return f(!p)}},wp.element.createElement("span",{className:p?"vicon vicon-close":"vicon vicon-plus"})),p?wp.element.createElement("div",{className:"all_labels"},Object.keys(l).map((function(e){return-1==c.findIndex((function(t){return e==t}))?wp.element.createElement("span",null,wp.element.createElement("span",null,l[e].label),wp.element.createElement("span",{onClick:function(){return t=e,n=Ye(c),-1==c.findIndex((function(e){return e==t}))&&n.push(t),void m(n);var t,n},className:"vicon vicon-bookmark"})):""}))):""))});function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vt=wp.element,yt=(vt.createElement,vt.render,vt.useState),bt=vt.useEffect,wt=(vt.useContext,vt.Fragment,vt.RawHTML,function(e){var t=mt(yt({}),2),n=t[0],r=t[1];bt((function(){r(e.field)}),[e.field]);return wp.element.createElement("div",{className:"repeatable",id:n.id},wp.element.createElement("a",{className:"button small is-primary add_repeatable_count_option",onClick:function(){var t=pt({},n);y(t.value)&&(t.value=[]),t.value.push("Option "+(t.value.length+1)),r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}},window.wplms_create_course_data.translations.add_option),wp.element.createElement("ul",{className:"repeatableoption"},n.value&&n.value.length?n.value.map((function(t,a){return wp.element.createElement("li",null,wp.element.createElement("span",null,a+1+" "),wp.element.createElement("input",{type:"text",value:t,onChange:function(t){!function(t,a){var l=pt({},n);l.value[a]=t,r(l),console.log(l),e.update(l,e.fieldIndex,"fieldvaluechanged")}(t.target.value,a)}}),wp.element.createElement("span",{class:"vicon vicon-close",onClick:function(){!function(t){var a=pt({},n);a.value.splice(t,1),r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")}(a)}}))})):""))});function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _t=wp.element,jt=(_t.createElement,_t.render,_t.useState),St=_t.useEffect,Pt=(_t.useContext,_t.Fragment,_t.RawHTML,function(e){var t=Ot(jt(e.field),2),n=t[0],r=t[1],a=Ot(jt({post_content:"",raw:{}}),2),l=(a[0],a[1]),i=Ot(jt(Math.round(1e5*Math.random())),2),o=i[0];i[1];return St((function(){if(e.field&&e.field.id){console.log("sending");var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_"+e.field.id+"_editor",content:e.field.hasOwnProperty("value")?e.field.value:"",raw:e.field.hasOwnProperty("raw")?e.field.raw:"",components:"editor",updater:e.field.id+o}});document.dispatchEvent(t)}}),[e.field]),St((function(){e.field&&e.field.id&&document.addEventListener("vibe_editor_content_update_"+e.field.id+o,(function(t){l({post_content:t.detail.raw_html,raw:t.detail.editor_content});var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.field);n.value=t.detail.raw_html,n.raw=t.detail.editor_content,r(n),e.update(n,e.fieldIndex,"fieldvaluechanged")}))}),[]),wp.element.createElement("div",{className:"vibev_editor"},wp.element.createElement("div",{className:"vibe_"+n.id+"_editor"},wp.element.createElement("textarea",{value:n.value})))}),xt=wp.element,kt=(xt.createElement,xt.render,function(e){return wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))});function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){At(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tt=wp.element,Mt=(Tt.createElement,Tt.render,Tt.useState),Ut=Tt.useEffect,Rt=(Tt.useContext,Tt.Fragment,Tt.RawHTML,wp.data),Jt=(Rt.dispatch,Rt.select),Lt=function(e){var t=Ct(Mt({}),2),n=t[0],r=t[1],a=Ct(Mt(""),2),l=a[0],i=a[1],o=Ct(Mt([]),2),c=o[0],u=o[1],s=Ct(Mt({}),2),p=s[0],f=s[1],m=Ct(Mt(!1),2),d=m[0],v=m[1],y=Jt("vibebp").getUser();return y.token=Jt("vibebp").getToken(),Ut((function(){e.field&&e.field.hasOwnProperty("show_value")&&f(e.field.show_value),r(e.field)}),[e.field]),Ut((function(){var t=Nt({},n);p.id&&(t.value=p.id,t.show_value=p,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged"))}),[p]),Ut((function(){if(l.length>3){v(!0);var e="",t="";n.cpt&&(e=n.cpt,t="selectcpt"),n.post_type&&(e=n.post_type,t="selectcpt"),n.taxonomy&&(e=n.taxonomy,t="taxonomy"),fetch("".concat(window.vibecal.api.url,"/").concat(t,"/").concat(e),{method:"post",body:JSON.stringify({search:l,token:y.token})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),u(e.posts)),v(!1)}))}}),[l]),wp.element.createElement("div",{className:"selectcptfield"},wp.element.createElement("div",{className:"selectcptfield_list"},wp.element.createElement("div",{className:"selectcptfield_items"},p&&p.text?wp.element.createElement("span",{type:n.cpt,onClick:function(){f({})}},p.text):"")),wp.element.createElement("input",{type:"text",value:l,placeholder:window.wplms_create_course_data.translations.type_keyword,onChange:function(e){i(e.target.value)}}),c.length?wp.element.createElement("div",{className:"search_results"},c.map((function(e,t){return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){i("");var n=Nt({},p);n=e,c.splice(t,1),f(n)}},wp.element.createElement("span",null,e.text))}))):d?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(kt,null)):"")};function Ft(e){return function(e){if(Array.isArray(e))return zt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Gt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||Gt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){if(e){if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qt=wp.element,Kt=(qt.createElement,qt.render,qt.useState),Vt=qt.useEffect,Zt=(qt.useContext,qt.Fragment,qt.RawHTML,wp.data),Bt=Zt.dispatch,Qt=Zt.select,Xt=function(e){var t=Ht(Kt({}),2),n=t[0],r=t[1],a=Ht(Kt(""),2),l=a[0],i=a[1],o=Ht(Kt([]),2),c=o[0],u=o[1],s=Ht(Kt([]),2),p=s[0],f=s[1],m=Ht(Kt(!1),2),d=m[0],v=m[1],y=Ht(Kt(!1),2),w=y[0],g=y[1];return Qt("vibebp").getUser().token=Qt("vibebp").getToken(),Vt((function(){e.field&&e.field.hasOwnProperty("show_value")&&f(e.field.show_value),r(e.field)}),[e.field]),Vt((function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){$t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(p&&p.length){var a=[];p.map((function(e){a.push(e.id)})),t.value=a,t.show_value=p,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),[p]),Vt((function(){if(l.length>3){g(!0);var e="",t="";n.cpt&&(e=n.cpt,t="selectcpt"),n.taxonomy&&(e=n.taxonomy,t="taxonomy"),fetch("".concat(window.vibecal.api.url,"/").concat(t,"/").concat(e),{headers:{Authorization:window.wplms_create_course_data.token},method:"post",body:JSON.stringify({search:l,token:Qt("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.status?Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),u(e.posts)):Bt("vibebp").addNotification({text:e.message}),g(!1)}))}}),[l]),wp.element.createElement("div",{className:"selectcptfield"},wp.element.createElement("div",{className:"selectcptfield_list"},wp.element.createElement("div",{className:"selectcptfield_items"},p.map((function(e){var t=n.cpt?n.taxonomy:"";return wp.element.createElement("span",{type:t,onClick:function(){var t=Ft(p);t.splice(b(e,p),1),f(t)}},e.text)})))),d?wp.element.createElement("span",{className:"add_wrapper"},wp.element.createElement("input",{type:"text",value:l,placeholder:n.hasOwnProperty("placeholder")?n.placeholder:window.wplms_create_course_data.translations.type_keyword,onChange:function(e){i(e.target.value)}}),wp.element.createElement("span",{onClick:function(){v(!d)},className:"vicon vicon-close"})):wp.element.createElement("span",{className:"add_wrapper",onClick:function(){v(!d)}},window.wplms_create_course_data.translations.add,wp.element.createElement("span",{className:"vicon vicon-plus"})),c.length?wp.element.createElement("div",{className:"search_results"},c.map((function(e,t){if(-1===b(e,p))return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){i("");var n=Ft(p);-1===b(e,n)&&(n.push(e),c.splice(t,1),f(n))}},wp.element.createElement("span",null,e.text))}))):w?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(kt,null)):"")};function Yt(e){return function(e){if(Array.isArray(e))return an(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||rn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){if(e){if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ln=wp.element,on=(ln.createElement,ln.render,ln.useState),cn=ln.useEffect,un=(ln.useContext,ln.Fragment,ln.RawHTML,function(e){var t=nn(on({}),2),n=t[0],r=t[1],a=nn(on(""),2),l=(a[0],a[1]),i=nn(on([]),2),o=i[0],c=i[1],u=nn(on([]),2),s=u[0],p=u[1],f=nn(on(!1),2),m=f[0],d=f[1],v=nn(on(!1),2),y=v[0],w=v[1],g=nn(on(!1),2),h=g[0],O=g[1];cn((function(){e.field&&e.field.hasOwnProperty("show_value")&&p(e.field.show_value),r(e.field),O(!0)}),[e.field]),cn((function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){tn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(s&&s.length){var a=[];s.map((function(e){a.push(e.id)})),t.value=a,t.show_value=s,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),[s]),cn((function(){h&&(d(!0),c(n.options),d(!1))}),[h]);var E="search_results";return y&&(E="search_results active"),wp.element.createElement("div",{className:"selectcptfield multiselect"},wp.element.createElement("div",{className:"selectcptfield_list"},wp.element.createElement("div",{className:"selectcptfield_items"},s.map((function(e){var t=n.cpt?n.multiselect:"";return wp.element.createElement("span",{type:t,onClick:function(){var t=Yt(s),n=Yt(o);t.splice(b(e,s,"value"),1),n.push(e),c(n),p(t)}},e.label)})))),wp.element.createElement("div",{className:"selectimitate",onClick:function(){w(!y)}},y?wp.element.createElement("i",{class:"vicon vicon-angle-up","aria-hidden":"true"}):wp.element.createElement("i",{class:"vicon vicon-angle-down","aria-hidden":"true"}),o.length?wp.element.createElement("div",{className:E},o.map((function(e,t){if(-1===b(e,s,"value"))return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){l("");var n=Yt(s);-1===b(e,n,"value")&&(n.push(e),o.splice(t,1),p(n))}},wp.element.createElement("span",null,e.label))}))):m?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(kt,null)):""))});function sn(e){return function(e){if(Array.isArray(e))return vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||dn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){if(e){if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(e,t):void 0}}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yn=wp.element,bn=(yn.createElement,yn.render,yn.useState),wn=yn.useEffect,gn=(yn.useContext,yn.Fragment,yn.RawHTML,wp.data),hn=(gn.dispatch,gn.select),On=function(e){var t=mn(bn({}),2),n=t[0],r=t[1],a=mn(bn(""),2),l=(a[0],a[1]),i=mn(bn([]),2),o=i[0],c=i[1],u=mn(bn([]),2),s=u[0],p=u[1],f=mn(bn(!1),2),m=(f[0],f[1]),d=mn(bn(!1),2),v=d[0],y=d[1],w=mn(bn(!1),2),g=w[0],h=w[1],O=hn("vibebp").getUser();return O.token=hn("vibebp").getToken(),wn((function(){r(e.field),h(!0)}),[e.field]),wn((function(){e.field.hasOwnProperty("value")&&o.length&&e.field.value.length&&p(o.filter((function(t){return e.field.value.indexOf(t.id)>-1})))}),[o]),wn((function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(s&&s.length){var r=[];s.map((function(e){r.push(e.id)})),t.value=r,t.show_value=s,p(s),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),[s]),wn((function(){if(g){m(!0);console.log("field",n),n.taxonomy&&(n.taxonomy,"taxonomy"),fetch("".concat(window.vibecal.api.url,"/taxonomy"),{method:"post",body:JSON.stringify({taxonomy:n.taxonomy,token:O.token})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),c(e.posts)),m(!1)}))}}),[g]),wp.element.createElement("div",{className:"taxonomy_field"},wp.element.createElement("div",{className:"selected_term_list_wrapper"},wp.element.createElement("div",{className:"selected_term_list"},s.map((function(e,t){var r=n.cpt?n.taxonomy:"";return"number"==typeof e.id?wp.element.createElement("div",{className:"term_select"},wp.element.createElement("span",{type:r,onClick:function(){var n=sn(s),r=sn(o);n.splice(t,1),r.push(e),c(r),p(n)}},e.text)):wp.element.createElement("div",{className:"term_select"},wp.element.createElement("input",{type:"text",value:s[t].id.split("new_")[1],placeholder:window.vibecal.translations.type_here,onChange:function(e){var n=sn(s);n[t]={id:"new_"+e.target.value},p(n)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=sn(s);t>-1&&e.splice(t,1),p(e)}}))})))),wp.element.createElement("div",{className:"term_select",onClick:function(){y(!v)}},wp.element.createElement("div",{class:"term_select_label"},n.label,v?wp.element.createElement("i",{class:"vicon vicon-angle-down","aria-hidden":"true"}):wp.element.createElement("i",{class:"vicon vicon-plus","aria-hidden":"true"})),v?wp.element.createElement("div",{className:"search_term_list"},wp.element.createElement("div",{className:"search_term",onClick:function(){var e=sn(s);e.push({id:"new_"}),p(e)}},wp.element.createElement("span",null,window.vibecal.translations.add_new)),o.length?o.map((function(e,t){if(-1===b(e,s))return wp.element.createElement("div",{className:"search_term",onClick:function(){l("");var n=sn(s);-1===b(e,n)&&(n.push(e),o.splice(t,1),p(n))}},wp.element.createElement("span",null,e.text))})):""):""))};function En(e){return function(e){if(Array.isArray(e))return kn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){Sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||xn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){if(e){if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var In=wp.element,Nn=(In.createElement,In.render,In.useState),An=(In.useEffect,In.Fragment),Cn=(In.useContext,wp.data),Dn=Cn.dispatch,Tn=Cn.select,Mn=function(e){var t=Pn(Nn(!1),2),n=t[0],r=t[1],a=Pn(Nn([]),2),l=a[0],i=a[1],o=Pn(Nn([]),2),c=o[0],u=(o[1],Pn(Nn(!1),2)),s=u[0],p=u[1],f=Pn(Nn(!1),2),m=f[0],d=f[1],y=Pn(Nn("media"),2),b=y[0],w=y[1],g=Pn(Nn((function(){var t={posts_per_page:20,paged:1,search_terms:"",orderby:""};return e.hasOwnProperty("type")&&(t.post_mime_type=e.type),t})),2),h=g[0],O=g[1];v((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/user/fetch_media"),{method:"post",body:JSON.stringify(jn(jn({},h),{},{token:Tn("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status)if(m){var t=En(l);e.data.map((function(e){t.push(e)})),i(t),d(!1),t.length<parseInt(e.total)?p(!0):p(!1)}else i(e.data),e.data.length<parseInt(e.total)?p(!0):p(!1)}))}),500,[h]);var E=function(t){e.share(t)},_=function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("video",{controls:!0,src:e.url,className:"content_to_html_video"});case"audio":return wp.element.createElement("audio",{controls:!0,src:e.url,className:"content_to_html_audio"})}};return wp.element.createElement("div",{className:"vibe_editor_modal"},wp.element.createElement("div",{className:"modal-content"},wp.element.createElement("div",{className:"modal-header"},wp.element.createElement("div",null,wp.element.createElement("a",{className:"media"==b?"active":"",onClick:function(){"media"!=b&&w("media")}},window.vibebp.translations.select_media),wp.element.createElement("a",{className:"upload"==b?"active":"",onClick:function(){"upload"!=b&&w("upload")}},window.vibebp.translations.upload_media)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(t){e.close(!1)}})),wp.element.createElement("div",{className:"modal-body"},"media"==b?wp.element.createElement(An,null,wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,onChange:function(e){return O(jn(jn({},h),{},{search_terms:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("select",{onChange:function(e){O(jn(jn({},h),{},{order:e.target.value}))}},Object.keys(window.vibeEditor.media_order).map((function(e){return wp.element.createElement("option",{value:e},window.vibeEditor.media_order[e])}))))),n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):l&&l.length?wp.element.createElement("div",{className:"allMedia"},l.map((function(t,n){return wp.element.createElement("div",{className:"single_media",onClick:function(n){E(t),e.close(!1)}},_(t))}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_media),s?wp.element.createElement("a",{className:"link",onClick:function(){O(jn(jn({},h),{},{paged:h.paged+1})),d(!0)}},window.vibebp.translations.more):""):"upload"===b?wp.element.createElement(An,null,wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media"},window.vibebp.translations.upload_media),wp.element.createElement("input",{type:"file",id:"vibe_editor_upload_media",onChange:function(e){return function(e){if(e.target.files[0]){var t=new FormData;t.append("file",e.target.files[0]),t.append("body",JSON.stringify({token:Tn("vibebp").getToken()})),fetch("".concat(window.vibebp.api.url,"/user/upload_media"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){if(e.status){var t=En(l);t.unshift(e.data),i(t),w("media")}else e.hasOwnProperty("message")&&Dn("vibebp").addNotification({text:e.message})}))}}(e)}}),c&&c.length?wp.element.createElement("div",{className:"uploaded"},wp.element.createElement("strong",null,window.vibebp.translations.uploaded_media),wp.element.createElement("div",{className:"uploaded_files"},c.map((function(e,t){return wp.element.createElement("div",{className:"single_media",onClick:function(t){E(e)}},_(e))})))):"")):"")))};function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){Jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wn=wp.element,$n=(Wn.createElement,Wn.render,Wn.useState),Hn=Wn.useEffect,Gn=(Wn.Fragment,Wn.useContext,wp.data),zn=(Gn.dispatch,Gn.select,function(e){var t=Ln($n(!1),2),n=t[0],r=t[1],a=Ln($n({}),2),l=a[0],i=a[1],o=Ln($n([]),2);o[0],o[1];Hn((function(){e.hasOwnProperty("media")&&(e.field.value=e.media),i(e.field)}),[e.field]);return wp.element.createElement("div",{className:"media_wrapper"},l&&l.hasOwnProperty("value")&&l.value.hasOwnProperty("url")?wp.element.createElement("div",{className:"media_file"},wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var t=Rn({},l);t.value={},i(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),function(){if(l.hasOwnProperty("value")&&l.value.hasOwnProperty("type"))switch(l.value.type){case"image":return wp.element.createElement("img",{src:l.value.url,className:"content_to_html_image"});case"video":return wp.element.createElement("video",{controls:!0,src:l.value.url,className:"content_to_html_video"});case"audio":return wp.element.createElement("audio",{controls:!0,src:l.value.url,className:"content_to_html_audio"});default:return l.value.hasOwnProperty("type")?wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,type:"application/pdf",src:l.value.url}):wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,src:l.value.url})}}()):"course_featured"==l.type?wp.element.createElement("div",{onClick:function(){r(!0)}},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-image"},wp.element.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),wp.element.createElement("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),wp.element.createElement("polyline",{points:"21 15 16 10 5 21"}))):"featured_video"==l.type?wp.element.createElement("div",{className:"featured_video",onClick:function(){r(!0)}},l.label,wp.element.createElement("span",{className:"vicon vicon-control-play"})):wp.element.createElement("div",{className:"vicon vicon-plus",onClick:function(){r(!0)}}),n?wp.element.createElement(Mn,{type:e.type,close:function(){r(!1)},share:function(t){var n,r;n=t,(r=Rn({},l)).value=n,i(r),e.update(r,e.fieldIndex,"fieldvaluechanged")}}):"")});function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bn=wp.element,Qn=(Bn.createElement,Bn.render,Bn.useState),Xn=Bn.useEffect,Yn=(Bn.Fragment,Bn.useContext,wp.data),er=(Yn.dispatch,Yn.select,function(e){var t=Vn(Qn({}),2),n=t[0],r=t[1],a=Vn(Qn([]),2);a[0],a[1];Xn((function(){r(e.field)}),[e.field]);var l=function(t,a,l){if("fieldvaluechanged"==l){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){Kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);i.hasOwnProperty("value")||(i.value=[]),t.value.hasOwnProperty("url")?i.value.push(t.value):i.value.splice(a,1),r(i),e.update(i,e.fieldIndex,"fieldvaluechanged")}};return wp.element.createElement("div",{className:"multimedia"},wp.element.createElement("div",{className:"attachment"},wp.element.createElement(zn,{field:{},fieldIndex:-1,update:l})),n.value&&n.value.length?wp.element.createElement("div",{className:"attachments"},n.value.map((function(e,t){return wp.element.createElement("div",{className:"attachment"},wp.element.createElement(zn,{field:{},media:e,fieldIndex:t,update:l}))}))):"")});function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ir=wp.element,or=(ir.createElement,ir.render,ir.useState),cr=ir.useEffect,ur=(ir.useContext,ir.Fragment,ir.RawHTML,function(e){var t=ar(or({}),2),n=t[0],r=t[1];cr((function(){r(e.field)}),[e.field]);var a=function(e,t){var a=nr({},n);a.hasOwnProperty("value")||(a.value={}),"daysOfWeek"==t?Array.isArray(a.value[t])?a.value[t].indexOf(e)>-1?a.value[t].splice(a.value[t].indexOf(e),1):a.value[t].push(e):a.value[t]=[e]:a.value[t]=e,r(a),l(a)},l=function(t){e.update(t,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"recurring"},wp.element.createElement("div",{className:"switch"},n.value&&n.value.hasOwnProperty("recurring")?wp.element.createElement("input",{type:"checkbox",id:n.id,checked:!0,onClick:function(){var e=nr({},n);delete e.value,r(e),l(e)}}):wp.element.createElement("input",{type:"checkbox",id:n.id,onClick:function(){a("everyDay","recurring")}}),wp.element.createElement("label",{for:n.id,className:"slider"})),n.value&&n.value.hasOwnProperty("recurring")?wp.element.createElement("select",{onChange:function(e){return a(e.target.value,"recurring")},value:n.value?n.value.recurring:""},wp.element.createElement("option",{value:"everyDay"},window.vibecal.translations.every_day),wp.element.createElement("option",{value:"daysOfWeek"},window.vibecal.translations.weekly)):"",n.value&&n.value.hasOwnProperty("recurring")&&"daysOfWeek"==n.value.recurring?wp.element.createElement("div",{className:"daysOfWeek"},wp.element.createElement("span",{onClick:function(e){return a(0,"daysOfWeek")},className:n.value.hasOwnProperty("daysOfWeek")&&n.value.daysOfWeek.indexOf(0)>-1?"active":""},window.vibecal.translations.sun),wp.element.createElement("span",{onClick:function(e){return a(1,"daysOfWeek")},className:n.value.hasOwnProperty("daysOfWeek")&&n.value.daysOfWeek.indexOf(1)>-1?"active":""},window.vibecal.translations.mon),wp.element.createElement("span",{onClick:function(e){return a(2,"daysOfWeek")},className:n.value.hasOwnProperty("daysOfWeek")&&n.value.daysOfWeek.indexOf(2)>-1?"active":""},window.vibecal.translations.tue),wp.element.createElement("span",{onClick:function(e){return a(3,"daysOfWeek")},className:n.value.hasOwnProperty("daysOfWeek")&&n.value.daysOfWeek.indexOf(3)>-1?"active":""},window.vibecal.translations.wed),wp.element.createElement("span",{onClick:function(e){return a(4,"daysOfWeek")},className:n.value.hasOwnProperty("daysOfWeek")&&n.value.daysOfWeek.indexOf(4)>-1?"active":""},window.vibecal.translations.thu),wp.element.createElement("span",{onClick:function(e){return a(5,"daysOfWeek")},className:n.value.hasOwnProperty("daysOfWeek")&&n.value.daysOfWeek.indexOf(5)>-1?"active":""},window.vibecal.translations.fri),wp.element.createElement("span",{onClick:function(e){return a(6,"daysOfWeek")},className:n.value.hasOwnProperty("daysOfWeek")&&n.value.daysOfWeek.indexOf(6)>-1?"active":""},window.vibecal.translations.sat)):"")});function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dr=wp.element,vr=(dr.createElement,dr.render,dr.useState),yr=dr.useEffect,br=dr.useContext,wr=dr.Fragment,gr=function(e){var t=fr(vr({}),2),n=t[0],a=t[1],l=fr(vr(!1),2),i=l[0],o=l[1],c=br(r),u=fr(vr("event"),2),s=u[0],p=u[1];yr((function(){a(e.field)}),[e.field]);var f=function(t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);r.value=t,a(r),e.update(r,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id},c.currentEvent&&c.currentEvent.id?wp.element.createElement(wr,null,c.gcal&&c.gcal.settings?wp.element.createElement(wr,null,n.value?wp.element.createElement("span",null,n.value.conferenceData&&n.value.conferenceData.entryPoints&&n.value.conferenceData.entryPoints[0]?wp.element.createElement("a",{href:n.value.conferenceData.entryPoints[0].uri,target:"_blank"},n.value.conferenceData.entryPoints[0].label):n.value.htmlLink?wp.element.createElement("a",{href:n.value.htmlLink,target:"_blank"},n.value.htmlLink):"",wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(e){f("")}})):wp.element.createElement("div",null,wp.element.createElement("select",{value:s,onChange:function(e){p(e.target.value)}},wp.element.createElement("option",{value:"event"},window.vibecal.translations.create_event),wp.element.createElement("option",{value:"meet"},window.vibecal.translations.create_event_with_google_meet)),wp.element.createElement("a",{className:i?"button is-primary is-loading":"button is-primary",onClick:function(){if(c.gcal&&c.gcal.settings){var e=c.gcal.settings,t=c.currentEvent;if(t.id&&e.google_calendar_api_key&&e.google_calendar_client_id&&e.google_calendar_googleevent_create){var n=g([t]),r=[];n.map((function(e){r.push(e)})),o(!0);var a=[];["https://apis.google.com/js/api.js"].map((function(e){a.push(w(e,"js"))})),Promise.all(a).then((function(t){window.gapi.load("client:auth2",(function(){window.gapi.auth2.init({client_id:e.google_calendar_client_id}),window.gapi.auth2.getAuthInstance().signIn({scope:"https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events"}).then((function(){console.log("Sign-in successful"),window.gapi.client.setApiKey(e.google_calendar_api_key),window.gapi.client.load("https://content.googleapis.com/discovery/v1/apis/calendar/v3/rest").then((function(){if(console.log("GAPI client loaded for API"),r&&Array.isArray(r)){var e="America/Los_Angeles";r.map((function(t){var n={calendarId:"primary",resource:{summary:t.title,start:{dateTime:new Date(t.start).toISOString(),timeZone:e},end:{dateTime:new Date(t.end).toISOString(),timeZone:e}}};"meet"==s&&(n={calendarId:"primary",conferenceDataVersion:1,resource:{summary:t.title,start:{dateTime:new Date(t.start).toISOString(),timeZone:e},end:{dateTime:new Date(t.end).toISOString(),timeZone:e},conferenceData:{createRequest:{conferenceSolutionKey:{type:"hangoutsMeet"},requestId:h(10)}}}}),window.gapi.client.calendar.events.insert(n).then((function(e){e.result&&f(e.result),console.log(e),o(!1)}),(function(e){console.error("Execute error",e)}))}))}}),(function(e){console.error("Error loading GAPI client for API",e),o(!1)}))}),(function(e){console.error("Error signing in",e),o(!1)}))}))}))}}}},n.translation))):wp.element.createElement("div",{className:"vbp_message"},window.vibecal.translations.event_creation_not_enable)):"")};function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Or(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Er=wp.element,_r=(Er.createElement,Er.render,Er.useState),jr=Er.useEffect,Sr=(Er.useContext,Er.Fragment),Pr=(Er.RawHTML,function(e){var t=hr(_r({}),2),n=t[0],r=t[1];jr((function(){r(e.field)}),[e.field]);var a=function(t,n,r){e.update({field:t,index:n},"fieldvaluechanged")};return wp.element.createElement(Sr,null,void 0!==n?wp.element.createElement("div",{className:"field_wrapper field_"+n.type},wp.element.createElement("span",null,n.label&&"course_featured"!=n.type&&"title"!=n.type&&"next_button"!=n.type&&"prev_button"!=n.type&&"taxonomy"!=n.type&&"featured_video"!=n.type&&"group"!=n.type&&"datetime"!=n.type&&"forum"!=n.type?wp.element.createElement("label",null,n.label,n.desc?wp.element.createElement("a",{className:"tip",title:n.desc},wp.element.createElement("i",{className:"vicon vicon-help-alt"})):""):"",n.text?wp.element.createElement("strong",null,n.text):""),wp.element.createElement("div",{className:"field_value"},function(t,n,r){switch(t.type){case"title":return wp.element.createElement(ve,{field:t,fieldIndex:n,tabIndex:r,update:a});case"taxonomy":return wp.element.createElement(On,{field:t,fieldIndex:n,tabIndex:r,update:a});case"course_featured":case"featured_image":return wp.element.createElement(zn,{field:t,type:"image",fieldIndex:n,tabIndex:r,update:a});case"featured_video":return wp.element.createElement(zn,{field:t,type:"video",fieldIndex:n,tabIndex:r,update:a});case"textarea":return wp.element.createElement(U,{field:t,fieldIndex:n,tabIndex:r,update:a});case"editor":return wp.element.createElement(Pt,{field:t,fieldIndex:n,tabIndex:r,update:a});case"unlimited_number":return wp.element.createElement(z,{field:t,fieldIndex:n,tabIndex:r,update:a});case"number":return wp.element.createElement(Y,{field:t,fieldIndex:n,tabIndex:r,update:a});case"select":return wp.element.createElement(_e,{field:t,fieldIndex:n,tabIndex:r,update:a});case"selectmulticpt":return wp.element.createElement(Xt,{field:t,fieldIndex:n,tabIndex:r,update:a});case"multiselect":return wp.element.createElement(un,{field:t,fieldIndex:n,tabIndex:r,update:a});case"showhide":case"switch":case"yesno":case"conditionalswitch":case"reverseconditionalswitch":return wp.element.createElement(k,{field:t,fieldIndex:n,tabIndex:r,update:a});case"selectcpt":return wp.element.createElement(Lt,{field:t,fieldIndex:n,tabIndex:r,update:a});case"text":return wp.element.createElement(oe,{field:t,fieldIndex:n,tabIndex:r,update:a});case"media":return wp.element.createElement(zn,{field:t,type:"image",fieldIndex:n,tabIndex:r,update:a});case"multiattachments":return wp.element.createElement(er,{field:t,type:"image",fieldIndex:n,tabIndex:r,update:a});case"color":return wp.element.createElement(Le,{field:t,fieldIndex:n,tabIndex:r,update:a});case"datetime":return wp.element.createElement(Ae,{field:t,fieldIndex:n,tabIndex:r,update:a});case"group":return wp.element.createElement(Groups,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:r,update:a});case"forum":return wp.element.createElement(Forums,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:r,update:a});case"repeatable":case"repeatable_count":return wp.element.createElement(wt,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:r,update:a});case"recurring":return wp.element.createElement(ur,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:r,update:a});case"location":return wp.element.createElement(Be,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:r,update:a});case"label":return wp.element.createElement(ut,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:r,update:a});case"googleevent":return wp.element.createElement(gr,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:r,update:a});default:var l=new CustomEvent("vibecal_field",{detail:{field:t}});document.dispatchEvent(l)}return""}(n,e.fieldIndex,e.tabIndex))):"")});function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){Ir(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e){return function(e){if(Array.isArray(e))return Dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||Cr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(e,t){if(e){if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(e,t):void 0}}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tr=wp.element,Mr=Tr.useState,Ur=Tr.useEffect,Rr=Tr.Fragment,Jr=(Tr.createRef,Tr.useContext),Lr=wp.data,Fr=Lr.select,Wr=Lr.dispatch,$r=function(e){var t=Jr(r),n=Ar(Mr(!1),2),a=n[0],l=n[1],i=Ar(Mr({post_title:"",post_content:"",meta:[],taxonomy:[]}),2),o=i[0],c=i[1],u=Ar(Mr({post_content:"",raw:[]}),2),s=u[0],p=u[1],f=Ar(Mr(!1),2),m=f[0],v=f[1],y=Ar(Mr(window.vibecal.settings.fields),2),b=y[0],w=y[1],g=Ar(Mr(!1),2),h=g[0],O=g[1],E=Ar(Mr(),2),_=E[0],j=E[1],S=Ar(Mr([]),2),P=S[0],x=S[1],k=Ar(Mr([]),2),I=k[0],N=k[1],A=Ar(Mr(!1),2),C=A[0],D=A[1];Ur((function(){if(e.event.hasOwnProperty("id")){v(!0),c(e.event),t.update(e.event,"set_current_event");var n="?args=".concat(encodeURIComponent(JSON.stringify({id:e.event.id})));fetch("".concat(window.vibecal.api.url,"/event/getEvent").concat(n,"&force"),{method:"post",body:JSON.stringify({id:e.event.id,fields:b,token:Fr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){v(!1),e.status&&w(Nr(e.fields))}));var r="?args=".concat(encodeURIComponent(JSON.stringify({post_id:e.event.id})));fetch("".concat(window.vibecal.api.url,"/event/event_users").concat(r),{method:"post",body:JSON.stringify({post_id:e.event.id,token:Fr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&x(e.data)}));var a="?args=".concat(encodeURIComponent(JSON.stringify({post_id:e.event.id})));fetch("".concat(window.vibecal.api.url,"/event/event_invites").concat(a),{method:"post",body:JSON.stringify({post_id:e.event.id,token:Fr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&N(e.data)}))}}),[e.event]);var T,M,U,R,J=function(){if(o.hasOwnProperty("meta")&&o.meta.findIndex((function(e){return"start"==e.meta_key}))>-1&&o.meta.findIndex((function(e){return"end"==e.meta_key}))>-1&&o.post_title.length){l(!0);var n="?post&args=".concat(encodeURIComponent(JSON.stringify({event:kr(kr({},o),s)})));fetch("".concat(window.vibecal.api.url,"/event/add_event").concat(n),{method:"post",body:JSON.stringify({event:kr(kr({},o),s),token:Fr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(n){n.status&&(o.id?t.update(n.event,"update"):t.update(n.event,"add"),e.close()),n.hasOwnProperty("message")&&Wr("vibebp").addNotification({text:n.message}),l(!1)}))}else Wr("vibebp").addNotification({text:window.vibecal.translations.missing_data})},L=(T=function(e,t){e.length>3&&(O(!0),fetch("".concat(window.vibebp.api.url,"/search?nocache"),{method:"post",body:JSON.stringify({search:"*"+e+"*",type:"user",token:Fr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){O(!1),e.status&&(Array.isArray(e.results)?j(e.results):j([]))})))},M=500,U=null,function(){var e=this,t=arguments,n=function(){R=null,U||T.apply(e,t)},r=U&&!R;clearTimeout(R),R=setTimeout(n,M||200),r&&T.apply(e,t)}),F=function(e,t,n){var r=e.field,a=kr({},o);switch(r.from){case"post":if("post_content"==r.id)return void p({post_content:r.value,raw:r.raw});a[r.id]=r.value;break;case"meta":t=-1,a.hasOwnProperty("meta")&&a.meta.length&&(t=a.meta.findIndex((function(e){return e.meta_key==r.id}))),t>-1?a.meta[t].meta_value=r.value:a.meta.push({meta_key:r.id,meta_value:r.value}),"editor"==r.type&&r.hasOwnProperty("raw")&&((t=a.meta.findIndex((function(e){return e.meta_key==r.id+"_raw"})))>-1?a.meta[t].meta_value=r.raw:a.meta.push({meta_key:r.id+"_raw",meta_value:r.raw}));break;case"taxonomy":var l=a.taxonomy.findIndex((function(e){return e.taxonomy==r.taxonomy}));-1==l?a.taxonomy.push({taxonomy:a.taxonomy,value:r.value}):a.taxonomy[l].value=r.value}c(a)};return wp.element.createElement(Rr,null,wp.element.createElement("div",{className:"new_event_overlay",onClick:e.close}),wp.element.createElement("div",{className:"new_event_wrapper"},m?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{className:"new_event"},wp.element.createElement("div",{className:"new_event_form"},wp.element.createElement("div",{class:"vibebp_form"},b.map((function(e,t){return wp.element.createElement("div",{className:"vibebp_form_field control"},wp.element.createElement(Pr,{field:e,fieldIndex:t,update:F,event:o}))})),wp.element.createElement(Rr,null,o.hasOwnProperty("id")?wp.element.createElement(Rr,null,wp.element.createElement("div",{className:"event_participants"},wp.element.createElement("label",null,window.vibecal.translations.participants),wp.element.createElement("div",{className:"all"},P&&P.length?P.map((function(t){return wp.element.createElement("div",{className:"event_participant",onClick:function(){return n=t.user_id,r="?post&args=".concat(encodeURIComponent(JSON.stringify({post_id:e.event.id,user_id:n}))),void fetch("".concat(window.vibecal.api.url,"/event/remove_user").concat(r),{method:"post",body:JSON.stringify({post_id:e.event.id,user_id:n,token:Fr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(e.status){var t=Nr(P);t.splice(t.findIndex((function(e){return e.user_id==n})),1),x(nneventUsers)}e.hasOwnProperty("message")&&Wr("vibebp").addNotification({text:e.message})}));var n,r}},wp.element.createElement(d,{type:"member",id:{user_id:parseInt(t.user_id)}}))})):"")),I&&I.length?wp.element.createElement("div",{className:"event_invitees"},wp.element.createElement("label",null,window.vibecal.translations.invited),wp.element.createElement("div",{className:"all"},I.map((function(t){return wp.element.createElement("div",{className:"event_invitee",onClick:function(){if(t.new){var n=Nr(_);n.push(t),j(n)}else r=t.user_id,a="?post&args=".concat(encodeURIComponent(JSON.stringify({post_id:e.event.id,user_id:r}))),fetch("".concat(window.vibecal.api.url,"/event/remove_invite").concat(a),{method:"post",body:JSON.stringify({post_id:e.event.id,user_id:r,token:Fr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){D(!1),e.status&&N(e.users),e.hasOwnProperty("message")&&Wr("vibebp").addNotification({text:e.message})}));var r,a,l=Nr(I);l.splice(l.findIndex((function(e){return e.user_id==t.user_id})),1),N(l)}},wp.element.createElement(d,{type:"member",id:{user_id:parseInt(t.user_id)}}))})),I.filter((function(e){return e.new})).length?wp.element.createElement("a",{className:C?"button is-primary is-loading":"button is-primary",onClick:function(){D(!0);var t={event_id:e.event.id,user_ids:I.filter((function(e){return e.new}))},n="?post&args=".concat(encodeURIComponent(JSON.stringify(kr({},t))));fetch("".concat(window.vibecal.api.url,"/event/send_invite").concat(n),{method:"post",body:JSON.stringify(kr(kr({},t),{},{token:Fr("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){D(!1),e.status?N(e.data):e.hasOwnProperty("message")&&Wr("vibebp").addNotification({text:e.message})}))}},window.vibecal.translations.send_invite):"")):"",wp.element.createElement("div",{className:"event_search_users"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibecal.translations.send_invites),wp.element.createElement("div",{className:h?"control is-loading":"control"},wp.element.createElement("input",{type:"text",onChange:function(e){return L(e.target.value,o.id)},placeholder:window.vibecal.translations.search_here}))),wp.element.createElement("div",{className:"all"},_&&_.length?_.map((function(e,t){if(!(P&&P.length&&P.findIndex((function(t){return t.user_id==e.id}))>-1||I&&I.length&&I.findIndex((function(t){return t.user_id==e.id}))>-1))return e.user_id=e.id,wp.element.createElement("div",{className:"searched_participant",onClick:function(){var n=[];Array.isArray(I)&&(n=Nr(I)),n.push(kr(kr({},e),{},{new:!0})),N(n);var r=Nr(_);r.splice(t,1),j(r)}},wp.element.createElement("span",null,e.name))})):""))):""))),wp.element.createElement("div",{className:"new_event_actions"},o.id?wp.element.createElement("a",{className:a?"button is-success is-loading":"button is-success",onClick:J},window.vibecal.translations.edit_event):wp.element.createElement("a",{className:a?"button is-success is-loading":"button is-success",onClick:J},window.vibecal.translations.create_event),wp.element.createElement("a",{className:"link",onClick:e.close},window.vibecal.translations.cancel),o.id?wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){var n="?post&args=".concat(encodeURIComponent(JSON.stringify({post_id:e.event.id})));fetch("".concat(window.vibecal.api.url,"/event/delete").concat(n),{method:"post",body:JSON.stringify({post_id:e.event.id,token:Fr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(n){n.status&&t.update(e.event,"delete"),n.hasOwnProperty("message")&&Wr("vibebp").addNotification({text:n.message})}))}}):""))))};function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kr=wp.element,Vr=Kr.useState,Zr=Kr.useEffect,Br=Kr.Fragment,Qr=function(e){var t=zr(Vr({}),2),n=t[0],r=t[1];return Zr((function(){if(e.hasOwnProperty("event")){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.event),n=t.meta.findIndex((function(e){return"googleevent"==e.meta_key}));if(!(n>-1))return"";var a={};a.value=t.meta[n].meta_value,r(a)}}),[e.event]),wp.element.createElement(Br,null,n&&n.value&&n.value.conferenceData&&n.value.conferenceData.entryPoints&&n.value.conferenceData.entryPoints[0]?wp.element.createElement("span",null,wp.element.createElement("strong",null,window.vibecal.translations.meeting),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-google"}),wp.element.createElement("span",null,wp.element.createElement("a",{href:n.value.conferenceData.entryPoints[0].uri,target:"_blank"},n.value.conferenceData.entryPoints[0].label)))):"")};function Xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ea=wp.element,ta=ea.useState,na=ea.useEffect,ra=ea.Fragment,aa=wp.data,la=aa.select,ia=aa.dispatch,oa=function(e){var t=Xr(ta({}),2),n=t[0],r=t[1],a=Xr(ta([]),2),l=a[0],i=a[1],o=Xr(ta(!1),2),c=o[0],u=(o[1],la("vibebp").getUser());na((function(){if(e.hasOwnProperty("event")&&(r(e.event),e.event.hasOwnProperty("id")&&e.edit)){var t="?args=".concat(encodeURIComponent(JSON.stringify({post_id:e.event.id})));fetch("".concat(window.vibecal.api.url,"/event/event_users").concat(t),{method:"post",body:JSON.stringify({post_id:e.event.id,token:la("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&i(e.data),e.hasOwnProperty("message")&&ia("vibebp").addNotification({text:e.message})}))}}),[e.event]);var s=function(e){if(n&&n.meta&&Array.isArray(n.meta)){var t=n.meta.findIndex((function(t){return t.meta_key==e}));return t>-1?n.meta[t].meta_value:""}return""};na((function(){e.hasOwnProperty("invite")&&e.invite.hasOwnProperty("id")&&e.invite.hasOwnProperty("event")&&r(e.invite.event)}),[e.invite]);return wp.element.createElement(ra,null,n.hasOwnProperty("id")?wp.element.createElement("div",{className:"event_wrapper"},wp.element.createElement("div",{className:"event"},wp.element.createElement("div",{className:"event_details"},wp.element.createElement("h2",null,n.post_title),n.post_content?wp.element.createElement("div",{className:"event_description",dangerouslySetInnerHTML:{__html:n.post_content}}):"",n.meta?wp.element.createElement("div",{className:"event_start_end"},wp.element.createElement("span",null,wp.element.createElement("strong",null,window.vibecal.translations.starts),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-calendar"}),wp.element.createElement("span",null,new Date(s("start")).toLocaleString()))),wp.element.createElement("span",null,wp.element.createElement("strong",null,window.vibecal.translations.ends),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-calendar"}),wp.element.createElement("span",null,new Date(s("end")).toLocaleString()))),wp.element.createElement(Qr,{event:n})):""),e.event?wp.element.createElement(ra,null,e.edit?wp.element.createElement("div",{className:"event_participants"},wp.element.createElement("label",null,window.vibecal.translations.participants,":"),wp.element.createElement("div",{className:"all"},l&&l.length?l.map((function(e){return wp.element.createElement("span",{class:"event_participant",className:"tip",title:e.nickname},wp.element.createElement("img",{src:e.image}))})):"")):"",wp.element.createElement("div",{className:"event_actions"},e.event.author==u.id?wp.element.createElement("a",{className:"button is-success",onClick:function(){e.update(n)}},window.vibecal.translations.edit_event):"",e.event.meta.findIndex((function(e){return"public"==e.meta_value}))>-1?wp.element.createElement("a",{className:c?"is-loading button is-primary":"button is-primary",onClick:function(){var t="?post&args=".concat(encodeURIComponent(JSON.stringify({post_id:e.event.id})));fetch("".concat(window.vibecal.api.url,"/event/hide").concat(t),{method:"post",body:JSON.stringify({post_id:e.event.id,token:la("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&eventsContext.update(e.event,"delete"),e.hasOwnProperty("message")&&ia("vibebp").addNotification({text:e.message})})),e.close()}},window.vibecal.translations.hide_event):"",wp.element.createElement("a",{className:"link",onClick:function(){e.close()}},window.vibecal.translations.cancel))):"",e.invite&&e.invite.id&&e.action&&e.close?wp.element.createElement(ra,null,wp.element.createElement("div",{className:"invite"},wp.element.createElement("div",{className:"inviter"},wp.element.createElement("strong",null,window.vibecal.translations.invited_by+": "),wp.element.createElement("span",null,e.invite.inviter.nickname)),wp.element.createElement("div",{className:"event_actions"},0==e.invite.accepted?wp.element.createElement(ra,null,wp.element.createElement("a",{className:"button is-success",onClick:function(){return e.action("accept",e.invite.id)}},window.vibecal.translations.accept),wp.element.createElement("a",{className:"button is-success",onClick:function(){return e.action("delete",e.invite.id)}},window.vibecal.translations.delete),wp.element.createElement("a",{className:"link",onClick:e.close},window.vibecal.translations.cancel)):wp.element.createElement(ra,null,wp.element.createElement("a",{className:"link",onClick:e.close},window.vibecal.translations.cancel))))):"")):"")};function ca(e){return function(e){if(Array.isArray(e))return da(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ma(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(n),!0).forEach((function(t){pa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||ma(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){if(e){if("string"==typeof e)return da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?da(e,t):void 0}}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var va=wp.element,ya=va.useState,ba=va.useEffect,wa=va.Fragment,ga=va.createRef,ha=va.useContext,Oa=wp.data,Ea=Oa.select,_a=Oa.dispatch,ja=function(e){var t=ha(r),n=fa(ya({pending:[],accepted:[]}),2),a=n[0],l=n[1],i=fa(ya([]),2),o=i[0],c=i[1],u=fa(ya({type:"pending",s:"",start:"",end:""}),2),s=u[0],p=u[1],f=fa(ya(sa({},s)),2),m=(f[0],f[1],fa(ya(""),2)),d=m[0],y=m[1],b=fa(ya(!1),2),w=b[0],g=(b[1],ga(null)),h=fa(ya(),2),O=h[0],E=h[1],_=fa(ya({calendarView:"dayGridMonth",slotDuration:"00:15:00",editable:!0,droppable:!0}),2),j=_[0],S=(_[1],fa(ya(),2)),P=S[0],x=S[1],k=fa(ya(null),2),I=k[0],N=k[1],A=function(){p(sa(sa({},s),{},{randonKey:Math.random()}))};ba((function(){return document.addEventListener("vibebp_component_reload",A),function(){document.removeEventListener("vibebp_component_reload",A)}})),v((function(){if(s.start&&s.end&&s.type){I&&I.abort();var e=new AbortController,t=I?{signal:e.signal}:{};N(e);var n=sa({},a);n[s.type]=[],C(n,s.type);var r="?args=".concat(encodeURIComponent(JSON.stringify(sa({},s))));fetch("".concat(window.vibecal.api.url,"/event/invite/my_invites").concat(r),sa(sa({method:"post"},t),{},{body:JSON.stringify({filter:s,token:Ea("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){if(e.status){if(e.hasOwnProperty("data")&&Array.isArray(e.data)&&e.data.length)if(w)n[s.type]=e.data;else{var t=ca(n[s.type]);e.data.map((function(e){t.push(e)})),n[s.type]=t}}else e.hasOwnProperty("message")&&_a("vibebp").addNotification({text:e.message});C(n,s.type)})).catch((function(e){"AbortError"===e.name||(N(null),console.error("Uh oh, an error!",e))}))}}),500,[s,w]);var C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&e.hasOwnProperty(t)){var r=sa({},window.vibecal.calinvites),a=[];if(n)r[t]=ca(e[t]),e[t].map((function(e){a.push(e.event)}));else{var i=ca(r[t]);a=ca(o),e[t].map((function(e){a.push(e.event),i.push(e)})),r[t]=ca(i)}l(r),window.vibecal.calinvites=sa({},r),c(a)}},D=function(e){var t=[];return Array.isArray(e)&&e.length&&e.map((function(e){var n={};if(e.id&&(n.id=e.id),e.post_title&&(n.title=e.post_title),e.hasOwnProperty("meta")&&Array.isArray(e.meta)&&e.meta.length){var r=e.meta.findIndex((function(e){return"recurring"==e.meta_key}));r>-1&&e.meta[r].meta_value?(n.groupId=n.id,"daysOfWeek"==e.meta[r].meta_value.recurring&&(n.daysOfWeek=e.meta[r].meta_value.daysOfWeek),e.meta.map((function(e){e.meta_key&&e.meta_value&&("start"==e.meta_key?(n.startTime=new Date(e.meta_value).getHours()+":"+new Date(e.meta_value).getMinutes(),n.startRecur=new Date(e.meta_value)):"end"==e.meta_key?(n.endTime=new Date(e.meta_value).getHours()+":"+new Date(e.meta_value).getMinutes(),n.endRecur=new Date(e.meta_value)):"color"==e.meta_key&&(n.color=e.meta_value))}))):e.meta.map((function(e){e.meta_key&&e.meta_value&&("start"==e.meta_key?n.start=e.meta_value:"end"==e.meta_key?n.end=e.meta_value:"color"==e.meta_key&&(n.color=e.meta_value))}))}t.push(n)})),t},T=function(){y(""),x(null)},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){fetch("".concat(window.vibecal.api.url,"/event/invite/action_invite?post"),{method:"post",body:JSON.stringify({invitation_id:e,action:"accept",token:Ea("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&e.data,e.hasOwnProperty("message")&&_a("vibebp").addNotification({text:e.message}),t(e.status)}))}))},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){fetch("".concat(window.vibecal.api.url,"/event/invite/action_invite"),{method:"post",body:JSON.stringify({invitation_id:e,action:"reject",token:Ea("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&_a("vibebp").addNotification({text:e.message}),t(e.status)}))}))},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){fetch("".concat(window.vibecal.api.url,"/event/invite/action_invite?post"),{method:"post",body:JSON.stringify({invitation_id:e,action:"delete",token:Ea("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&_a("vibebp").addNotification({text:e.message}),t(e.status)}))}))};return ba((function(){if(g){var e={initialView:j.calendarView,themeSystem:"bootstrap",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},editable:j.editable,droppable:j.droppable,locale:t.languageCode,eventClick:function(e,t,n){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t){var n=ca(window.vibecal.calinvites[t]),r=n.findIndex((function(t){return t.event.id==e.event.id}));r>-1&&(y(t),x(n[r]))}}(e,s.type)},datesSet:function(e){var t=e.view.activeStart.getTime(),n=e.view.activeEnd.getTime();p(sa(sa({},s),{},{start:t,end:n}))}};!O&&o.length&&(e.events=D(o));var n=new FullCalendar.Calendar(g.current,e);O&&(O.setOption("events",D(o)),O.setOption("locale",t.languageCode),n=O),n.el&&n.render(),E(n)}}),[o,g,t.languageCode]),wp.element.createElement("div",{className:"myinvites_wrapper"},wp.element.createElement("div",{className:"mycourses_header vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",placeholder:window.vibecal.translations.search_here,onChange:function(e){p(sa(sa({},s),{},{s:e.target.value}))}}),wp.element.createElement("span",{class:"vicon vicon-search"})),wp.element.createElement("div",{className:"buttons has-addons"},wp.element.createElement("button",{className:"pending"==s.type?"button is-success is-selected":"button",onClick:function(){p(sa(sa({},s),{},{type:"pending"}))}},window.vibecal.translations.pending_invites),wp.element.createElement("button",{className:"accepted"==s.type?"button is-success is-selected":"button",onClick:function(){p(sa(sa({},s),{},{type:"accepted"}))}},window.vibecal.translations.accepted_invites))),wp.element.createElement(wa,null,wp.element.createElement("div",{className:"calendar"},wp.element.createElement("div",{id:"fullcalendar",ref:g}))),wp.element.createElement(wa,null,P?wp.element.createElement(oa,{invite:P,action:function(e,t){var n=-1,r=sa({},a);if(e&&t&&d)switch(e){case"accept":M(t).then((function(e){e&&(n=r[d].findIndex((function(e){return e.id==t})))>-1&&(r[d].splice(n,1),C(r,d))}));break;case"reject":U(t).then((function(e){e&&(n=r[d].findIndex((function(e){return e.id==t})))>-1&&(r[d].splice(n,1),C(r,d))}));break;case"delete":R(t).then((function(e){e&&(n=r[d].findIndex((function(e){return e.id==t})))>-1&&(r[d].splice(n,1),C(r,d))}))}T()},close:function(){x(!1)}}):""))};function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){xa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ka(e){return function(e){if(Array.isArray(e))return Aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Na(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||Na(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Na(e,t){if(e){if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aa(e,t):void 0}}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ca=wp.element,Da=Ca.useState,Ta=Ca.useEffect,Ma=Ca.createRef,Ua=Ca.useContext,Ra=(Ca.useRef,wp.data),Ja=Ra.select,La=Ra.dispatch,Fa=void 0!==window.vibecal?window.vibecal:window.vibecalwidget,Wa=function(e){var t=Ua(r),n=Ia(Da(ka(t.events)),2),a=n[0],l=n[1],i=Ma(null);Ta((function(){l(ka(t.events))}),[t.events]);var o=Ia(Da(),2),c=o[0],u=o[1],s=Ia(Da({calendarView:Fa.view?Fa.view:"dayGridMonth",slotDuration:"00:15:00",editable:!0,droppable:!0}),2),p=s[0];s[1];return Ta((function(){if(i){var n={initialView:p.calendarView,themeSystem:"bootstrap",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},editable:p.editable,droppable:p.droppable,locale:t.languageCode,eventDrop:function(e){if(e.event.id){e.event.start.getTime(),e.event.end.getTime();e.event.id,n={event:update},r="?post&args=".concat(encodeURIComponent(JSON.stringify(Pa({},n)))),fetch("".concat(Fa.api.url,"/event/drag").concat(r),{method:"post",body:JSON.stringify(Pa(Pa({},n),{},{token:Ja("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){e.status&&t.update(e.data,"update_drag",update),e.hasOwnProperty("message")&&La("vibebp").addNotification({text:e.message})}))}else console.log("some error on drag");var n,r},eventClick:function(e,n,r){t.update(e.event.id,"show_event_id")},datesSet:function(t){var n=t.view.activeStart.getTime(),r=t.view.activeEnd.getTime();e.updateFilter&&e.updateFilter(n,r)}};!c&&a.length&&(n.events=g(a));var r=new FullCalendar.Calendar(i.current,n);c&&(c.setOption("events",g(a)),c.setOption("locale",t.languageCode),r=c),r.render(),u(r)}}),[a,t.languageCode]),wp.element.createElement("div",{className:"vibe_fullcalendar_wrapper"},wp.element.createElement("div",{class:"vibe_fullcalendar"},wp.element.createElement("div",{id:"fullcalendar",ref:i})))};function $a(e){return function(e){if(Array.isArray(e))return Va(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ka(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(n),!0).forEach((function(t){za(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return l}(e,t)||Ka(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ka(e,t){if(e){if("string"==typeof e)return Va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Va(e,t):void 0}}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Za=wp.element,Ba=Za.useState,Qa=Za.useEffect,Xa=Za.Fragment,Ya=wp.data,el=Ya.select,tl=Ya.dispatch,nl=[],rl=function(e){var t=el("vibebp").getUser(),n=qa(Ba([]),2),a=n[0],l=n[1],i=qa(Ba({}),2),o=i[0],c=(i[1],qa(Ba([]),2)),u=c[0],s=c[1],p=qa(Ba({}),2),f=p[0],m=p[1],d=qa(Ba(!1),2),v=d[0],y=d[1],b=qa(Ba(!1),2),w=b[0],g=b[1],h=qa(Ba(!1),2),O=h[0],E=h[1],_=qa(Ba({label:"",color:"#000"}),2),j=_[0],S=_[1],P=qa(Ba({}),2),x=P[0],k=P[1],I=qa(Ba(!1),2),N=I[0],A=I[1],C=qa(Ba({label:"",start:"",end:""}),2),D=C[0],T=C[1],M=t.caps.hasOwnProperty(window.vibecal.settings.new_calendar_cap),U=qa(Ba(navigator.language),2),R=U[0],J=U[1],L=qa(Ba(),2),F=L[0],W=(L[1],qa(Ba(!1),2)),$=(W[0],W[1],qa(Ba([]),2)),H=$[0],G=($[1],qa(Ba(!1),2)),z=(G[0],G[1],qa(Ba({}),2)),q=z[0],K=z[1],V=qa(Ba(null),2),Z=V[0],B=V[1];Qa((function(){var t,n=el("vibebp").getMenu().filter((function(e){return"calendar"===e.parent}));if(n.map((function(e,t){-1===n.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&n[t].class.push("current-menu-item")})),s(n),Array.isArray(n)&&n.length){var r={};r.filter=n[0].css_id,m(r)}-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar"),e.hasOwnProperty("module_type")?T(Ga(Ga({},D),{},{module_type:e.module_type,module_id:e.module_id})):fetch("".concat(window.vibecal.api.url,"/event/label/all_labels?nocache"),{method:"post",body:JSON.stringify({token:el("vibebp").getToken(),count:!0})}).then((function(e){return e.json()})).then((function(e){e.status&&k(e.data),e.hasOwnProperty("message")&&tl("vibebp").addNotification({text:e.message})})),(t="vibecal",new Promise((function(e){window[t].settings.languageCode.length?e(window[t].settings.languageCode):localforage.getItem("fullcalendar_locale_language_code").then((function(t){e(t||navigator.language)}))}))).then((function(e){J(e)}))}),[]);var Q=function(e){e&&(localforage.setItem("fullcalendar_locale_language_code",e),J(e))};Qa((function(){if(Y([],"update_events"),D.start&&D.end){Z&&Z.abort();var e=new AbortController,t=Z?{signal:e.signal}:{};B(e);var n="?args=".concat(encodeURIComponent(JSON.stringify(Ga({},D))));fetch("".concat(window.vibecal.api.url,"/event/getEvents").concat(n),Ga(Ga({method:"post"},t),{},{body:JSON.stringify({token:el("vibebp").getToken(),filter:D})})).then((function(e){return e.json()})).then((function(e){e.status?Y(e.data,"update_events"):e.hasOwnProperty("message")&&tl("vibebp").addNotification({text:e.message})})).catch((function(e){"AbortError"===e.name||(B(null),console.error("Uh oh, an error!",e))}))}}),[D]);var X=function(){T(Ga(Ga({},D),{},{randonKey:Math.random()}))};Qa((function(){return document.addEventListener("vibebp_component_reload",X),function(){document.removeEventListener("vibebp_component_reload",X)}}));var Y=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=$a(a),o=-1;switch(n){case"add":i.push(t),e(i,"update_events");break;case"update":(o=i.findIndex((function(e){return e.id==t.id})))>=0&&(i[o]=t,e(i,"update_events"));break;case"delete":(o=i.findIndex((function(e){return e.id==t.id})))>=0&&(i.splice(o,1),e(i,"update_events"),y(!1));break;case"update_events":l(t),nl=$a(t);break;case"show_event_id":if((i=$a(nl)).length){var c=i.findIndex((function(e){return parseInt(e.id)==parseInt(t)}));c>=0&&g(i[c])}break;case"update_drag":if((o=i.findIndex((function(e){return r.id==e.id})))>=0){var u=Ga({},i[o]);if(u.hasOwnProperty("meta")){var s=u.meta.findIndex((function(e){return"start"==e.meta_key}));s>-1&&(u.meta[s].meta_value=r.start),(s=u.meta.findIndex((function(e){return"end"==e.meta_key})))>-1&&(u.meta[s].meta_value=r.end)}i[o]=u,e(i,"update_events")}break;case"set_current_event":K(t)}};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement(Xa,null,e.hasOwnProperty("module_type")?"":wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibecal.title),Object.keys(t.caps).indexOf(window.vibecal.settings.new_event_cap[0])>-1?wp.element.createElement("a",{className:"button is-link new_mail",onClick:function(){y(!v)}},window.vibecal.translations.add_event):"",u.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:n,onClick:function(n){var r=Ga({},f);r.filter=e.css_id,r.page=1,f.css_id!==r.filter&&(m(r),setTimeout((function(){var e=new CustomEvent("calendar_component_"+r.filter,{detail:r});document.dispatchEvent(e)}),200));var a=$a(u),l=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[l].class.splice(a[l].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),s(a)}},e.name)})),M?wp.element.createElement("div",{className:"labels"},wp.element.createElement("div",{class:"labels_title"},wp.element.createElement("span",null,window.vibebp.translations.labels),wp.element.createElement("a",{className:"link",onClick:function(){return E(!O)}},window.vibecal.translations.add_new)),O?wp.element.createElement("div",{className:"newlabel_form"},wp.element.createElement("input",{type:"text",value:j.label,onChange:function(e){return S(Ga(Ga({},j),{},{label:e.target.value}))}}),wp.element.createElement("input",{type:"color",style:{heigh:"20px"},value:j.color,onChange:function(e){return S(Ga(Ga({},j),{},{color:e.target.value}))}}),wp.element.createElement("a",{className:N?"button is-primary is-loading":"button is-primary",onClick:function(){A(!0);var e="?post&args=".concat(encodeURIComponent(JSON.stringify({label:j})));fetch("".concat(window.vibecal.api.url,"/event/label/new_label").concat(e),{method:"post",body:JSON.stringify({label:j,token:el("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(A(!1),e.status){var t=Ga(Ga({},x),e.data);k(t)}e.hasOwnProperty("message")&&tl("vibebp").addNotification({text:e.message}),E(!1)}))}},wp.element.createElement("span",{className:"vicon vicon-plus"}))):"",Object.keys(x)&&Object.keys(x).length?wp.element.createElement("ul",{className:"message_labels"},Object.keys(x).map((function(e){var t=e==D.label;return wp.element.createElement("li",{className:t?"selected single_label":"single_label",onClick:function(){T(Ga(Ga({},D),{},t?{label:""}:{label:e}))}},wp.element.createElement("label",null,wp.element.createElement("strong",null,wp.element.createElement("span",{style:{borderColor:x[e].color}}),x[e].label),wp.element.createElement("span",{onClick:function(){return t=e,n="?post&args=".concat(encodeURIComponent(JSON.stringify({key:t}))),void fetch("".concat(window.vibecal.api.url,"/event/label/remove").concat(n),{method:"post",body:JSON.stringify({key:t,token:el("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(e.status){var n=Ga({},x);delete n[t],k(n)}e.hasOwnProperty("message")&&tl("vibebp").addNotification({text:e.message})}));var t,n},className:"vicon vicon-trash"})),x[e].hasOwnProperty("count")?x[e].count:0)}))):""):"")),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement("div",{className:"vibecal_wrapper"},wp.element.createElement(r.Provider,{value:{events:a,update:Y,invites:o,languageCode:R,gcal:{googleSyncedEvents:H,settings:F},currentEvent:q}},wp.element.createElement(Xa,null,wp.element.createElement("div",{className:"calendar_topheader"},wp.element.createElement("div",null),window.vibecal.settings.languageCode?"":wp.element.createElement("div",null,wp.element.createElement("span",null,window.vibecal.translations.set_langauge),wp.element.createElement("div",{className:"buttons has-addons small"},wp.element.createElement("a",{className:R==navigator.language?"button is-focused":"button",onClick:function(){return Q(navigator.language)}},window.vibecal.translations.change_to_device_language),wp.element.createElement("a",{className:R==window.vibecal.settings.site_langauge.key?"button is-focused":"button",onClick:function(){return Q(window.vibecal.settings.site_langauge.key)}},window.vibecal.settings.site_langauge.label)))),"my_invites"==f.filter?wp.element.createElement(ja,null):"my_events"==f.filter?wp.element.createElement(Wa,{updateFilter:function(e,t){T(Ga(Ga({},D),{},{start:e,end:t}))}}):f.filter?wp.element.createElement("div",{id:"calendar_component_"+f.filter}):"",v?wp.element.createElement($r,{event:v,close:function(){y(!1)}}):w?wp.element.createElement(oa,{event:w,close:function(){g(!1)},update:function(e){g(!1),y(e)}}):""))))))},al=wp.element,ll=(al.createElement,al.render);al.useState,al.useEffect,al.Fragment,al.useContext;document.addEventListener("component_loaded",(function(e){"calendar"===e.detail.component&&setTimeout((function(){ll(wp.element.createElement(rl,null),document.querySelector("#calendar_component"))}),200)}),!1),document.addEventListener("group_tab",(function(e){if("group_events"===e.detail.tab){var t=document.querySelector("#group_events");if(t){var n=e.detail.group.id;ll(wp.element.createElement(rl,{module_id:n,module_type:"group"}),t)}}}),!1),document.addEventListener("fullcourse_external_tab",(function(e){if("course_events"===e.detail.tab){var t=document.querySelector(".course_events");if(t){var n=e.detail.course.id;ll(wp.element.createElement(rl,{module_id:n,module_type:"course"}),t)}}}),!1)}]);